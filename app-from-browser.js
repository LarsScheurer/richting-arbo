(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function SE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var om={exports:{}},Kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function Kw(){if(v0)return Kl;v0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:c}}return Kl.Fragment=e,Kl.jsx=n,Kl.jsxs=n,Kl}var E0;function Yw(){return E0||(E0=1,om.exports=Kw()),om.exports}var y=Yw(),lm={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0;function Qw(){if(b0)return Ce;b0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),x=Symbol.iterator;function U(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,W={};function pe(M,$,se){this.props=M,this.context=$,this.refs=W,this.updater=se||Y}pe.prototype.isReactComponent={},pe.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},pe.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ue(){}ue.prototype=pe.prototype;function le(M,$,se){this.props=M,this.context=$,this.refs=W,this.updater=se||Y}var Ae=le.prototype=new ue;Ae.constructor=le,te(Ae,pe.prototype),Ae.isPureReactComponent=!0;var me=Array.isArray;function ne(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(M,$,se){var oe=se.ref;return{$$typeof:s,type:M,key:$,ref:oe!==void 0?oe:null,props:se}}function V(M,$){return C(M.type,$,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function k(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(se){return $[se]})}var I=/\/+/g;function Je(M,$){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):$.toString(36)}function yt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ne,ne):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function j(M,$,se,oe,Te){var Ie=typeof M;(Ie==="undefined"||Ie==="boolean")&&(M=null);var Me=!1;if(M===null)Me=!0;else switch(Ie){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(M.$$typeof){case s:case e:Me=!0;break;case T:return Me=M._init,j(Me(M._payload),$,se,oe,Te)}}if(Me)return Te=Te(M),Me=oe===""?"."+Je(M,0):oe,me(Te)?(se="",Me!=null&&(se=Me.replace(I,"$&/")+"/"),j(Te,$,se,"",function(gi){return gi})):Te!=null&&(D(Te)&&(Te=V(Te,se+(Te.key==null||M&&M.key===Te.key?"":(""+Te.key).replace(I,"$&/")+"/")+Me)),$.push(Te)),1;Me=0;var At=oe===""?".":oe+":";if(me(M))for(var lt=0;lt<M.length;lt++)oe=M[lt],Ie=At+Je(oe,lt),Me+=j(oe,$,se,Ie,Te);else if(lt=U(M),typeof lt=="function")for(M=lt.call(M),lt=0;!(oe=M.next()).done;)oe=oe.value,Ie=At+Je(oe,lt++),Me+=j(oe,$,se,Ie,Te);else if(Ie==="object"){if(typeof M.then=="function")return j(yt(M),$,se,oe,Te);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ee(M,$,se){if(M==null)return M;var oe=[],Te=0;return j(M,oe,"","",function(Ie){return $.call(se,Ie,Te++)}),oe}function re(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(se){(M._status===0||M._status===-1)&&(M._status=1,M._result=se)},function(se){(M._status===0||M._status===-1)&&(M._status=2,M._result=se)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var we=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},xe={map:ee,forEach:function(M,$,se){ee(M,function(){$.apply(this,arguments)},se)},count:function(M){var $=0;return ee(M,function(){$++}),$},toArray:function(M){return ee(M,function($){return $})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ce.Activity=w,Ce.Children=xe,Ce.Component=pe,Ce.Fragment=n,Ce.Profiler=o,Ce.PureComponent=le,Ce.StrictMode=r,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(M,$,se){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var oe=te({},M.props),Te=M.key;if($!=null)for(Ie in $.key!==void 0&&(Te=""+$.key),$)!S.call($,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&$.ref===void 0||(oe[Ie]=$[Ie]);var Ie=arguments.length-2;if(Ie===1)oe.children=se;else if(1<Ie){for(var Me=Array(Ie),At=0;At<Ie;At++)Me[At]=arguments[At+2];oe.children=Me}return C(M.type,Te,oe)},Ce.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Ce.createElement=function(M,$,se){var oe,Te={},Ie=null;if($!=null)for(oe in $.key!==void 0&&(Ie=""+$.key),$)S.call($,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Te[oe]=$[oe]);var Me=arguments.length-2;if(Me===1)Te.children=se;else if(1<Me){for(var At=Array(Me),lt=0;lt<Me;lt++)At[lt]=arguments[lt+2];Te.children=At}if(M&&M.defaultProps)for(oe in Me=M.defaultProps,Me)Te[oe]===void 0&&(Te[oe]=Me[oe]);return C(M,Ie,Te)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:m,render:M}},Ce.isValidElement=D,Ce.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:re}},Ce.memo=function(M,$){return{$$typeof:_,type:M,compare:$===void 0?null:$}},Ce.startTransition=function(M){var $=R.T,se={};R.T=se;try{var oe=M(),Te=R.S;Te!==null&&Te(se,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ne,we)}catch(Ie){we(Ie)}finally{$!==null&&se.types!==null&&($.types=se.types),R.T=$}},Ce.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ce.use=function(M){return R.H.use(M)},Ce.useActionState=function(M,$,se){return R.H.useActionState(M,$,se)},Ce.useCallback=function(M,$){return R.H.useCallback(M,$)},Ce.useContext=function(M){return R.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,$){return R.H.useDeferredValue(M,$)},Ce.useEffect=function(M,$){return R.H.useEffect(M,$)},Ce.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Ce.useId=function(){return R.H.useId()},Ce.useImperativeHandle=function(M,$,se){return R.H.useImperativeHandle(M,$,se)},Ce.useInsertionEffect=function(M,$){return R.H.useInsertionEffect(M,$)},Ce.useLayoutEffect=function(M,$){return R.H.useLayoutEffect(M,$)},Ce.useMemo=function(M,$){return R.H.useMemo(M,$)},Ce.useOptimistic=function(M,$){return R.H.useOptimistic(M,$)},Ce.useReducer=function(M,$,se){return R.H.useReducer(M,$,se)},Ce.useRef=function(M){return R.H.useRef(M)},Ce.useState=function(M){return R.H.useState(M)},Ce.useSyncExternalStore=function(M,$,se){return R.H.useSyncExternalStore(M,$,se)},Ce.useTransition=function(){return R.H.useTransition()},Ce.version="19.2.0",Ce}var T0;function ng(){return T0||(T0=1,lm.exports=Qw()),lm.exports}var fe=ng();const Xw=SE(fe);var cm={exports:{}},Yl={},um={exports:{}},hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function $w(){return A0||(A0=1,(function(s){function e(j,ee){var re=j.length;j.push(ee);e:for(;0<re;){var we=re-1>>>1,xe=j[we];if(0<o(xe,ee))j[we]=ee,j[re]=xe,re=we;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var ee=j[0],re=j.pop();if(re!==ee){j[0]=re;e:for(var we=0,xe=j.length,M=xe>>>1;we<M;){var $=2*(we+1)-1,se=j[$],oe=$+1,Te=j[oe];if(0>o(se,re))oe<xe&&0>o(Te,se)?(j[we]=Te,j[oe]=re,we=oe):(j[we]=se,j[$]=re,we=$);else if(oe<xe&&0>o(Te,re))j[we]=Te,j[oe]=re,we=oe;else break e}}return ee}function o(j,ee){var re=j.sortIndex-ee.sortIndex;return re!==0?re:j.id-ee.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var p=[],_=[],T=1,w=null,x=3,U=!1,Y=!1,te=!1,W=!1,pe=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function Ae(j){for(var ee=n(_);ee!==null;){if(ee.callback===null)r(_);else if(ee.startTime<=j)r(_),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=n(_)}}function me(j){if(te=!1,Ae(j),!Y)if(n(p)!==null)Y=!0,ne||(ne=!0,k());else{var ee=n(_);ee!==null&&yt(me,ee.startTime-j)}}var ne=!1,R=-1,S=5,C=-1;function V(){return W?!0:!(s.unstable_now()-C<S)}function D(){if(W=!1,ne){var j=s.unstable_now();C=j;var ee=!0;try{e:{Y=!1,te&&(te=!1,ue(R),R=-1),U=!0;var re=x;try{t:{for(Ae(j),w=n(p);w!==null&&!(w.expirationTime>j&&V());){var we=w.callback;if(typeof we=="function"){w.callback=null,x=w.priorityLevel;var xe=we(w.expirationTime<=j);if(j=s.unstable_now(),typeof xe=="function"){w.callback=xe,Ae(j),ee=!0;break t}w===n(p)&&r(p),Ae(j)}else r(p);w=n(p)}if(w!==null)ee=!0;else{var M=n(_);M!==null&&yt(me,M.startTime-j),ee=!1}}break e}finally{w=null,x=re,U=!1}ee=void 0}}finally{ee?k():ne=!1}}}var k;if(typeof le=="function")k=function(){le(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Je=I.port2;I.port1.onmessage=D,k=function(){Je.postMessage(null)}}else k=function(){pe(D,0)};function yt(j,ee){R=pe(function(){j(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(j){j.callback=null},s.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<j?Math.floor(1e3/j):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(j){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var re=x;x=ee;try{return j()}finally{x=re}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(j,ee){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var re=x;x=j;try{return ee()}finally{x=re}},s.unstable_scheduleCallback=function(j,ee,re){var we=s.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?we+re:we):re=we,j){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=re+xe,j={id:T++,callback:ee,priorityLevel:j,startTime:re,expirationTime:xe,sortIndex:-1},re>we?(j.sortIndex=re,e(_,j),n(p)===null&&j===n(_)&&(te?(ue(R),R=-1):te=!0,yt(me,re-we))):(j.sortIndex=xe,e(p,j),Y||U||(Y=!0,ne||(ne=!0,k()))),j},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(j){var ee=x;return function(){var re=x;x=ee;try{return j.apply(this,arguments)}finally{x=re}}}})(hm)),hm}var w0;function Jw(){return w0||(w0=1,um.exports=$w()),um.exports}var fm={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function Zw(){if(S0)return rn;S0=1;var s=ng();function e(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,_,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:_,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(p,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(p,_,null,T)},rn.flushSync=function(p){var _=f.T,T=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=_,r.p=T,r.d.f()}},rn.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(p,_))},rn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},rn.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var T=_.as,w=m(T,_.crossOrigin),x=typeof _.integrity=="string"?_.integrity:void 0,U=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:x,fetchPriority:U}):T==="script"&&r.d.X(p,{crossOrigin:w,integrity:x,fetchPriority:U,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},rn.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=m(_.as,_.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(p)},rn.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,w=m(T,_.crossOrigin);r.d.L(p,T,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},rn.preloadModule=function(p,_){if(typeof p=="string")if(_){var T=m(_.as,_.crossOrigin);r.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(p)},rn.requestFormReset=function(p){r.d.r(p)},rn.unstable_batchedUpdates=function(p,_){return p(_)},rn.useFormState=function(p,_,T){return f.H.useFormState(p,_,T)},rn.useFormStatus=function(){return f.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var x0;function Ww(){if(x0)return fm.exports;x0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),fm.exports=Zw(),fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function eS(){if(C0)return Yl;C0=1;var s=Jw(),e=ng(),n=Ww();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function _(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===l)return p(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,b=h.child;b;){if(b===a){v=!0,a=h,l=d;break}if(b===l){v=!0,l=h,a=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===a){v=!0,a=d,l=h;break}if(b===l){v=!0,l=d,a=h;break}b=b.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var w=Object.assign,x=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),le=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Je(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case te:return"Fragment";case pe:return"Profiler";case W:return"StrictMode";case me:return"Suspense";case ne:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Y:return"Portal";case le:return t.displayName||"Context";case ue:return(t._context.displayName||"Context")+".Consumer";case Ae:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return i=t.displayName||null,i!==null?i:Je(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return Je(t(i))}catch{}}return null}var yt=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},we=[],xe=-1;function M(t){return{current:t}}function $(t){0>xe||(t.current=we[xe],we[xe]=null,xe--)}function se(t,i){xe++,we[xe]=t.current,t.current=i}var oe=M(null),Te=M(null),Ie=M(null),Me=M(null);function At(t,i){switch(se(Ie,i),se(Te,t),se(oe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?q_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=q_(i),t=H_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(oe),se(oe,t)}function lt(){$(oe),$(Te),$(Ie)}function gi(t){t.memoizedState!==null&&se(Me,t);var i=oe.current,a=H_(i,t.type);i!==a&&(se(Te,t),se(oe,a))}function Yi(t){Te.current===t&&($(oe),$(Te)),Me.current===t&&($(Me),ql._currentValue=re)}var Qi,Xi;function An(t){if(Qi===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Qi=i&&i[1]||"",Xi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qi+t+Xi}var Ds=!1;function pi(t,i){if(!t||Ds)return"";Ds=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var q=G}Reflect.construct(t,[],J)}else{try{J.call()}catch(G){q=G}t.call(J.prototype)}}else{try{throw Error()}catch(G){q=G}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var N=v.split(`
`),B=b.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===B.length)for(l=N.length-1,h=B.length-1;1<=l&&0<=h&&N[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==B[h]){var K=`
`+N[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=h);break}}}finally{Ds=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?An(a):""}function Os(t,i){switch(t.tag){case 26:case 27:case 5:return An(t.type);case 16:return An("Lazy");case 13:return t.child!==i&&i!==null?An("Suspense Fallback"):An("Suspense");case 19:return An("SuspenseList");case 0:case 15:return pi(t.type,!1);case 11:return pi(t.type.render,!1);case 1:return pi(t.type,!0);case 31:return An("Activity");default:return""}}function Ms(t){try{var i="",a=null;do i+=Os(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var F=Object.prototype.hasOwnProperty,de=s.unstable_scheduleCallback,ke=s.unstable_cancelCallback,We=s.unstable_shouldYield,it=s.unstable_requestPaint,Ge=s.unstable_now,Ye=s.unstable_getCurrentPriorityLevel,ft=s.unstable_ImmediatePriority,Qe=s.unstable_UserBlockingPriority,Nt=s.unstable_NormalPriority,$i=s.unstable_LowPriority,yi=s.unstable_IdlePriority,Vs=s.log,js=s.unstable_setDisableYieldValue,Zn=null,Xt=null;function Ln(t){if(typeof Vs=="function"&&js(t),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(Zn,t)}catch{}}var wt=Math.clz32?Math.clz32:Mc,Oc=Math.log,wa=Math.LN2;function Mc(t){return t>>>=0,t===0?32:31-(Oc(t)/wa|0)|0}var _i=256,Vr=262144,Dt=4194304;function vi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ei(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=vi(l):(v&=b,v!==0?h=vi(v):a||(a=b&~t,a!==0&&(h=vi(a))))):(b=l&~d,b!==0?h=vi(b):v!==0?h=vi(v):a||(a=l&~t,a!==0&&(h=vi(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Wn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function hf(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vc(){var t=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),t}function bi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function jr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ff(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,B=t.hiddenUpdates;for(a=v&~a;0<a;){var K=31-wt(a),J=1<<K;b[K]=0,N[K]=-1;var q=B[K];if(q!==null)for(B[K]=null,K=0;K<q.length;K++){var G=q[K];G!==null&&(G.lane&=-536870913)}a&=~J}l!==0&&kr(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function kr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-wt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Yo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-wt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Qo(t,i){var a=i&-i;return a=(a&42)!==0?1:Lr(a),(a&(t.suspendedLanes|i))!==0?0:a}function Lr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ji(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function jc(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:f0(t.type))}function ei(t,i){var a=ee.p;try{return ee.p=t,i()}finally{ee.p=a}}var ti=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ti,Gt="__reactProps$"+ti,Ti="__reactContainer$"+ti,Sa="__reactEvents$"+ti,df="__reactListeners$"+ti,kc="__reactHandles$"+ti,Lc="__reactResources$"+ti,Ai="__reactMarker$"+ti;function xa(t){delete t[Ot],delete t[Gt],delete t[Sa],delete t[df],delete t[kc]}function wi(t){var i=t[Ot];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ti]||a[Ot]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=$_(t);t!==null;){if(a=t[Ot])return a;t=$_(t)}return i}t=a,a=t.parentNode}return null}function Un(t){if(t=t[Ot]||t[Ti]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function wn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function Si(t){var i=t[Lc];return i||(i=t[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Mt(t){t[Ai]=!0}var Xo=new Set,$o={};function xi(t,i){Ci(t,i),Ci(t+"Capture",i)}function Ci(t,i){for($o[t]=i,t=0;t<i.length;t++)Xo.add(i[t])}var Jo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zo={},Wo={};function Uc(t){return F.call(Wo,t)?!0:F.call(Zo,t)?!1:Jo.test(t)?Wo[t]=!0:(Zo[t]=!0,!1)}function Ca(t,i,a){if(Uc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Sn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Vt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ks(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function el(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function et(t){if(!t._valueTracker){var i=ks(t)?"checked":"value";t._valueTracker=el(t,i,""+t[i])}}function Ur(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=ks(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ri(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Pr=/[\n"\\]/g;function dn(t){return t.replace(Pr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ra(t,i,a,l,h,d,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Ft(i)):t.value!==""+Ft(i)&&(t.value=""+Ft(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?tl(t,v,Ft(i)):a!=null?tl(t,v,Ft(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Ft(b):t.removeAttribute("name")}function Pc(t,i,a,l,h,d,v,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){et(t);return}a=a!=null?""+Ft(a):"",i=i!=null?""+Ft(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),et(t)}function tl(t,i,a){i==="number"&&Ri(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ls(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ft(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function zc(t,i,a){if(i!=null&&(i=""+Ft(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Ft(a):""}function Us(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(yt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ft(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),et(t)}function mn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Bc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function il(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&nl(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&nl(t,d,i[d])}function Ia(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(t){return Ps.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ni(){}var sl=null;function Pn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zs=null,Ii=null;function zr(t){var i=Un(t);if(i&&(t=i.stateNode)){var a=t[Gt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ra(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Gt]||null;if(!h)throw Error(r(90));Ra(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ur(l)}break e;case"textarea":zc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ls(t,!!a.multiple,i,!1)}}}var Da=!1;function Bs(t,i,a){if(Da)return t(i,a);Da=!0;try{var l=t(i);return l}finally{if(Da=!1,(zs!==null||Ii!==null)&&(ju(),zs&&(i=zs,t=Ii,Ii=zs=null,zr(i),t)))for(i=0;i<t.length;i++)zr(t[i])}}function ii(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Gt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(zn)try{var st={};Object.defineProperty(st,"passive",{get:function(){Br=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Br=!1}var Ni=null,rl=null,qr=null;function al(){if(qr)return qr;var t,i=rl,a=i.length,l,h="value"in Ni?Ni.value:Ni.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return qr=h.slice(t,1<l?1-l:void 0)}function Hr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Zi(){return!0}function si(){return!1}function $t(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Zi:si,this.isPropagationStopped=si,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),i}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=$t(Wi),qs=w({},Wi,{view:0,detail:0}),ol=$t(qs),Hs,Oa,Oi,Ma=w({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(Hs=t.screenX-Oi.screenX,Oa=t.screenY-Oi.screenY):Oa=Hs=0,Oi=t),Hs)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),ll=$t(Ma),Gr=w({},Ma,{dataTransfer:0}),Hc=$t(Gr),Gc=w({},qs,{relatedTarget:0}),Fr=$t(Gc),cl=w({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fc=$t(cl),Va=w({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kc=$t(Va),Yc=w({},Wi,{data:0}),Mi=$t(Yc),Qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=$c[t])?!!i[t]:!1}function Gs(){return Jc}var hn=w({},qs,{key:function(t){if(t.key){var i=Qc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Hr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(t){return t.type==="keypress"?Hr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zc=$t(hn),Wc=w({},Ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),es=$t(Wc),u=w({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),g=$t(u),E=w({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=$t(E),P=w({},Ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=$t(P),ie=w({},Wi,{newState:0,oldState:0}),Ne=$t(ie),St=[9,13,27,32],Xe=zn&&"CompositionEvent"in window,_t=null;zn&&"documentMode"in document&&(_t=document.documentMode);var Bn=zn&&"TextEvent"in window&&!_t,Vi=zn&&(!Xe||_t&&8<_t&&11>=_t),ri=" ",ai=!1;function Kr(t,i){switch(t){case"keyup":return St.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ja(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function pA(t,i){switch(t){case"compositionend":return ja(i);case"keypress":return i.which!==32?null:(ai=!0,ri);case"textInput":return t=i.data,t===ri&&ai?null:t;default:return null}}function yA(t,i){if(ka)return t==="compositionend"||!Xe&&Kr(t,i)?(t=al(),qr=rl=Ni=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Vi&&i.locale!=="ko"?null:i.data;default:return null}}var _A={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!_A[t.type]:i==="textarea"}function ep(t,i,a,l){zs?Ii?Ii.push(l):Ii=[l]:zs=l,i=qu(i,"onChange"),0<i.length&&(a=new Di("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var ul=null,hl=null;function vA(t){k_(t,0)}function eu(t){var i=wn(t);if(Ur(i))return t}function tp(t,i){if(t==="change")return i}var np=!1;if(zn){var mf;if(zn){var gf="oninput"in document;if(!gf){var ip=document.createElement("div");ip.setAttribute("oninput","return;"),gf=typeof ip.oninput=="function"}mf=gf}else mf=!1;np=mf&&(!document.documentMode||9<document.documentMode)}function sp(){ul&&(ul.detachEvent("onpropertychange",rp),hl=ul=null)}function rp(t){if(t.propertyName==="value"&&eu(hl)){var i=[];ep(i,hl,t,Pn(t)),Bs(vA,i)}}function EA(t,i,a){t==="focusin"?(sp(),ul=i,hl=a,ul.attachEvent("onpropertychange",rp)):t==="focusout"&&sp()}function bA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(hl)}function TA(t,i){if(t==="click")return eu(i)}function AA(t,i){if(t==="input"||t==="change")return eu(i)}function wA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var xn=typeof Object.is=="function"?Object.is:wA;function fl(t,i){if(xn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!F.call(i,h)||!xn(t[h],i[h]))return!1}return!0}function ap(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function op(t,i){var a=ap(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ap(a)}}function lp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?lp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function cp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ri(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ri(t.document)}return i}function pf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var SA=zn&&"documentMode"in document&&11>=document.documentMode,La=null,yf=null,dl=null,_f=!1;function up(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_f||La==null||La!==Ri(l)||(l=La,"selectionStart"in l&&pf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dl&&fl(dl,l)||(dl=l,l=qu(yf,"onSelect"),0<l.length&&(i=new Di("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=La)))}function Yr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ua={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},vf={},hp={};zn&&(hp=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Qr(t){if(vf[t])return vf[t];if(!Ua[t])return t;var i=Ua[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in hp)return vf[t]=i[a];return t}var fp=Qr("animationend"),dp=Qr("animationiteration"),mp=Qr("animationstart"),xA=Qr("transitionrun"),CA=Qr("transitionstart"),RA=Qr("transitioncancel"),gp=Qr("transitionend"),pp=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function oi(t,i){pp.set(t,i),xi(i,[t])}var tu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},qn=[],Pa=0,bf=0;function nu(){for(var t=Pa,i=bf=Pa=0;i<t;){var a=qn[i];qn[i++]=null;var l=qn[i];qn[i++]=null;var h=qn[i];qn[i++]=null;var d=qn[i];if(qn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&yp(a,h,d)}}function iu(t,i,a,l){qn[Pa++]=t,qn[Pa++]=i,qn[Pa++]=a,qn[Pa++]=l,bf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Tf(t,i,a,l){return iu(t,i,a,l),su(t)}function Xr(t,i){return iu(t,null,null,i),su(t)}function yp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-wt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function su(t){if(50<jl)throw jl=0,Dd=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var za={};function IA(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,i,a,l){return new IA(t,i,a,l)}function Af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ts(t,i){var a=t.alternate;return a===null?(a=Cn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function _p(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function ru(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Af(t)&&(v=1);else if(typeof t=="string")v=Vw(t,a,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Cn(31,a,i,h),t.elementType=C,t.lanes=d,t;case te:return $r(a.children,h,d,i);case W:v=8,h|=24;break;case pe:return t=Cn(12,a,i,h|2),t.elementType=pe,t.lanes=d,t;case me:return t=Cn(13,a,i,h),t.elementType=me,t.lanes=d,t;case ne:return t=Cn(19,a,i,h),t.elementType=ne,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:v=10;break e;case ue:v=9;break e;case Ae:v=11;break e;case R:v=14;break e;case S:v=16,l=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=Cn(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function $r(t,i,a,l){return t=Cn(7,t,l,i),t.lanes=a,t}function wf(t,i,a){return t=Cn(6,t,null,i),t.lanes=a,t}function vp(t){var i=Cn(18,null,null,0);return i.stateNode=t,i}function Sf(t,i,a){return i=Cn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ep=new WeakMap;function Hn(t,i){if(typeof t=="object"&&t!==null){var a=Ep.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Ms(i)},Ep.set(t,i),i)}return{value:t,source:i,stack:Ms(i)}}var Ba=[],qa=0,au=null,ml=0,Gn=[],Fn=0,Fs=null,ji=1,ki="";function ns(t,i){Ba[qa++]=ml,Ba[qa++]=au,au=t,ml=i}function bp(t,i,a){Gn[Fn++]=ji,Gn[Fn++]=ki,Gn[Fn++]=Fs,Fs=t;var l=ji;t=ki;var h=32-wt(l)-1;l&=~(1<<h),a+=1;var d=32-wt(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,ji=1<<32-wt(i)+h|a<<h|l,ki=d+t}else ji=1<<d|a<<h|l,ki=t}function xf(t){t.return!==null&&(ns(t,1),bp(t,1,0))}function Cf(t){for(;t===au;)au=Ba[--qa],Ba[qa]=null,ml=Ba[--qa],Ba[qa]=null;for(;t===Fs;)Fs=Gn[--Fn],Gn[Fn]=null,ki=Gn[--Fn],Gn[Fn]=null,ji=Gn[--Fn],Gn[Fn]=null}function Tp(t,i){Gn[Fn++]=ji,Gn[Fn++]=ki,Gn[Fn++]=Fs,ji=i.id,ki=i.overflow,Fs=t}var Jt=null,dt=null,qe=!1,Ks=null,Kn=!1,Rf=Error(r(519));function Ys(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gl(Hn(i,t)),Rf}function Ap(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Ot]=t,i[Gt]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<Ll.length;a++)je(Ll[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),Pc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),Us(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||z_(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=ni),i=!0):i=!1,i||Ys(t,!0)}function wp(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Jt=Jt.return}}function Ha(t){if(t!==Jt)return!1;if(!qe)return wp(t),qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Kd(t.type,t.memoizedProps)),a=!a),a&&dt&&Ys(t),wp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=X_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=X_(t)}else i===27?(i=dt,or(t.type)?(t=Jd,Jd=null,dt=t):dt=i):dt=Jt?Qn(t.stateNode.nextSibling):null;return!0}function Jr(){dt=Jt=null,qe=!1}function If(){var t=Ks;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),Ks=null),t}function gl(t){Ks===null?Ks=[t]:Ks.push(t)}var Nf=M(null),Zr=null,is=null;function Qs(t,i,a){se(Nf,i._currentValue),i._currentValue=a}function ss(t){t._currentValue=Nf.current,$(Nf)}function Df(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Of(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Df(d.return,a,t),l||(v=null);break e}d=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Df(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ga(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var b=h.type;xn(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===Me.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ql):t=[ql])}h=h.return}t!==null&&Of(i,t,a,l),i.flags|=262144}function ou(t){for(t=t.firstContext;t!==null;){if(!xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Wr(t){Zr=t,is=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return Sp(Zr,t)}function lu(t,i){return Zr===null&&Wr(t),Sp(t,i)}function Sp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},is===null){if(t===null)throw Error(r(308));is=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else is=is.next=i;return a}var NA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},DA=s.unstable_scheduleCallback,OA=s.unstable_NormalPriority,jt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new NA,data:new Map,refCount:0}}function pl(t){t.refCount--,t.refCount===0&&DA(OA,function(){t.controller.abort()})}var yl=null,Vf=0,Fa=0,Ka=null;function MA(t,i){if(yl===null){var a=yl=[];Vf=0,Fa=Ld(),Ka={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Vf++,i.then(xp,xp),i}function xp(){if(--Vf===0&&yl!==null){Ka!==null&&(Ka.status="fulfilled");var t=yl;yl=null,Fa=0,Ka=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function VA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Cp=j.S;j.S=function(t,i){u_=Ge(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&MA(t,i),Cp!==null&&Cp(t,i)};var ea=M(null);function jf(){var t=ea.current;return t!==null?t:ct.pooledCache}function cu(t,i){i===null?se(ea,ea.current):se(ea,i.pool)}function Rp(){var t=jf();return t===null?null:{parent:jt._currentValue,pool:t}}var Ya=Error(r(460)),kf=Error(r(474)),uu=Error(r(542)),hu={then:function(){}};function Ip(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Np(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ni,ni),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Op(t),t;default:if(typeof i.status=="string")i.then(ni,ni);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Op(t),t}throw na=i,Ya}}function ta(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(na=a,Ya):a}}var na=null;function Dp(){if(na===null)throw Error(r(459));var t=na;return na=null,t}function Op(t){if(t===Ya||t===uu)throw Error(r(483))}var Qa=null,_l=0;function fu(t){var i=_l;return _l+=1,Qa===null&&(Qa=[]),Np(Qa,t,i)}function vl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function du(t,i){throw i.$$typeof===x?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Mp(t){function i(L,O){if(t){var z=L.deletions;z===null?(L.deletions=[O],L.flags|=16):z.push(O)}}function a(L,O){if(!t)return null;for(;O!==null;)i(L,O),O=O.sibling;return null}function l(L){for(var O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function h(L,O){return L=ts(L,O),L.index=0,L.sibling=null,L}function d(L,O,z){return L.index=z,t?(z=L.alternate,z!==null?(z=z.index,z<O?(L.flags|=67108866,O):z):(L.flags|=67108866,O)):(L.flags|=1048576,O)}function v(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function b(L,O,z,Q){return O===null||O.tag!==6?(O=wf(z,L.mode,Q),O.return=L,O):(O=h(O,z),O.return=L,O)}function N(L,O,z,Q){var ye=z.type;return ye===te?K(L,O,z.props.children,Q,z.key):O!==null&&(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&ta(ye)===O.type)?(O=h(O,z.props),vl(O,z),O.return=L,O):(O=ru(z.type,z.key,z.props,null,L.mode,Q),vl(O,z),O.return=L,O)}function B(L,O,z,Q){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=Sf(z,L.mode,Q),O.return=L,O):(O=h(O,z.children||[]),O.return=L,O)}function K(L,O,z,Q,ye){return O===null||O.tag!==7?(O=$r(z,L.mode,Q,ye),O.return=L,O):(O=h(O,z),O.return=L,O)}function J(L,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=wf(""+O,L.mode,z),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case U:return z=ru(O.type,O.key,O.props,null,L.mode,z),vl(z,O),z.return=L,z;case Y:return O=Sf(O,L.mode,z),O.return=L,O;case S:return O=ta(O),J(L,O,z)}if(yt(O)||k(O))return O=$r(O,L.mode,z,null),O.return=L,O;if(typeof O.then=="function")return J(L,fu(O),z);if(O.$$typeof===le)return J(L,lu(L,O),z);du(L,O)}return null}function q(L,O,z,Q){var ye=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ye!==null?null:b(L,O,""+z,Q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case U:return z.key===ye?N(L,O,z,Q):null;case Y:return z.key===ye?B(L,O,z,Q):null;case S:return z=ta(z),q(L,O,z,Q)}if(yt(z)||k(z))return ye!==null?null:K(L,O,z,Q,null);if(typeof z.then=="function")return q(L,O,fu(z),Q);if(z.$$typeof===le)return q(L,O,lu(L,z),Q);du(L,z)}return null}function G(L,O,z,Q,ye){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return L=L.get(z)||null,b(O,L,""+Q,ye);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case U:return L=L.get(Q.key===null?z:Q.key)||null,N(O,L,Q,ye);case Y:return L=L.get(Q.key===null?z:Q.key)||null,B(O,L,Q,ye);case S:return Q=ta(Q),G(L,O,z,Q,ye)}if(yt(Q)||k(Q))return L=L.get(z)||null,K(O,L,Q,ye,null);if(typeof Q.then=="function")return G(L,O,z,fu(Q),ye);if(Q.$$typeof===le)return G(L,O,z,lu(O,Q),ye);du(O,Q)}return null}function he(L,O,z,Q){for(var ye=null,Fe=null,ge=O,Oe=O=0,Ue=null;ge!==null&&Oe<z.length;Oe++){ge.index>Oe?(Ue=ge,ge=null):Ue=ge.sibling;var Ke=q(L,ge,z[Oe],Q);if(Ke===null){ge===null&&(ge=Ue);break}t&&ge&&Ke.alternate===null&&i(L,ge),O=d(Ke,O,Oe),Fe===null?ye=Ke:Fe.sibling=Ke,Fe=Ke,ge=Ue}if(Oe===z.length)return a(L,ge),qe&&ns(L,Oe),ye;if(ge===null){for(;Oe<z.length;Oe++)ge=J(L,z[Oe],Q),ge!==null&&(O=d(ge,O,Oe),Fe===null?ye=ge:Fe.sibling=ge,Fe=ge);return qe&&ns(L,Oe),ye}for(ge=l(ge);Oe<z.length;Oe++)Ue=G(ge,L,Oe,z[Oe],Q),Ue!==null&&(t&&Ue.alternate!==null&&ge.delete(Ue.key===null?Oe:Ue.key),O=d(Ue,O,Oe),Fe===null?ye=Ue:Fe.sibling=Ue,Fe=Ue);return t&&ge.forEach(function(fr){return i(L,fr)}),qe&&ns(L,Oe),ye}function ve(L,O,z,Q){if(z==null)throw Error(r(151));for(var ye=null,Fe=null,ge=O,Oe=O=0,Ue=null,Ke=z.next();ge!==null&&!Ke.done;Oe++,Ke=z.next()){ge.index>Oe?(Ue=ge,ge=null):Ue=ge.sibling;var fr=q(L,ge,Ke.value,Q);if(fr===null){ge===null&&(ge=Ue);break}t&&ge&&fr.alternate===null&&i(L,ge),O=d(fr,O,Oe),Fe===null?ye=fr:Fe.sibling=fr,Fe=fr,ge=Ue}if(Ke.done)return a(L,ge),qe&&ns(L,Oe),ye;if(ge===null){for(;!Ke.done;Oe++,Ke=z.next())Ke=J(L,Ke.value,Q),Ke!==null&&(O=d(Ke,O,Oe),Fe===null?ye=Ke:Fe.sibling=Ke,Fe=Ke);return qe&&ns(L,Oe),ye}for(ge=l(ge);!Ke.done;Oe++,Ke=z.next())Ke=G(ge,L,Oe,Ke.value,Q),Ke!==null&&(t&&Ke.alternate!==null&&ge.delete(Ke.key===null?Oe:Ke.key),O=d(Ke,O,Oe),Fe===null?ye=Ke:Fe.sibling=Ke,Fe=Ke);return t&&ge.forEach(function(Fw){return i(L,Fw)}),qe&&ns(L,Oe),ye}function ot(L,O,z,Q){if(typeof z=="object"&&z!==null&&z.type===te&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case U:e:{for(var ye=z.key;O!==null;){if(O.key===ye){if(ye=z.type,ye===te){if(O.tag===7){a(L,O.sibling),Q=h(O,z.props.children),Q.return=L,L=Q;break e}}else if(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&ta(ye)===O.type){a(L,O.sibling),Q=h(O,z.props),vl(Q,z),Q.return=L,L=Q;break e}a(L,O);break}else i(L,O);O=O.sibling}z.type===te?(Q=$r(z.props.children,L.mode,Q,z.key),Q.return=L,L=Q):(Q=ru(z.type,z.key,z.props,null,L.mode,Q),vl(Q,z),Q.return=L,L=Q)}return v(L);case Y:e:{for(ye=z.key;O!==null;){if(O.key===ye)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(L,O.sibling),Q=h(O,z.children||[]),Q.return=L,L=Q;break e}else{a(L,O);break}else i(L,O);O=O.sibling}Q=Sf(z,L.mode,Q),Q.return=L,L=Q}return v(L);case S:return z=ta(z),ot(L,O,z,Q)}if(yt(z))return he(L,O,z,Q);if(k(z)){if(ye=k(z),typeof ye!="function")throw Error(r(150));return z=ye.call(z),ve(L,O,z,Q)}if(typeof z.then=="function")return ot(L,O,fu(z),Q);if(z.$$typeof===le)return ot(L,O,lu(L,z),Q);du(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(a(L,O.sibling),Q=h(O,z),Q.return=L,L=Q):(a(L,O),Q=wf(z,L.mode,Q),Q.return=L,L=Q),v(L)):a(L,O)}return function(L,O,z,Q){try{_l=0;var ye=ot(L,O,z,Q);return Qa=null,ye}catch(ge){if(ge===Ya||ge===uu)throw ge;var Fe=Cn(29,ge,null,L.mode);return Fe.lanes=Q,Fe.return=L,Fe}finally{}}}var ia=Mp(!0),Vp=Mp(!1),Xs=!1;function Lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $s(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Js(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=su(t),yp(t,null,a),i}return iu(t,l,i,a),su(t)}function El(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Yo(t,a)}}function Pf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var zf=!1;function bl(){if(zf){var t=Ka;if(t!==null)throw t}}function Tl(t,i,a,l){zf=!1;var h=t.updateQueue;Xs=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,B=N.next;N.next=null,v===null?d=B:v.next=B,v=N;var K=t.alternate;K!==null&&(K=K.updateQueue,b=K.lastBaseUpdate,b!==v&&(b===null?K.firstBaseUpdate=B:b.next=B,K.lastBaseUpdate=N))}if(d!==null){var J=h.baseState;v=0,K=B=N=null,b=d;do{var q=b.lane&-536870913,G=q!==b.lane;if(G?(Le&q)===q:(l&q)===q){q!==0&&q===Fa&&(zf=!0),K!==null&&(K=K.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=t,ve=b;q=i;var ot=a;switch(ve.tag){case 1:if(he=ve.payload,typeof he=="function"){J=he.call(ot,J,q);break e}J=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ve.payload,q=typeof he=="function"?he.call(ot,J,q):he,q==null)break e;J=w({},J,q);break e;case 2:Xs=!0}}q=b.callback,q!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[q]:G.push(q))}else G={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},K===null?(B=K=G,N=J):K=K.next=G,v|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;G=b,b=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);K===null&&(N=J),h.baseState=N,h.firstBaseUpdate=B,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),nr|=v,t.lanes=v,t.memoizedState=J}}function jp(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function kp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)jp(a[t],i)}var Xa=M(null),mu=M(0);function Lp(t,i){t=ds,se(mu,t),se(Xa,i),ds=t|i.baseLanes}function Bf(){se(mu,ds),se(Xa,Xa.current)}function qf(){ds=mu.current,$(Xa),$(mu)}var Rn=M(null),Yn=null;function Zs(t){var i=t.alternate;se(xt,xt.current&1),se(Rn,t),Yn===null&&(i===null||Xa.current!==null||i.memoizedState!==null)&&(Yn=t)}function Hf(t){se(xt,xt.current),se(Rn,t),Yn===null&&(Yn=t)}function Up(t){t.tag===22?(se(xt,xt.current),se(Rn,t),Yn===null&&(Yn=t)):Ws()}function Ws(){se(xt,xt.current),se(Rn,Rn.current)}function In(t){$(Rn),Yn===t&&(Yn=null),$(xt)}var xt=M(0);function gu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Xd(a)||$d(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var rs=0,De=null,rt=null,kt=null,pu=!1,$a=!1,sa=!1,yu=0,Al=0,Ja=null,jA=0;function bt(){throw Error(r(321))}function Gf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!xn(t[a],i[a]))return!1;return!0}function Ff(t,i,a,l,h,d){return rs=d,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,j.H=t===null||t.memoizedState===null?by:ad,sa=!1,d=a(l,h),sa=!1,$a&&(d=zp(i,a,l,h)),Pp(t),d}function Pp(t){j.H=xl;var i=rt!==null&&rt.next!==null;if(rs=0,kt=rt=De=null,pu=!1,Al=0,Ja=null,i)throw Error(r(300));t===null||Lt||(t=t.dependencies,t!==null&&ou(t)&&(Lt=!0))}function zp(t,i,a,l){De=t;var h=0;do{if($a&&(Ja=null),Al=0,$a=!1,25<=h)throw Error(r(301));if(h+=1,kt=rt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}j.H=Ty,d=i(a,l)}while($a);return d}function kA(){var t=j.H,i=t.useState()[0];return i=typeof i.then=="function"?wl(i):i,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(De.flags|=1024),i}function Kf(){var t=yu!==0;return yu=0,t}function Yf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Qf(t){if(pu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}pu=!1}rs=0,kt=rt=De=null,$a=!1,Al=yu=0,Ja=null}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?De.memoizedState=kt=t:kt=kt.next=t,kt}function Ct(){if(rt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=kt===null?De.memoizedState:kt.next;if(i!==null)kt=i,rt=t;else{if(t===null)throw De.alternate===null?Error(r(467)):Error(r(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},kt===null?De.memoizedState=kt=t:kt=kt.next=t}return kt}function _u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var i=Al;return Al+=1,Ja===null&&(Ja=[]),t=Np(Ja,t,i),i=De,(kt===null?i.memoizedState:kt.next)===null&&(i=i.alternate,j.H=i===null||i.memoizedState===null?by:ad),t}function vu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===le)return Zt(t)}throw Error(r(438,String(t)))}function Xf(t){var i=null,a=De.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=_u(),De.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=V;return i.index++,a}function as(t,i){return typeof i=="function"?i(t):i}function Eu(t){var i=Ct();return $f(i,rt,t)}function $f(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=v=null,N=null,B=i,K=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(Le&J)===J:(rs&J)===J){var q=B.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===Fa&&(K=!0);else if((rs&q)===q){B=B.next,q===Fa&&(K=!0);continue}else J={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=J,v=d):N=N.next=J,De.lanes|=q,nr|=q;J=B.action,sa&&a(d,J),d=B.hasEagerState?B.eagerState:a(d,J)}else q={lane:J,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=q,v=d):N=N.next=q,De.lanes|=J,nr|=J;B=B.next}while(B!==null&&B!==i);if(N===null?v=d:N.next=b,!xn(d,t.memoizedState)&&(Lt=!0,K&&(a=Ka,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Jf(t){var i=Ct(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);xn(d,i.memoizedState)||(Lt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Bp(t,i,a){var l=De,h=Ct(),d=qe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!xn((rt||h).memoizedState,a);if(v&&(h.memoizedState=a,Lt=!0),h=h.queue,ed(Gp.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,Za(9,{destroy:void 0},Hp.bind(null,l,h,a,i),null),ct===null)throw Error(r(349));d||(rs&127)!==0||qp(l,i,a)}return a}function qp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=De.updateQueue,i===null?(i=_u(),De.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Hp(t,i,a,l){i.value=a,i.getSnapshot=l,Fp(i)&&Kp(t)}function Gp(t,i,a){return a(function(){Fp(i)&&Kp(t)})}function Fp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!xn(t,a)}catch{return!0}}function Kp(t){var i=Xr(t,2);i!==null&&vn(i,t,2)}function Zf(t){var i=fn();if(typeof t=="function"){var a=t;if(t=a(),sa){Ln(!0);try{a()}finally{Ln(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:t},i}function Yp(t,i,a,l){return t.baseState=a,$f(t,rt,typeof l=="function"?l:as)}function LA(t,i,a,l,h){if(Au(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};j.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Qp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Qp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=j.T,v={};j.T=v;try{var b=a(h,l),N=j.S;N!==null&&N(v,b),Xp(t,i,b)}catch(B){Wf(t,i,B)}finally{d!==null&&v.types!==null&&(d.types=v.types),j.T=d}}else try{d=a(h,l),Xp(t,i,d)}catch(B){Wf(t,i,B)}}function Xp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){$p(t,i,l)},function(l){return Wf(t,i,l)}):$p(t,i,a)}function $p(t,i,a){i.status="fulfilled",i.value=a,Jp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Qp(t,a)))}function Wf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Jp(i),i=i.next;while(i!==l)}t.action=null}function Jp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Zp(t,i){return i}function Wp(t,i){if(qe){var a=ct.formState;if(a!==null){e:{var l=De;if(qe){if(dt){t:{for(var h=dt,d=Kn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Qn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){dt=Qn(h.nextSibling),l=h.data==="F!";break e}}Ys(l)}l=!1}l&&(i=a[0])}}return a=fn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zp,lastRenderedState:i},a.queue=l,a=_y.bind(null,De,l),l.dispatch=a,l=Zf(!1),d=rd.bind(null,De,!1,l.queue),l=fn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=LA.bind(null,De,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function ey(t){var i=Ct();return ty(i,rt,t)}function ty(t,i,a){if(i=$f(t,i,Zp)[0],t=Eu(as)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=wl(i)}catch(v){throw v===Ya?uu:v}else l=i;i=Ct();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(De.flags|=2048,Za(9,{destroy:void 0},UA.bind(null,h,a),null)),[l,d,t]}function UA(t,i){t.action=i}function ny(t){var i=Ct(),a=rt;if(a!==null)return ty(i,a,t);Ct(),i=i.memoizedState,a=Ct();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Za(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=De.updateQueue,i===null&&(i=_u(),De.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function iy(){return Ct().memoizedState}function bu(t,i,a,l){var h=fn();De.flags|=t,h.memoizedState=Za(1|i,{destroy:void 0},a,l===void 0?null:l)}function Tu(t,i,a,l){var h=Ct();l=l===void 0?null:l;var d=h.memoizedState.inst;rt!==null&&l!==null&&Gf(l,rt.memoizedState.deps)?h.memoizedState=Za(i,d,a,l):(De.flags|=t,h.memoizedState=Za(1|i,d,a,l))}function sy(t,i){bu(8390656,8,t,i)}function ed(t,i){Tu(2048,8,t,i)}function PA(t){De.flags|=4;var i=De.updateQueue;if(i===null)i=_u(),De.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function ry(t){var i=Ct().memoizedState;return PA({ref:i,nextImpl:t}),function(){if(($e&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function ay(t,i){return Tu(4,2,t,i)}function oy(t,i){return Tu(4,4,t,i)}function ly(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function cy(t,i,a){a=a!=null?a.concat([t]):null,Tu(4,4,ly.bind(null,i,t),a)}function td(){}function uy(t,i){var a=Ct();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Gf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function hy(t,i){var a=Ct();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Gf(i,l[1]))return l[0];if(l=t(),sa){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,i],l}function nd(t,i,a){return a===void 0||(rs&1073741824)!==0&&(Le&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=f_(),De.lanes|=t,nr|=t,a)}function fy(t,i,a,l){return xn(a,i)?a:Xa.current!==null?(t=nd(t,a,l),xn(t,i)||(Lt=!0),t):(rs&42)===0||(rs&1073741824)!==0&&(Le&261930)===0?(Lt=!0,t.memoizedState=a):(t=f_(),De.lanes|=t,nr|=t,i)}function dy(t,i,a,l,h){var d=ee.p;ee.p=d!==0&&8>d?d:8;var v=j.T,b={};j.T=b,rd(t,!1,i,a);try{var N=h(),B=j.S;if(B!==null&&B(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var K=VA(N,l);Sl(t,i,K,On(t))}else Sl(t,i,l,On(t))}catch(J){Sl(t,i,{then:function(){},status:"rejected",reason:J},On())}finally{ee.p=d,v!==null&&b.types!==null&&(v.types=b.types),j.T=v}}function zA(){}function id(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=my(t).queue;dy(t,h,i,re,a===null?zA:function(){return gy(t),a(l)})}function my(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:re},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function gy(t){var i=my(t);i.next===null&&(i=t.alternate.memoizedState),Sl(t,i.next.queue,{},On())}function sd(){return Zt(ql)}function py(){return Ct().memoizedState}function yy(){return Ct().memoizedState}function BA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=On();t=$s(a);var l=Js(i,t,a);l!==null&&(vn(l,i,a),El(l,i,a)),i={cache:Mf()},t.payload=i;return}i=i.return}}function qA(t,i,a){var l=On();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Au(t)?vy(i,a):(a=Tf(t,i,a,l),a!==null&&(vn(a,t,l),Ey(a,i,l)))}function _y(t,i,a){var l=On();Sl(t,i,a,l)}function Sl(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Au(t))vy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,b=d(v,a);if(h.hasEagerState=!0,h.eagerState=b,xn(b,v))return iu(t,i,h,0),ct===null&&nu(),!1}catch{}finally{}if(a=Tf(t,i,h,l),a!==null)return vn(a,t,l),Ey(a,i,l),!0}return!1}function rd(t,i,a,l){if(l={lane:2,revertLane:Ld(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Au(t)){if(i)throw Error(r(479))}else i=Tf(t,a,l,2),i!==null&&vn(i,t,2)}function Au(t){var i=t.alternate;return t===De||i!==null&&i===De}function vy(t,i){$a=pu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Ey(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Yo(t,a)}}var xl={readContext:Zt,use:vu,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};xl.useEffectEvent=bt;var by={readContext:Zt,use:vu,useCallback:function(t,i){return fn().memoizedState=[t,i===void 0?null:i],t},useContext:Zt,useEffect:sy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,bu(4194308,4,ly.bind(null,i,t),a)},useLayoutEffect:function(t,i){return bu(4194308,4,t,i)},useInsertionEffect:function(t,i){bu(4,2,t,i)},useMemo:function(t,i){var a=fn();i=i===void 0?null:i;var l=t();if(sa){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=fn();if(a!==void 0){var h=a(i);if(sa){Ln(!0);try{a(i)}finally{Ln(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=qA.bind(null,De,t),[l.memoizedState,t]},useRef:function(t){var i=fn();return t={current:t},i.memoizedState=t},useState:function(t){t=Zf(t);var i=t.queue,a=_y.bind(null,De,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:td,useDeferredValue:function(t,i){var a=fn();return nd(a,t,i)},useTransition:function(){var t=Zf(!1);return t=dy.bind(null,De,t.queue,!0,!1),fn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=De,h=fn();if(qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ct===null)throw Error(r(349));(Le&127)!==0||qp(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,sy(Gp.bind(null,l,d,t),[t]),l.flags|=2048,Za(9,{destroy:void 0},Hp.bind(null,l,d,a,i),null),a},useId:function(){var t=fn(),i=ct.identifierPrefix;if(qe){var a=ki,l=ji;a=(l&~(1<<32-wt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=yu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=jA++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:sd,useFormState:Wp,useActionState:Wp,useOptimistic:function(t){var i=fn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=rd.bind(null,De,!0,a),a.dispatch=i,[t,i]},useMemoCache:Xf,useCacheRefresh:function(){return fn().memoizedState=BA.bind(null,De)},useEffectEvent:function(t){var i=fn(),a={impl:t};return i.memoizedState=a,function(){if(($e&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},ad={readContext:Zt,use:vu,useCallback:uy,useContext:Zt,useEffect:ed,useImperativeHandle:cy,useInsertionEffect:ay,useLayoutEffect:oy,useMemo:hy,useReducer:Eu,useRef:iy,useState:function(){return Eu(as)},useDebugValue:td,useDeferredValue:function(t,i){var a=Ct();return fy(a,rt.memoizedState,t,i)},useTransition:function(){var t=Eu(as)[0],i=Ct().memoizedState;return[typeof t=="boolean"?t:wl(t),i]},useSyncExternalStore:Bp,useId:py,useHostTransitionStatus:sd,useFormState:ey,useActionState:ey,useOptimistic:function(t,i){var a=Ct();return Yp(a,rt,t,i)},useMemoCache:Xf,useCacheRefresh:yy};ad.useEffectEvent=ry;var Ty={readContext:Zt,use:vu,useCallback:uy,useContext:Zt,useEffect:ed,useImperativeHandle:cy,useInsertionEffect:ay,useLayoutEffect:oy,useMemo:hy,useReducer:Jf,useRef:iy,useState:function(){return Jf(as)},useDebugValue:td,useDeferredValue:function(t,i){var a=Ct();return rt===null?nd(a,t,i):fy(a,rt.memoizedState,t,i)},useTransition:function(){var t=Jf(as)[0],i=Ct().memoizedState;return[typeof t=="boolean"?t:wl(t),i]},useSyncExternalStore:Bp,useId:py,useHostTransitionStatus:sd,useFormState:ny,useActionState:ny,useOptimistic:function(t,i){var a=Ct();return rt!==null?Yp(a,rt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Xf,useCacheRefresh:yy};Ty.useEffectEvent=ry;function od(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:w({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ld={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=On(),h=$s(l);h.payload=i,a!=null&&(h.callback=a),i=Js(t,h,l),i!==null&&(vn(i,t,l),El(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=On(),h=$s(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Js(t,h,l),i!==null&&(vn(i,t,l),El(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=On(),l=$s(a);l.tag=2,i!=null&&(l.callback=i),i=Js(t,l,a),i!==null&&(vn(i,t,a),El(i,t,a))}};function Ay(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!fl(a,l)||!fl(h,d):!0}function wy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&ld.enqueueReplaceState(i,i.state,null)}function ra(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=w({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Sy(t){tu(t)}function xy(t){console.error(t)}function Cy(t){tu(t)}function wu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Ry(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function cd(t,i,a){return a=$s(a),a.tag=3,a.payload={element:null},a.callback=function(){wu(t,i)},a}function Iy(t){return t=$s(t),t.tag=3,t}function Ny(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Ry(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Ry(i,a,l),typeof h!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function HA(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ga(i,a,h,!0),a=Rn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?ku():a.alternate===null&&Tt===0&&(Tt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===hu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Vd(t,l,h)),!1;case 22:return a.flags|=65536,l===hu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Vd(t,l,h)),!1}throw Error(r(435,a.tag))}return Vd(t,l,h),ku(),!1}if(qe)return i=Rn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Rf&&(t=Error(r(422),{cause:l}),gl(Hn(t,a)))):(l!==Rf&&(i=Error(r(423),{cause:l}),gl(Hn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Hn(l,a),h=cd(t.stateNode,l,h),Pf(t,h),Tt!==4&&(Tt=2)),!1;var d=Error(r(520),{cause:l});if(d=Hn(d,a),Vl===null?Vl=[d]:Vl.push(d),Tt!==4&&(Tt=2),i===null)return!0;l=Hn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=cd(a.stateNode,l,t),Pf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ir===null||!ir.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Iy(h),Ny(h,t,a,l),Pf(a,h),!1}a=a.return}while(a!==null);return!1}var ud=Error(r(461)),Lt=!1;function Wt(t,i,a,l){i.child=t===null?Vp(i,null,a,l):ia(i,t.child,a,l)}function Dy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var b in l)b!=="ref"&&(v[b]=l[b])}else v=l;return Wr(i),l=Ff(t,i,a,v,d,h),b=Kf(),t!==null&&!Lt?(Yf(t,i,h),os(t,i,h)):(qe&&b&&xf(i),i.flags|=1,Wt(t,i,l,h),i.child)}function Oy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Af(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,My(t,i,d,l,h)):(t=ru(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!_d(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(v,l)&&t.ref===i.ref)return os(t,i,h)}return i.flags|=1,t=ts(d,l),t.ref=i.ref,t.return=i,i.child=t}function My(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(fl(d,l)&&t.ref===i.ref)if(Lt=!1,i.pendingProps=l=d,_d(t,h))(t.flags&131072)!==0&&(Lt=!0);else return i.lanes=t.lanes,os(t,i,h)}return hd(t,i,a,l,h)}function Vy(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return jy(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&cu(i,d!==null?d.cachePool:null),d!==null?Lp(i,d):Bf(),Up(i);else return l=i.lanes=536870912,jy(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(cu(i,d.cachePool),Lp(i,d),Ws(),i.memoizedState=null):(t!==null&&cu(i,null),Bf(),Ws());return Wt(t,i,h,a),i.child}function Cl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function jy(t,i,a,l,h){var d=jf();return d=d===null?null:{parent:jt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&cu(i,null),Bf(),Up(i),t!==null&&Ga(t,i,l,!0),i.childLanes=h,null}function Su(t,i){return i=Cu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function ky(t,i,a){return ia(i,t.child,null,a),t=Su(i,i.pendingProps),t.flags|=2,In(i),i.memoizedState=null,t}function GA(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(qe){if(l.mode==="hidden")return t=Su(i,l),i.lanes=536870912,Cl(null,t);if(Hf(i),(t=dt)?(t=Q_(t,Kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Fs!==null?{id:ji,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=vp(t),a.return=i,i.child=a,Jt=i,dt=null)):t=null,t===null)throw Ys(i);return i.lanes=536870912,null}return Su(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(Hf(i),h)if(i.flags&256)i.flags&=-257,i=ky(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Lt||Ga(t,i,a,!1),h=(a&t.childLanes)!==0,Lt||h){if(l=ct,l!==null&&(v=Qo(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Xr(t,v),vn(l,t,v),ud;ku(),i=ky(t,i,a)}else t=d.treeContext,dt=Qn(v.nextSibling),Jt=i,qe=!0,Ks=null,Kn=!1,t!==null&&Tp(i,t),i=Su(i,l),i.flags|=4096;return i}return t=ts(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function xu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function hd(t,i,a,l,h){return Wr(i),a=Ff(t,i,a,l,void 0,h),l=Kf(),t!==null&&!Lt?(Yf(t,i,h),os(t,i,h)):(qe&&l&&xf(i),i.flags|=1,Wt(t,i,a,h),i.child)}function Ly(t,i,a,l,h,d){return Wr(i),i.updateQueue=null,a=zp(i,l,a,h),Pp(t),l=Kf(),t!==null&&!Lt?(Yf(t,i,d),os(t,i,d)):(qe&&l&&xf(i),i.flags|=1,Wt(t,i,a,d),i.child)}function Uy(t,i,a,l,h){if(Wr(i),i.stateNode===null){var d=za,v=a.contextType;typeof v=="object"&&v!==null&&(d=Zt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ld,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Lf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Zt(v):za,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(od(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&ld.enqueueReplaceState(d,d.state,null),Tl(i,l,d,h),bl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=ra(a,b);d.props=N;var B=d.context,K=a.contextType;v=za,typeof K=="object"&&K!==null&&(v=Zt(K));var J=a.getDerivedStateFromProps;K=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==v)&&wy(i,d,l,v),Xs=!1;var q=i.memoizedState;d.state=q,Tl(i,l,d,h),bl(),B=i.memoizedState,b||q!==B||Xs?(typeof J=="function"&&(od(i,a,J,l),B=i.memoizedState),(N=Xs||Ay(i,a,N,l,q,B,v))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=v,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Uf(t,i),v=i.memoizedProps,K=ra(a,v),d.props=K,J=i.pendingProps,q=d.context,B=a.contextType,N=za,typeof B=="object"&&B!==null&&(N=Zt(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==J||q!==N)&&wy(i,d,l,N),Xs=!1,q=i.memoizedState,d.state=q,Tl(i,l,d,h),bl();var G=i.memoizedState;v!==J||q!==G||Xs||t!==null&&t.dependencies!==null&&ou(t.dependencies)?(typeof b=="function"&&(od(i,a,b,l),G=i.memoizedState),(K=Xs||Ay(i,a,K,l,q,G,N)||t!==null&&t.dependencies!==null&&ou(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=N,l=K):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,xu(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=ia(i,t.child,null,h),i.child=ia(i,null,a,h)):Wt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=os(t,i,h),t}function Py(t,i,a,l){return Jr(),i.flags|=256,Wt(t,i,a,l),i.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dd(t){return{baseLanes:t,cachePool:Rp()}}function md(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Dn),t}function zy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(xt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(qe){if(h?Zs(i):Ws(),(t=dt)?(t=Q_(t,Kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Fs!==null?{id:ji,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=vp(t),a.return=i,i.child=a,Jt=i,dt=null)):t=null,t===null)throw Ys(i);return $d(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(Ws(),h=i.mode,b=Cu({mode:"hidden",children:b},h),l=$r(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=dd(a),l.childLanes=md(t,v,a),i.memoizedState=fd,Cl(null,l)):(Zs(i),gd(i,b))}var N=t.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Zs(i),i.flags&=-257,i=pd(t,i,a)):i.memoizedState!==null?(Ws(),i.child=t.child,i.flags|=128,i=null):(Ws(),b=l.fallback,h=i.mode,l=Cu({mode:"visible",children:l.children},h),b=$r(b,h,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,ia(i,t.child,null,a),l=i.child,l.memoizedState=dd(a),l.childLanes=md(t,v,a),i.memoizedState=fd,i=Cl(null,l));else if(Zs(i),$d(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var B=v.dgst;v=B,l=Error(r(419)),l.stack="",l.digest=v,gl({value:l,source:null,stack:null}),i=pd(t,i,a)}else if(Lt||Ga(t,i,a,!1),v=(a&t.childLanes)!==0,Lt||v){if(v=ct,v!==null&&(l=Qo(v,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Xr(t,l),vn(v,t,l),ud;Xd(b)||ku(),i=pd(t,i,a)}else Xd(b)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,dt=Qn(b.nextSibling),Jt=i,qe=!0,Ks=null,Kn=!1,t!==null&&Tp(i,t),i=gd(i,l.children),i.flags|=4096);return i}return h?(Ws(),b=l.fallback,h=i.mode,N=t.child,B=N.sibling,l=ts(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?b=ts(B,b):(b=$r(b,h,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Cl(null,l),l=i.child,b=t.child.memoizedState,b===null?b=dd(a):(h=b.cachePool,h!==null?(N=jt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=Rp(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=md(t,v,a),i.memoizedState=fd,Cl(t.child,l)):(Zs(i),a=t.child,t=a.sibling,a=ts(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function gd(t,i){return i=Cu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Cu(t,i){return t=Cn(22,t,null,i),t.lanes=0,t}function pd(t,i,a){return ia(i,t.child,null,a),t=gd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function By(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Df(t.return,i,a)}function yd(t,i,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function qy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=xt.current,b=(v&2)!==0;if(b?(v=v&1|2,i.flags|=128):v&=1,se(xt,v),Wt(t,i,l,a),l=qe?ml:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&By(t,a,i);else if(t.tag===19)By(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&gu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),yd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&gu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}yd(i,!0,a,null,d,l);break;case"together":yd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function os(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),nr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ga(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=ts(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=ts(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function _d(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ou(t)))}function FA(t,i,a){switch(i.tag){case 3:At(i,i.stateNode.containerInfo),Qs(i,jt,t.memoizedState.cache),Jr();break;case 27:case 5:gi(i);break;case 4:At(i,i.stateNode.containerInfo);break;case 10:Qs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Hf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Zs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?zy(t,i,a):(Zs(i),t=os(t,i,a),t!==null?t.sibling:null);Zs(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ga(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return qy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(xt,xt.current),l)break;return null;case 22:return i.lanes=0,Vy(t,i,a,i.pendingProps);case 24:Qs(i,jt,t.memoizedState.cache)}return os(t,i,a)}function Hy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Lt=!0;else{if(!_d(t,a)&&(i.flags&128)===0)return Lt=!1,FA(t,i,a);Lt=(t.flags&131072)!==0}else Lt=!1,qe&&(i.flags&1048576)!==0&&bp(i,ml,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=ta(i.elementType),i.type=t,typeof t=="function")Af(t)?(l=ra(t,l),i.tag=1,i=Uy(null,i,t,l,a)):(i.tag=0,i=hd(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===Ae){i.tag=11,i=Dy(null,i,t,l,a);break e}else if(h===R){i.tag=14,i=Oy(null,i,t,l,a);break e}}throw i=Je(t)||t,Error(r(306,i,""))}}return i;case 0:return hd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ra(l,i.pendingProps),Uy(t,i,l,h,a);case 3:e:{if(At(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Uf(t,i),Tl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Qs(i,jt,l),l!==d.cache&&Of(i,[jt],a,!0),bl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Py(t,i,l,a);break e}else if(l!==h){h=Hn(Error(r(424)),i),gl(h),i=Py(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=Qn(t.firstChild),Jt=i,qe=!0,Ks=null,Kn=!0,a=Vp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Jr(),l===h){i=os(t,i,a);break e}Wt(t,i,l,a)}i=i.child}return i;case 26:return xu(t,i),t===null?(a=e0(i.type,null,i.pendingProps,null))?i.memoizedState=a:qe||(a=i.type,t=i.pendingProps,l=Hu(Ie.current).createElement(a),l[Ot]=i,l[Gt]=t,en(l,a,t),Mt(l),i.stateNode=l):i.memoizedState=e0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return gi(i),t===null&&qe&&(l=i.stateNode=J_(i.type,i.pendingProps,Ie.current),Jt=i,Kn=!0,h=dt,or(i.type)?(Jd=h,dt=Qn(l.firstChild)):dt=h),Wt(t,i,i.pendingProps.children,a),xu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&qe&&((h=l=dt)&&(l=bw(l,i.type,i.pendingProps,Kn),l!==null?(i.stateNode=l,Jt=i,dt=Qn(l.firstChild),Kn=!1,h=!0):h=!1),h||Ys(i)),gi(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Kd(h,d)?l=null:v!==null&&Kd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Ff(t,i,kA,null,null,a),ql._currentValue=h),xu(t,i),Wt(t,i,l,a),i.child;case 6:return t===null&&qe&&((t=a=dt)&&(a=Tw(a,i.pendingProps,Kn),a!==null?(i.stateNode=a,Jt=i,dt=null,t=!0):t=!1),t||Ys(i)),null;case 13:return zy(t,i,a);case 4:return At(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=ia(i,null,l,a):Wt(t,i,l,a),i.child;case 11:return Dy(t,i,i.type,i.pendingProps,a);case 7:return Wt(t,i,i.pendingProps,a),i.child;case 8:return Wt(t,i,i.pendingProps.children,a),i.child;case 12:return Wt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Qs(i,i.type,l.value),Wt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Wr(i),h=Zt(h),l=l(h),i.flags|=1,Wt(t,i,l,a),i.child;case 14:return Oy(t,i,i.type,i.pendingProps,a);case 15:return My(t,i,i.type,i.pendingProps,a);case 19:return qy(t,i,a);case 31:return GA(t,i,a);case 22:return Vy(t,i,a,i.pendingProps);case 24:return Wr(i),l=Zt(jt),t===null?(h=jf(),h===null&&(h=ct,d=Mf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Lf(i),Qs(i,jt,h)):((t.lanes&a)!==0&&(Uf(t,i),Tl(i,null,null,a),bl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Qs(i,jt,l)):(l=d.cache,Qs(i,jt,l),l!==h.cache&&Of(i,[jt],a,!0))),Wt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ls(t){t.flags|=4}function vd(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(p_())t.flags|=8192;else throw na=hu,kf}else t.flags&=-16777217}function Gy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!r0(i))if(p_())t.flags|=8192;else throw na=hu,kf}function Ru(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Vc():536870912,t.lanes|=i,no|=i)}function Rl(t,i){if(!qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function mt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function KA(t,i,a){var l=i.pendingProps;switch(Cf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(i),null;case 1:return mt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ss(jt),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ha(i)?ls(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,If())),mt(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(ls(i),d!==null?(mt(i),Gy(i,d)):(mt(i),vd(i,h,null,l,a))):d?d!==t.memoizedState?(ls(i),mt(i),Gy(i,d)):(mt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&ls(i),mt(i),vd(i,h,t,l,a)),null;case 27:if(Yi(i),a=Ie.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ls(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return mt(i),null}t=oe.current,Ha(i)?Ap(i):(t=J_(h,l,a),i.stateNode=t,ls(i))}return mt(i),null;case 5:if(Yi(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ls(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return mt(i),null}if(d=oe.current,Ha(i))Ap(i);else{var v=Hu(Ie.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[Ot]=i,d[Gt]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(en(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ls(i)}}return mt(i),vd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ls(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Ie.current,Ha(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Jt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ot]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||z_(t.nodeValue,a)),t||Ys(i,!0)}else t=Hu(t).createTextNode(l),t[Ot]=i,i.stateNode=t}return mt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Ha(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Ot]=i}else Jr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),t=!1}else a=If(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(In(i),i):(In(i),null);if((i.flags&128)!==0)throw Error(r(558))}return mt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ha(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ot]=i}else Jr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),h=!1}else h=If(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(In(i),i):(In(i),null)}return In(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Ru(i,i.updateQueue),mt(i),null);case 4:return lt(),t===null&&Bd(i.stateNode.containerInfo),mt(i),null;case 10:return ss(i.type),mt(i),null;case 19:if($(xt),l=i.memoizedState,l===null)return mt(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)Rl(l,!1);else{if(Tt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=gu(t),d!==null){for(i.flags|=128,Rl(l,!1),t=d.updateQueue,i.updateQueue=t,Ru(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)_p(a,t),a=a.sibling;return se(xt,xt.current&1|2),qe&&ns(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Ge()>Mu&&(i.flags|=128,h=!0,Rl(l,!1),i.lanes=4194304)}else{if(!h)if(t=gu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Ru(i,t),Rl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!qe)return mt(i),null}else 2*Ge()-l.renderingStartTime>Mu&&a!==536870912&&(i.flags|=128,h=!0,Rl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ge(),t.sibling=null,a=xt.current,se(xt,h?a&1|2:a&1),qe&&ns(i,l.treeForkCount),t):(mt(i),null);case 22:case 23:return In(i),qf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(mt(i),i.subtreeFlags&6&&(i.flags|=8192)):mt(i),a=i.updateQueue,a!==null&&Ru(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&$(ea),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ss(jt),mt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function YA(t,i){switch(Cf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ss(jt),lt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Yi(i),null;case 31:if(i.memoizedState!==null){if(In(i),i.alternate===null)throw Error(r(340));Jr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(In(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Jr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return $(xt),null;case 4:return lt(),null;case 10:return ss(i.type),null;case 22:case 23:return In(i),qf(),t!==null&&$(ea),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ss(jt),null;case 25:return null;default:return null}}function Fy(t,i){switch(Cf(i),i.tag){case 3:ss(jt),lt();break;case 26:case 27:case 5:Yi(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&In(i);break;case 13:In(i);break;case 19:$(xt);break;case 10:ss(i.type);break;case 22:case 23:In(i),qf(),t!==null&&$(ea);break;case 24:ss(jt)}}function Il(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(b){nt(i,i.return,b)}}function er(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=i;var N=a,B=b;try{B()}catch(K){nt(h,N,K)}}}l=l.next}while(l!==d)}}catch(K){nt(i,i.return,K)}}function Ky(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{kp(i,a)}catch(l){nt(t,t.return,l)}}}function Yy(t,i,a){a.props=ra(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){nt(t,i,l)}}function Nl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){nt(t,i,h)}}function Li(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){nt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){nt(t,i,h)}else a.current=null}function Qy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){nt(t,t.return,h)}}function Ed(t,i,a){try{var l=t.stateNode;gw(l,t.type,a,i),l[Gt]=i}catch(h){nt(t,t.return,h)}}function Xy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&or(t.type)||t.tag===4}function bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&or(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Td(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ni));else if(l!==4&&(l===27&&or(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Td(t,i,a),t=t.sibling;t!==null;)Td(t,i,a),t=t.sibling}function Iu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&or(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Iu(t,i,a),t=t.sibling;t!==null;)Iu(t,i,a),t=t.sibling}function $y(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);en(i,l,a),i[Ot]=t,i[Gt]=a}catch(d){nt(t,t.return,d)}}var cs=!1,Ut=!1,Ad=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function QA(t,i){if(t=t.containerInfo,Gd=$u,t=cp(t),pf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,b=-1,N=-1,B=0,K=0,J=t,q=null;t:for(;;){for(var G;J!==a||h!==0&&J.nodeType!==3||(b=v+h),J!==d||l!==0&&J.nodeType!==3||(N=v+l),J.nodeType===3&&(v+=J.nodeValue.length),(G=J.firstChild)!==null;)q=J,J=G;for(;;){if(J===t)break t;if(q===a&&++B===h&&(b=v),q===d&&++K===l&&(N=v),(G=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=G}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fd={focusedElem:t,selectionRange:a},$u=!1,Kt=i;Kt!==null;)if(i=Kt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Kt=t;else for(;Kt!==null;){switch(i=Kt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var he=ra(a.type,h);t=l.getSnapshotBeforeUpdate(he,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){nt(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Qd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Kt=t;break}Kt=i.return}}function Zy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:hs(t,a),l&4&&Il(5,a);break;case 1:if(hs(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){nt(a,a.return,v)}else{var h=ra(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){nt(a,a.return,v)}}l&64&&Ky(a),l&512&&Nl(a,a.return);break;case 3:if(hs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{kp(t,i)}catch(v){nt(a,a.return,v)}}break;case 27:i===null&&l&4&&$y(a);case 26:case 5:hs(t,a),i===null&&l&4&&Qy(a),l&512&&Nl(a,a.return);break;case 12:hs(t,a);break;case 31:hs(t,a),l&4&&t_(t,a);break;case 13:hs(t,a),l&4&&n_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=iw.bind(null,a),Aw(t,a))));break;case 22:if(l=a.memoizedState!==null||cs,!l){i=i!==null&&i.memoizedState!==null||Ut,h=cs;var d=Ut;cs=l,(Ut=i)&&!d?fs(t,a,(a.subtreeFlags&8772)!==0):hs(t,a),cs=h,Ut=d}break;case 30:break;default:hs(t,a)}}function Wy(t){var i=t.alternate;i!==null&&(t.alternate=null,Wy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&xa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var vt=null,gn=!1;function us(t,i,a){for(a=a.child;a!==null;)e_(t,i,a),a=a.sibling}function e_(t,i,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Zn,a)}catch{}switch(a.tag){case 26:Ut||Li(a,i),us(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ut||Li(a,i);var l=vt,h=gn;or(a.type)&&(vt=a.stateNode,gn=!1),us(t,i,a),Pl(a.stateNode),vt=l,gn=h;break;case 5:Ut||Li(a,i);case 6:if(l=vt,h=gn,vt=null,us(t,i,a),vt=l,gn=h,vt!==null)if(gn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(d){nt(a,i,d)}else try{vt.removeChild(a.stateNode)}catch(d){nt(a,i,d)}break;case 18:vt!==null&&(gn?(t=vt,K_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),uo(t)):K_(vt,a.stateNode));break;case 4:l=vt,h=gn,vt=a.stateNode.containerInfo,gn=!0,us(t,i,a),vt=l,gn=h;break;case 0:case 11:case 14:case 15:er(2,a,i),Ut||er(4,a,i),us(t,i,a);break;case 1:Ut||(Li(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Yy(a,i,l)),us(t,i,a);break;case 21:us(t,i,a);break;case 22:Ut=(l=Ut)||a.memoizedState!==null,us(t,i,a),Ut=l;break;default:us(t,i,a)}}function t_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{uo(t)}catch(a){nt(i,i.return,a)}}}function n_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{uo(t)}catch(a){nt(i,i.return,a)}}function XA(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Jy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Jy),i;default:throw Error(r(435,t.tag))}}function Nu(t,i){var a=XA(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=sw.bind(null,t,l);l.then(h,h)}})}function pn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(or(b.type)){vt=b.stateNode,gn=!1;break e}break;case 5:vt=b.stateNode,gn=!1;break e;case 3:case 4:vt=b.stateNode.containerInfo,gn=!0;break e}b=b.return}if(vt===null)throw Error(r(160));e_(d,v,h),vt=null,gn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)i_(i,t),i=i.sibling}var li=null;function i_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pn(i,t),yn(t),l&4&&(er(3,t,t.return),Il(3,t),er(5,t,t.return));break;case 1:pn(i,t),yn(t),l&512&&(Ut||a===null||Li(a,a.return)),l&64&&cs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=li;if(pn(i,t),yn(t),l&512&&(Ut||a===null||Li(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ai]||d[Ot]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),en(d,l,a),d[Ot]=t,Mt(d),l=d;break e;case"link":var v=i0("link","href",h).get(l+(a.href||""));if(v){for(var b=0;b<v.length;b++)if(d=v[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(b,1);break t}}d=h.createElement(l),en(d,l,a),h.head.appendChild(d);break;case"meta":if(v=i0("meta","content",h).get(l+(a.content||""))){for(b=0;b<v.length;b++)if(d=v[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(b,1);break t}}d=h.createElement(l),en(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ot]=t,Mt(d),l=d}t.stateNode=l}else s0(h,t.type,t.stateNode);else t.stateNode=n0(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?s0(h,t.type,t.stateNode):n0(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ed(t,t.memoizedProps,a.memoizedProps)}break;case 27:pn(i,t),yn(t),l&512&&(Ut||a===null||Li(a,a.return)),a!==null&&l&4&&Ed(t,t.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,t),yn(t),l&512&&(Ut||a===null||Li(a,a.return)),t.flags&32){h=t.stateNode;try{mn(h,"")}catch(he){nt(t,t.return,he)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Ed(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Ad=!0);break;case 6:if(pn(i,t),yn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(he){nt(t,t.return,he)}}break;case 3:if(Ku=null,h=li,li=Gu(i.containerInfo),pn(i,t),li=h,yn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{uo(i.containerInfo)}catch(he){nt(t,t.return,he)}Ad&&(Ad=!1,s_(t));break;case 4:l=li,li=Gu(t.stateNode.containerInfo),pn(i,t),yn(t),li=l;break;case 12:pn(i,t),yn(t);break;case 31:pn(i,t),yn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nu(t,l)));break;case 13:pn(i,t),yn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ou=Ge()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nu(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=cs,K=Ut;if(cs=B||h,Ut=K||N,pn(i,t),Ut=K,cs=B,yn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||cs||Ut||aa(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=N.stateNode;var J=N.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(he){nt(N,N.return,he)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(he){nt(N,N.return,he)}}}else if(i.tag===18){if(a===null){N=i;try{var G=N.stateNode;h?Y_(G,!0):Y_(N.stateNode,!1)}catch(he){nt(N,N.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Nu(t,a))));break;case 19:pn(i,t),yn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nu(t,l)));break;case 30:break;case 21:break;default:pn(i,t),yn(t)}}function yn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Xy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=bd(t);Iu(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(mn(v,""),a.flags&=-33);var b=bd(t);Iu(t,b,v);break;case 3:case 4:var N=a.stateNode.containerInfo,B=bd(t);Td(t,B,N);break;default:throw Error(r(161))}}catch(K){nt(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function s_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;s_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function hs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Zy(t,i.alternate,i),i=i.sibling}function aa(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:er(4,i,i.return),aa(i);break;case 1:Li(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Yy(i,i.return,a),aa(i);break;case 27:Pl(i.stateNode);case 26:case 5:Li(i,i.return),aa(i);break;case 22:i.memoizedState===null&&aa(i);break;case 30:aa(i);break;default:aa(i)}t=t.sibling}}function fs(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:fs(h,d,a),Il(4,d);break;case 1:if(fs(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){nt(l,l.return,B)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)jp(N[h],b)}catch(B){nt(l,l.return,B)}}a&&v&64&&Ky(d),Nl(d,d.return);break;case 27:$y(d);case 26:case 5:fs(h,d,a),a&&l===null&&v&4&&Qy(d),Nl(d,d.return);break;case 12:fs(h,d,a);break;case 31:fs(h,d,a),a&&v&4&&t_(h,d);break;case 13:fs(h,d,a),a&&v&4&&n_(h,d);break;case 22:d.memoizedState===null&&fs(h,d,a),Nl(d,d.return);break;case 30:break;default:fs(h,d,a)}i=i.sibling}}function wd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&pl(a))}function Sd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&pl(t))}function ci(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)r_(t,i,a,l),i=i.sibling}function r_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ci(t,i,a,l),h&2048&&Il(9,i);break;case 1:ci(t,i,a,l);break;case 3:ci(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&pl(t)));break;case 12:if(h&2048){ci(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){nt(i,i.return,N)}}else ci(t,i,a,l);break;case 31:ci(t,i,a,l);break;case 13:ci(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ci(t,i,a,l):Dl(t,i):d._visibility&2?ci(t,i,a,l):(d._visibility|=2,Wa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&wd(v,i);break;case 24:ci(t,i,a,l),h&2048&&Sd(i.alternate,i);break;default:ci(t,i,a,l)}}function Wa(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,b=a,N=l,B=v.flags;switch(v.tag){case 0:case 11:case 15:Wa(d,v,b,N,h),Il(8,v);break;case 23:break;case 22:var K=v.stateNode;v.memoizedState!==null?K._visibility&2?Wa(d,v,b,N,h):Dl(d,v):(K._visibility|=2,Wa(d,v,b,N,h)),h&&B&2048&&wd(v.alternate,v);break;case 24:Wa(d,v,b,N,h),h&&B&2048&&Sd(v.alternate,v);break;default:Wa(d,v,b,N,h)}i=i.sibling}}function Dl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Dl(a,l),h&2048&&wd(l.alternate,l);break;case 24:Dl(a,l),h&2048&&Sd(l.alternate,l);break;default:Dl(a,l)}i=i.sibling}}var Ol=8192;function eo(t,i,a){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)a_(t,i,a),t=t.sibling}function a_(t,i,a){switch(t.tag){case 26:eo(t,i,a),t.flags&Ol&&t.memoizedState!==null&&jw(a,li,t.memoizedState,t.memoizedProps);break;case 5:eo(t,i,a);break;case 3:case 4:var l=li;li=Gu(t.stateNode.containerInfo),eo(t,i,a),li=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ol,Ol=16777216,eo(t,i,a),Ol=l):eo(t,i,a));break;default:eo(t,i,a)}}function o_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Ml(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,c_(l,t)}o_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)l_(t),t=t.sibling}function l_(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&er(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Du(t)):Ml(t);break;default:Ml(t)}}function Du(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,c_(l,t)}o_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:er(8,i,i.return),Du(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Du(i));break;default:Du(i)}t=t.sibling}}function c_(t,i){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:er(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=t;Kt!==null;){l=Kt;var h=l.sibling,d=l.return;if(Wy(l),l===a){Kt=null;break e}if(h!==null){h.return=d,Kt=h;break e}Kt=d}}}var $A={getCacheForType:function(t){var i=Zt(jt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Zt(jt).controller.signal}},JA=typeof WeakMap=="function"?WeakMap:Map,$e=0,ct=null,Ve=null,Le=0,tt=0,Nn=null,tr=!1,to=!1,xd=!1,ds=0,Tt=0,nr=0,oa=0,Cd=0,Dn=0,no=0,Vl=null,_n=null,Rd=!1,Ou=0,u_=0,Mu=1/0,Vu=null,ir=null,qt=0,sr=null,io=null,ms=0,Id=0,Nd=null,h_=null,jl=0,Dd=null;function On(){return($e&2)!==0&&Le!==0?Le&-Le:j.T!==null?Ld():jc()}function f_(){if(Dn===0)if((Le&536870912)===0||qe){var t=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),Dn=t}else Dn=536870912;return t=Rn.current,t!==null&&(t.flags|=32),Dn}function vn(t,i,a){(t===ct&&(tt===2||tt===9)||t.cancelPendingCommit!==null)&&(so(t,0),rr(t,Le,Dn,!1)),jr(t,a),(($e&2)===0||t!==ct)&&(t===ct&&(($e&2)===0&&(oa|=a),Tt===4&&rr(t,Le,Dn,!1)),Ui(t))}function d_(t,i,a){if(($e&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Wn(t,i),h=l?ew(t,i):Md(t,i,!0),d=l;do{if(h===0){to&&!l&&rr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!ZA(a)){h=Md(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var b=t;h=Vl;var N=b.current.memoizedState.isDehydrated;if(N&&(so(b,v).flags|=256),v=Md(b,v,!1),v!==2){if(xd&&!N){b.errorRecoveryDisabledLanes|=d,oa|=d,h=4;break e}d=_n,_n=h,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){so(t,0),rr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:rr(l,i,Dn,!tr);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=Ou+300-Ge(),10<h)){if(rr(l,i,Dn,!tr),Ei(l,0,!0)!==0)break e;ms=i,l.timeoutHandle=G_(m_.bind(null,l,a,_n,Vu,Rd,i,Dn,oa,no,tr,d,"Throttled",-0,0),h);break e}m_(l,a,_n,Vu,Rd,i,Dn,oa,no,tr,d,null,-0,0)}}break}while(!0);Ui(t)}function m_(t,i,a,l,h,d,v,b,N,B,K,J,q,G){if(t.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},a_(i,d,J);var he=(d&62914560)===d?Ou-Ge():(d&4194048)===d?u_-Ge():0;if(he=kw(J,he),he!==null){ms=d,t.cancelPendingCommit=he(T_.bind(null,t,i,d,a,l,h,v,b,N,K,J,null,q,G)),rr(t,d,v,!B);return}}T_(t,i,d,a,l,h,v,b,N)}function ZA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!xn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function rr(t,i,a,l){i&=~Cd,i&=~oa,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-wt(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&kr(t,a,i)}function ju(){return($e&6)===0?(kl(0),!1):!0}function Od(){if(Ve!==null){if(tt===0)var t=Ve.return;else t=Ve,is=Zr=null,Qf(t),Qa=null,_l=0,t=Ve;for(;t!==null;)Fy(t.alternate,t),t=t.return;Ve=null}}function so(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,_w(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ms=0,Od(),ct=t,Ve=a=ts(t.current,null),Le=i,tt=0,Nn=null,tr=!1,to=Wn(t,i),xd=!1,no=Dn=Cd=oa=nr=Tt=0,_n=Vl=null,Rd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-wt(l),d=1<<h;i|=t[h],l&=~d}return ds=i,nu(),a}function g_(t,i){De=null,j.H=xl,i===Ya||i===uu?(i=Dp(),tt=3):i===kf?(i=Dp(),tt=4):tt=i===ud?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Ve===null&&(Tt=1,wu(t,Hn(i,t.current)))}function p_(){var t=Rn.current;return t===null?!0:(Le&4194048)===Le?Yn===null:(Le&62914560)===Le||(Le&536870912)!==0?t===Yn:!1}function y_(){var t=j.H;return j.H=xl,t===null?xl:t}function __(){var t=j.A;return j.A=$A,t}function ku(){Tt=4,tr||(Le&4194048)!==Le&&Rn.current!==null||(to=!0),(nr&134217727)===0&&(oa&134217727)===0||ct===null||rr(ct,Le,Dn,!1)}function Md(t,i,a){var l=$e;$e|=2;var h=y_(),d=__();(ct!==t||Le!==i)&&(Vu=null,so(t,i)),i=!1;var v=Tt;e:do try{if(tt!==0&&Ve!==null){var b=Ve,N=Nn;switch(tt){case 8:Od(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(i=!0);var B=tt;if(tt=0,Nn=null,ro(t,b,N,B),a&&to){v=0;break e}break;default:B=tt,tt=0,Nn=null,ro(t,b,N,B)}}WA(),v=Tt;break}catch(K){g_(t,K)}while(!0);return i&&t.shellSuspendCounter++,is=Zr=null,$e=l,j.H=h,j.A=d,Ve===null&&(ct=null,Le=0,nu()),v}function WA(){for(;Ve!==null;)v_(Ve)}function ew(t,i){var a=$e;$e|=2;var l=y_(),h=__();ct!==t||Le!==i?(Vu=null,Mu=Ge()+500,so(t,i)):to=Wn(t,i);e:do try{if(tt!==0&&Ve!==null){i=Ve;var d=Nn;t:switch(tt){case 1:tt=0,Nn=null,ro(t,i,d,1);break;case 2:case 9:if(Ip(d)){tt=0,Nn=null,E_(i);break}i=function(){tt!==2&&tt!==9||ct!==t||(tt=7),Ui(t)},d.then(i,i);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Ip(d)?(tt=0,Nn=null,E_(i)):(tt=0,Nn=null,ro(t,i,d,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var b=Ve;if(v?r0(v):b.stateNode.complete){tt=0,Nn=null;var N=b.sibling;if(N!==null)Ve=N;else{var B=b.return;B!==null?(Ve=B,Lu(B)):Ve=null}break t}}tt=0,Nn=null,ro(t,i,d,5);break;case 6:tt=0,Nn=null,ro(t,i,d,6);break;case 8:Od(),Tt=6;break e;default:throw Error(r(462))}}tw();break}catch(K){g_(t,K)}while(!0);return is=Zr=null,j.H=l,j.A=h,$e=a,Ve!==null?0:(ct=null,Le=0,nu(),Tt)}function tw(){for(;Ve!==null&&!We();)v_(Ve)}function v_(t){var i=Hy(t.alternate,t,ds);t.memoizedProps=t.pendingProps,i===null?Lu(t):Ve=i}function E_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Ly(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=Ly(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:Qf(i);default:Fy(a,i),i=Ve=_p(i,ds),i=Hy(a,i,ds)}t.memoizedProps=t.pendingProps,i===null?Lu(t):Ve=i}function ro(t,i,a,l){is=Zr=null,Qf(i),Qa=null,_l=0;var h=i.return;try{if(HA(t,h,i,a,Le)){Tt=1,wu(t,Hn(a,t.current)),Ve=null;return}}catch(d){if(h!==null)throw Ve=h,d;Tt=1,wu(t,Hn(a,t.current)),Ve=null;return}i.flags&32768?(qe||l===1?t=!0:to||(Le&536870912)!==0?t=!1:(tr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Rn.current,l!==null&&l.tag===13&&(l.flags|=16384))),b_(i,t)):Lu(i)}function Lu(t){var i=t;do{if((i.flags&32768)!==0){b_(i,tr);return}t=i.return;var a=KA(i.alternate,i,ds);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=t}while(i!==null);Tt===0&&(Tt=5)}function b_(t,i){do{var a=YA(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);Tt=6,Ve=null}function T_(t,i,a,l,h,d,v,b,N){t.cancelPendingCommit=null;do Uu();while(qt!==0);if(($e&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=bf,ff(t,a,d,v,b,N),t===ct&&(Ve=ct=null,Le=0),io=i,sr=t,ms=a,Id=d,Nd=h,h_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,rw(Nt,function(){return C_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=j.T,j.T=null,h=ee.p,ee.p=2,v=$e,$e|=4;try{QA(t,i,a)}finally{$e=v,ee.p=h,j.T=l}}qt=1,A_(),w_(),S_()}}function A_(){if(qt===1){qt=0;var t=sr,i=io,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var l=ee.p;ee.p=2;var h=$e;$e|=4;try{i_(i,t);var d=Fd,v=cp(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(v!==b&&b&&b.ownerDocument&&lp(b.ownerDocument.documentElement,b)){if(N!==null&&pf(b)){var B=N.start,K=N.end;if(K===void 0&&(K=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(K,b.value.length);else{var J=b.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var G=q.getSelection(),he=b.textContent.length,ve=Math.min(N.start,he),ot=N.end===void 0?ve:Math.min(N.end,he);!G.extend&&ve>ot&&(v=ot,ot=ve,ve=v);var L=op(b,ve),O=op(b,ot);if(L&&O&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var z=J.createRange();z.setStart(L.node,L.offset),G.removeAllRanges(),ve>ot?(G.addRange(z),G.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),G.addRange(z))}}}}for(J=[],G=b;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var Q=J[b];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}$u=!!Gd,Fd=Gd=null}finally{$e=h,ee.p=l,j.T=a}}t.current=i,qt=2}}function w_(){if(qt===2){qt=0;var t=sr,i=io,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var l=ee.p;ee.p=2;var h=$e;$e|=4;try{Zy(t,i.alternate,i)}finally{$e=h,ee.p=l,j.T=a}}qt=3}}function S_(){if(qt===4||qt===3){qt=0,it();var t=sr,i=io,a=ms,l=h_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?qt=5:(qt=0,io=sr=null,x_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ir=null),Ji(a),i=i.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Zn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=j.T,h=ee.p,ee.p=2,j.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var b=l[v];d(b.value,{componentStack:b.stack})}}finally{j.T=i,ee.p=h}}(ms&3)!==0&&Uu(),Ui(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Dd?jl++:(jl=0,Dd=t):jl=0,kl(0)}}function x_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,pl(i)))}function Uu(){return A_(),w_(),S_(),C_()}function C_(){if(qt!==5)return!1;var t=sr,i=Id;Id=0;var a=Ji(ms),l=j.T,h=ee.p;try{ee.p=32>a?32:a,j.T=null,a=Nd,Nd=null;var d=sr,v=ms;if(qt=0,io=sr=null,ms=0,($e&6)!==0)throw Error(r(331));var b=$e;if($e|=4,l_(d.current),r_(d,d.current,v,a),$e=b,kl(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Zn,d)}catch{}return!0}finally{ee.p=h,j.T=l,x_(t,i)}}function R_(t,i,a){i=Hn(a,i),i=cd(t.stateNode,i,2),t=Js(t,i,2),t!==null&&(jr(t,2),Ui(t))}function nt(t,i,a){if(t.tag===3)R_(t,t,a);else for(;i!==null;){if(i.tag===3){R_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ir===null||!ir.has(l))){t=Hn(a,t),a=Iy(2),l=Js(i,a,2),l!==null&&(Ny(a,l,i,t),jr(l,2),Ui(l));break}}i=i.return}}function Vd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new JA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(xd=!0,h.add(a),t=nw.bind(null,t,i,a),i.then(t,t))}function nw(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ct===t&&(Le&a)===a&&(Tt===4||Tt===3&&(Le&62914560)===Le&&300>Ge()-Ou?($e&2)===0&&so(t,0):Cd|=a,no===Le&&(no=0)),Ui(t)}function I_(t,i){i===0&&(i=Vc()),t=Xr(t,i),t!==null&&(jr(t,i),Ui(t))}function iw(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),I_(t,a)}function sw(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),I_(t,a)}function rw(t,i){return de(t,i)}var Pu=null,ao=null,jd=!1,zu=!1,kd=!1,ar=0;function Ui(t){t!==ao&&t.next===null&&(ao===null?Pu=ao=t:ao=ao.next=t),zu=!0,jd||(jd=!0,ow())}function kl(t,i){if(!kd&&zu){kd=!0;do for(var a=!1,l=Pu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-wt(42|t)+1)-1,d&=h&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,M_(l,d))}else d=Le,d=Ei(l,l===ct?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Wn(l,d)||(a=!0,M_(l,d));l=l.next}while(a);kd=!1}}function aw(){N_()}function N_(){zu=jd=!1;var t=0;ar!==0&&yw()&&(t=ar);for(var i=Ge(),a=null,l=Pu;l!==null;){var h=l.next,d=D_(l,i);d===0?(l.next=null,a===null?Pu=h:a.next=h,h===null&&(ao=a)):(a=l,(t!==0||(d&3)!==0)&&(zu=!0)),l=h}qt!==0&&qt!==5||kl(t),ar!==0&&(ar=0)}function D_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-wt(d),b=1<<v,N=h[v];N===-1?((b&a)===0||(b&l)!==0)&&(h[v]=hf(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=ct,a=Le,a=Ei(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(tt===2||tt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ke(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Wn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ke(l),Ji(a)){case 2:case 8:a=Qe;break;case 32:a=Nt;break;case 268435456:a=yi;break;default:a=Nt}return l=O_.bind(null,t),a=de(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ke(l),t.callbackPriority=2,t.callbackNode=null,2}function O_(t,i){if(qt!==0&&qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Uu()&&t.callbackNode!==a)return null;var l=Le;return l=Ei(t,t===ct?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(d_(t,l,i),D_(t,Ge()),t.callbackNode!=null&&t.callbackNode===a?O_.bind(null,t):null)}function M_(t,i){if(Uu())return null;d_(t,i,!0)}function ow(){vw(function(){($e&6)!==0?de(ft,aw):N_()})}function Ld(){if(ar===0){var t=Fa;t===0&&(t=_i,_i<<=1,(_i&261888)===0&&(_i=256)),ar=t}return ar}function V_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Na(""+t)}function j_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function lw(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=V_((h[Gt]||null).action),v=l.submitter;v&&(i=(i=v[Gt]||null)?V_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var b=new Di("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ar!==0){var N=v?j_(h,v):new FormData(h);id(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=v?j_(h,v):new FormData(h),id(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Ud=0;Ud<Ef.length;Ud++){var Pd=Ef[Ud],cw=Pd.toLowerCase(),uw=Pd[0].toUpperCase()+Pd.slice(1);oi(cw,"on"+uw)}oi(fp,"onAnimationEnd"),oi(dp,"onAnimationIteration"),oi(mp,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(xA,"onTransitionRun"),oi(CA,"onTransitionStart"),oi(RA,"onTransitionCancel"),oi(gp,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function k_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var b=l[v],N=b.instance,B=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(K){tu(K)}h.currentTarget=null,d=N}else for(v=0;v<l.length;v++){if(b=l[v],N=b.instance,B=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(K){tu(K)}h.currentTarget=null,d=N}}}}function je(t,i){var a=i[Sa];a===void 0&&(a=i[Sa]=new Set);var l=t+"__bubble";a.has(l)||(L_(i,t,2,!1),a.add(l))}function zd(t,i,a){var l=0;i&&(l|=4),L_(a,t,l,i)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Bd(t){if(!t[Bu]){t[Bu]=!0,Xo.forEach(function(a){a!=="selectionchange"&&(hw.has(a)||zd(a,!1,t),zd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Bu]||(i[Bu]=!0,zd("selectionchange",!1,i))}}function L_(t,i,a,l){switch(f0(i)){case 2:var h=Pw;break;case 8:h=zw;break;default:h=nm}a=h.bind(null,i,a,t),h=void 0,!Br||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function qd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var b=l.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=l.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=wi(b),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){l=d=v;continue e}b=b.parentNode}}l=l.return}Bs(function(){var B=d,K=Pn(a),J=[];e:{var q=pp.get(t);if(q!==void 0){var G=Di,he=t;switch(t){case"keypress":if(Hr(a)===0)break e;case"keydown":case"keyup":G=Zc;break;case"focusin":he="focus",G=Fr;break;case"focusout":he="blur",G=Fr;break;case"beforeblur":case"afterblur":G=Fr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=g;break;case fp:case dp:case mp:G=Fc;break;case gp:G=A;break;case"scroll":case"scrollend":G=ol;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=Kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=es;break;case"toggle":case"beforetoggle":G=Ne}var ve=(i&4)!==0,ot=!ve&&(t==="scroll"||t==="scrollend"),L=ve?q!==null?q+"Capture":null:q;ve=[];for(var O=B,z;O!==null;){var Q=O;if(z=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||z===null||L===null||(Q=ii(O,L),Q!=null&&ve.push(Ul(O,Q,z))),ot)break;O=O.return}0<ve.length&&(q=new G(q,he,null,a,K),J.push({event:q,listeners:ve}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",q&&a!==sl&&(he=a.relatedTarget||a.fromElement)&&(wi(he)||he[Ti]))break e;if((G||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,G?(he=a.relatedTarget||a.toElement,G=B,he=he?wi(he):null,he!==null&&(ot=c(he),ve=he.tag,he!==ot||ve!==5&&ve!==27&&ve!==6)&&(he=null)):(G=null,he=B),G!==he)){if(ve=ll,Q="onMouseLeave",L="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(ve=es,Q="onPointerLeave",L="onPointerEnter",O="pointer"),ot=G==null?q:wn(G),z=he==null?q:wn(he),q=new ve(Q,O+"leave",G,a,K),q.target=ot,q.relatedTarget=z,Q=null,wi(K)===B&&(ve=new ve(L,O+"enter",he,a,K),ve.target=z,ve.relatedTarget=ot,Q=ve),ot=Q,G&&he)t:{for(ve=fw,L=G,O=he,z=0,Q=L;Q;Q=ve(Q))z++;Q=0;for(var ye=O;ye;ye=ve(ye))Q++;for(;0<z-Q;)L=ve(L),z--;for(;0<Q-z;)O=ve(O),Q--;for(;z--;){if(L===O||O!==null&&L===O.alternate){ve=L;break t}L=ve(L),O=ve(O)}ve=null}else ve=null;G!==null&&U_(J,q,G,ve,!1),he!==null&&ot!==null&&U_(J,ot,he,ve,!0)}}e:{if(q=B?wn(B):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var Fe=tp;else if(Wg(q))if(np)Fe=AA;else{Fe=bA;var ge=EA}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Ia(B.elementType)&&(Fe=tp):Fe=TA;if(Fe&&(Fe=Fe(t,B))){ep(J,Fe,a,K);break e}ge&&ge(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&tl(q,"number",q.value)}switch(ge=B?wn(B):window,t){case"focusin":(Wg(ge)||ge.contentEditable==="true")&&(La=ge,yf=B,dl=null);break;case"focusout":dl=yf=La=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,up(J,a,K);break;case"selectionchange":if(SA)break;case"keydown":case"keyup":up(J,a,K)}var Oe;if(Xe)e:{switch(t){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ka?Kr(t,a)&&(Ue="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ue="onCompositionStart");Ue&&(Vi&&a.locale!=="ko"&&(ka||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ka&&(Oe=al()):(Ni=K,rl="value"in Ni?Ni.value:Ni.textContent,ka=!0)),ge=qu(B,Ue),0<ge.length&&(Ue=new Mi(Ue,t,null,a,K),J.push({event:Ue,listeners:ge}),Oe?Ue.data=Oe:(Oe=ja(a),Oe!==null&&(Ue.data=Oe)))),(Oe=Bn?pA(t,a):yA(t,a))&&(Ue=qu(B,"onBeforeInput"),0<Ue.length&&(ge=new Mi("onBeforeInput","beforeinput",null,a,K),J.push({event:ge,listeners:Ue}),ge.data=Oe)),lw(J,t,B,a,K)}k_(J,i)})}function Ul(t,i,a){return{instance:t,listener:i,currentTarget:a}}function qu(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ii(t,a),h!=null&&l.unshift(Ul(t,h,d)),h=ii(t,i),h!=null&&l.push(Ul(t,h,d))),t.tag===3)return l;t=t.return}return[]}function fw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function U_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var b=a,N=b.alternate,B=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||B===null||(N=B,h?(B=ii(a,d),B!=null&&v.unshift(Ul(a,B,N))):h||(B=ii(a,d),B!=null&&v.push(Ul(a,B,N)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var dw=/\r\n?/g,mw=/\u0000|\uFFFD/g;function P_(t){return(typeof t=="string"?t:""+t).replace(dw,`
`).replace(mw,"")}function z_(t,i){return i=P_(i),P_(t)===i}function at(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||mn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&mn(t,""+l);break;case"className":Sn(t,"class",l);break;case"tabIndex":Sn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(t,a,l);break;case"style":il(t,l,d);break;case"data":if(i!=="object"){Sn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Na(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&at(t,i,"name",h.name,h,null),at(t,i,"formEncType",h.formEncType,h,null),at(t,i,"formMethod",h.formMethod,h,null),at(t,i,"formTarget",h.formTarget,h,null)):(at(t,i,"encType",h.encType,h,null),at(t,i,"method",h.method,h,null),at(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Na(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ni);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Na(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),Ca(t,"popover",l);break;case"xlinkActuate":Vt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ca(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qc.get(a)||a,Ca(t,a,l))}}function Hd(t,i,a,l,h,d){switch(a){case"style":il(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?mn(t,l):(typeof l=="number"||typeof l=="bigint")&&mn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$o.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Gt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ca(t,a,l)}}}function en(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(t,i,d,v,a,null)}}h&&at(t,i,"srcSet",a.srcSet,a,null),l&&at(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var b=d=v=h=null,N=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":v=K;break;case"checked":N=K;break;case"defaultChecked":B=K;break;case"value":d=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:at(t,i,l,K,a,null)}}Pc(t,d,b,N,B,v,h,!1);return;case"select":je("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":v=b;break;case"multiple":l=b;default:at(t,i,h,b,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Ls(t,!!l,i,!1):a!=null&&Ls(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(b=a[v],b!=null))switch(v){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:at(t,i,v,b,a,null)}Us(t,l,h,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(t,i,N,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Ll.length;l++)je(Ll[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(t,i,B,l,a,null)}return;default:if(Ia(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&Hd(t,i,K,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&at(t,i,b,l,a,null))}function gw(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,b=null,N=null,B=null,K=null;for(G in a){var J=a[G];if(a.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=J;default:l.hasOwnProperty(G)||at(t,i,G,null,l,J)}}for(var q in l){var G=l[q];if(J=a[q],l.hasOwnProperty(q)&&(G!=null||J!=null))switch(q){case"type":d=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":K=G;break;case"value":v=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:G!==J&&at(t,i,q,G,l,J)}}Ra(t,v,b,N,B,K,d,h);return;case"select":G=v=b=q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":G=N;default:l.hasOwnProperty(d)||at(t,i,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":v=d;default:d!==N&&at(t,i,h,d,l,N)}i=b,a=v,l=G,q!=null?Ls(t,!!a,q,!1):!!l!=!!a&&(i!=null?Ls(t,!!a,i,!0):Ls(t,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:at(t,i,b,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&at(t,i,v,h,l,d)}zc(t,q,G);return;case"option":for(var he in a)if(q=a[he],a.hasOwnProperty(he)&&q!=null&&!l.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:at(t,i,he,null,l,q)}for(N in l)if(q=l[N],G=a[N],l.hasOwnProperty(N)&&q!==G&&(q!=null||G!=null))switch(N){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:at(t,i,N,q,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)q=a[ve],a.hasOwnProperty(ve)&&q!=null&&!l.hasOwnProperty(ve)&&at(t,i,ve,null,l,q);for(B in l)if(q=l[B],G=a[B],l.hasOwnProperty(B)&&q!==G&&(q!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:at(t,i,B,q,l,G)}return;default:if(Ia(i)){for(var ot in a)q=a[ot],a.hasOwnProperty(ot)&&q!==void 0&&!l.hasOwnProperty(ot)&&Hd(t,i,ot,void 0,l,q);for(K in l)q=l[K],G=a[K],!l.hasOwnProperty(K)||q===G||q===void 0&&G===void 0||Hd(t,i,K,q,l,G);return}}for(var L in a)q=a[L],a.hasOwnProperty(L)&&q!=null&&!l.hasOwnProperty(L)&&at(t,i,L,null,l,q);for(J in l)q=l[J],G=a[J],!l.hasOwnProperty(J)||q===G||q==null&&G==null||at(t,i,J,q,l,G)}function B_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,b=h.duration;if(d&&b&&B_(v)){for(v=0,b=h.responseEnd,l+=1;l<a.length;l++){var N=a[l],B=N.startTime;if(B>b)break;var K=N.transferSize,J=N.initiatorType;K&&B_(J)&&(N=N.responseEnd,v+=K*(N<b?1:(b-B)/(N-B)))}if(--l,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gd=null,Fd=null;function Hu(t){return t.nodeType===9?t:t.ownerDocument}function q_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function H_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Kd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yd=null;function yw(){var t=window.event;return t&&t.type==="popstate"?t===Yd?!1:(Yd=t,!0):(Yd=null,!1)}var G_=typeof setTimeout=="function"?setTimeout:void 0,_w=typeof clearTimeout=="function"?clearTimeout:void 0,F_=typeof Promise=="function"?Promise:void 0,vw=typeof queueMicrotask=="function"?queueMicrotask:typeof F_<"u"?function(t){return F_.resolve(null).then(t).catch(Ew)}:G_;function Ew(t){setTimeout(function(){throw t})}function or(t){return t==="head"}function K_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),uo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Pl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Pl(a);for(var d=a.firstChild;d;){var v=d.nextSibling,b=d.nodeName;d[Ai]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Pl(t.ownerDocument.body);a=h}while(a);uo(i)}function Y_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Qd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qd(a),xa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function bw(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ai])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Qn(t.nextSibling),t===null)break}return null}function Tw(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Qn(t.nextSibling),t===null))return null;return t}function Q_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Qn(t.nextSibling),t===null))return null;return t}function Xd(t){return t.data==="$?"||t.data==="$~"}function $d(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Aw(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Qn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Jd=null;function X_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Qn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function $_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function J_(t,i,a){switch(i=Hu(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Pl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);xa(t)}var Xn=new Map,Z_=new Set;function Gu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var gs=ee.d;ee.d={f:ww,r:Sw,D:xw,C:Cw,L:Rw,m:Iw,X:Dw,S:Nw,M:Ow};function ww(){var t=gs.f(),i=ju();return t||i}function Sw(t){var i=Un(t);i!==null&&i.tag===5&&i.type==="form"?gy(i):gs.r(t)}var oo=typeof document>"u"?null:document;function W_(t,i,a){var l=oo;if(l&&typeof i=="string"&&i){var h=dn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Z_.has(h)||(Z_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),en(i,"link",t),Mt(i),l.head.appendChild(i)))}}function xw(t){gs.D(t),W_("dns-prefetch",t,null)}function Cw(t,i){gs.C(t,i),W_("preconnect",t,i)}function Rw(t,i,a){gs.L(t,i,a);var l=oo;if(l&&t&&i){var h='link[rel="preload"][as="'+dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+dn(a.imageSizes)+'"]')):h+='[href="'+dn(t)+'"]';var d=h;switch(i){case"style":d=lo(t);break;case"script":d=co(t)}Xn.has(d)||(t=w({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Xn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(zl(d))||i==="script"&&l.querySelector(Bl(d))||(i=l.createElement("link"),en(i,"link",t),Mt(i),l.head.appendChild(i)))}}function Iw(t,i){gs.m(t,i);var a=oo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+dn(l)+'"][href="'+dn(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=co(t)}if(!Xn.has(d)&&(t=w({rel:"modulepreload",href:t},i),Xn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(d)))return}l=a.createElement("link"),en(l,"link",t),Mt(l),a.head.appendChild(l)}}}function Nw(t,i,a){gs.S(t,i,a);var l=oo;if(l&&t){var h=Si(l).hoistableStyles,d=lo(t);i=i||"default";var v=h.get(d);if(!v){var b={loading:0,preload:null};if(v=l.querySelector(zl(d)))b.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Xn.get(d))&&Zd(t,a);var N=v=l.createElement("link");Mt(N),en(N,"link",t),N._p=new Promise(function(B,K){N.onload=B,N.onerror=K}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Fu(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(d,v)}}}function Dw(t,i){gs.X(t,i);var a=oo;if(a&&t){var l=Si(a).hoistableScripts,h=co(t),d=l.get(h);d||(d=a.querySelector(Bl(h)),d||(t=w({src:t,async:!0},i),(i=Xn.get(h))&&Wd(t,i),d=a.createElement("script"),Mt(d),en(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Ow(t,i){gs.M(t,i);var a=oo;if(a&&t){var l=Si(a).hoistableScripts,h=co(t),d=l.get(h);d||(d=a.querySelector(Bl(h)),d||(t=w({src:t,async:!0,type:"module"},i),(i=Xn.get(h))&&Wd(t,i),d=a.createElement("script"),Mt(d),en(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function e0(t,i,a,l){var h=(h=Ie.current)?Gu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=lo(a.href),a=Si(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=lo(a.href);var d=Si(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(zl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Xn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(t,a),d||Mw(h,t,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=co(a),a=Si(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function lo(t){return'href="'+dn(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function t0(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function Mw(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),en(i,"link",a),Mt(i),t.head.appendChild(i))}function co(t){return'[src="'+dn(t)+'"]'}function Bl(t){return"script[async]"+t}function n0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+dn(a.href)+'"]');if(l)return i.instance=l,Mt(l),l;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Mt(l),en(l,"style",h),Fu(l,a.precedence,t),i.instance=l;case"stylesheet":h=lo(a.href);var d=t.querySelector(zl(h));if(d)return i.state.loading|=4,i.instance=d,Mt(d),d;l=t0(a),(h=Xn.get(h))&&Zd(l,h),d=(t.ownerDocument||t).createElement("link"),Mt(d);var v=d;return v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),en(d,"link",l),i.state.loading|=4,Fu(d,a.precedence,t),i.instance=d;case"script":return d=co(a.src),(h=t.querySelector(Bl(d)))?(i.instance=h,Mt(h),h):(l=a,(h=Xn.get(d))&&(l=w({},a),Wd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Mt(h),en(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Fu(l,a.precedence,t));return i.instance}function Fu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var b=l[v];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Zd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Wd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ku=null;function i0(t,i,a){if(Ku===null){var l=new Map,h=Ku=new Map;h.set(a,l)}else h=Ku,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ai]||d[Ot]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var b=l.get(v);b?b.push(d):l.set(v,[d])}}return l}function s0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Vw(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function r0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function jw(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=lo(l.href),d=i.querySelector(zl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Yu.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Mt(d);return}d=i.ownerDocument||i,l=t0(l),(h=Xn.get(h))&&Zd(l,h),d=d.createElement("link"),Mt(d);var v=d;v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),en(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Yu.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var em=0;function kw(t,i){return t.stylesheets&&t.count===0&&Xu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Xu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&em===0&&(em=62500*pw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Xu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>em?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Yu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qu=null;function Xu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qu=new Map,i.forEach(Lw,t),Qu=null,Yu.call(t))}function Lw(t,i){if(!(i.state.loading&4)){var a=Qu.get(t);if(a)var l=a.get(null);else{a=new Map,Qu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Yu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var ql={$$typeof:le,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Uw(t,i,a,l,h,d,v,b,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function a0(t,i,a,l,h,d,v,b,N,B,K,J){return t=new Uw(t,i,a,v,N,B,K,J,b),i=1,d===!0&&(i|=24),d=Cn(3,null,null,i),t.current=d,d.stateNode=t,i=Mf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Lf(d),t}function o0(t){return t?(t=za,t):za}function l0(t,i,a,l,h,d){h=o0(h),l.context===null?l.context=h:l.pendingContext=h,l=$s(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Js(t,l,i),a!==null&&(vn(a,t,i),El(a,t,i))}function c0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function tm(t,i){c0(t,i),(t=t.alternate)&&c0(t,i)}function u0(t){if(t.tag===13||t.tag===31){var i=Xr(t,67108864);i!==null&&vn(i,t,67108864),tm(t,67108864)}}function h0(t){if(t.tag===13||t.tag===31){var i=On();i=Lr(i);var a=Xr(t,i);a!==null&&vn(a,t,i),tm(t,i)}}var $u=!0;function Pw(t,i,a,l){var h=j.T;j.T=null;var d=ee.p;try{ee.p=2,nm(t,i,a,l)}finally{ee.p=d,j.T=h}}function zw(t,i,a,l){var h=j.T;j.T=null;var d=ee.p;try{ee.p=8,nm(t,i,a,l)}finally{ee.p=d,j.T=h}}function nm(t,i,a,l){if($u){var h=im(l);if(h===null)qd(t,i,l,Ju,a),d0(t,l);else if(qw(h,t,i,a,l))l.stopPropagation();else if(d0(t,l),i&4&&-1<Bw.indexOf(t)){for(;h!==null;){var d=Un(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=vi(d.pendingLanes);if(v!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var N=1<<31-wt(v);b.entanglements[1]|=N,v&=~N}Ui(d),($e&6)===0&&(Mu=Ge()+500,kl(0))}}break;case 31:case 13:b=Xr(d,2),b!==null&&vn(b,d,2),ju(),tm(d,2)}if(d=im(l),d===null&&qd(t,i,l,Ju,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else qd(t,i,l,null,a)}}function im(t){return t=Pn(t),sm(t)}var Ju=null;function sm(t){if(Ju=null,t=wi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ju=t,null}function f0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case ft:return 2;case Qe:return 8;case Nt:case $i:return 32;case yi:return 268435456;default:return 32}default:return 32}}var rm=!1,lr=null,cr=null,ur=null,Hl=new Map,Gl=new Map,hr=[],Bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d0(t,i){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Hl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(i.pointerId)}}function Fl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Un(i),i!==null&&u0(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function qw(t,i,a,l,h){switch(i){case"focusin":return lr=Fl(lr,t,i,a,l,h),!0;case"dragenter":return cr=Fl(cr,t,i,a,l,h),!0;case"mouseover":return ur=Fl(ur,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Hl.set(d,Fl(Hl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Gl.set(d,Fl(Gl.get(d)||null,t,i,a,l,h)),!0}return!1}function m0(t){var i=wi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,ei(t.priority,function(){h0(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,ei(t.priority,function(){h0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=im(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);sl=l,a.target.dispatchEvent(l),sl=null}else return i=Un(a),i!==null&&u0(i),t.blockedOn=a,!1;i.shift()}return!0}function g0(t,i,a){Zu(t)&&a.delete(i)}function Hw(){rm=!1,lr!==null&&Zu(lr)&&(lr=null),cr!==null&&Zu(cr)&&(cr=null),ur!==null&&Zu(ur)&&(ur=null),Hl.forEach(g0),Gl.forEach(g0)}function Wu(t,i){t.blockedOn===i&&(t.blockedOn=null,rm||(rm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Hw)))}var eh=null;function p0(t){eh!==t&&(eh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){eh===t&&(eh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(sm(l||a)===null)continue;break}var d=Un(a);d!==null&&(t.splice(i,3),i-=3,id(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function uo(t){function i(N){return Wu(N,t)}lr!==null&&Wu(lr,t),cr!==null&&Wu(cr,t),ur!==null&&Wu(ur,t),Hl.forEach(i),Gl.forEach(i);for(var a=0;a<hr.length;a++){var l=hr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<hr.length&&(a=hr[0],a.blockedOn===null);)m0(a),a.blockedOn===null&&hr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Gt]||null;if(typeof d=="function")v||p0(a);else if(v){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Gt]||null)b=v.formAction;else if(sm(h)!==null)continue}else b=v.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),p0(a)}}}function y0(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function am(t){this._internalRoot=t}th.prototype.render=am.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=On();l0(a,l,t,i,null,null)},th.prototype.unmount=am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;l0(t.current,2,null,t,null,null),ju(),i[Ti]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var i=jc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<hr.length&&i!==0&&i<hr[a].priority;a++);hr.splice(a,0,t),a===0&&m0(t)}};var _0=e.version;if(_0!=="19.2.0")throw Error(r(527,_0,"19.2.0"));ee.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=_(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var Gw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{Zn=nh.inject(Gw),Xt=nh}catch{}}return Yl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=Sy,d=xy,v=Cy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=a0(t,1,!1,null,null,a,l,null,h,d,v,y0),t[Ti]=i.current,Bd(t),new am(i)},Yl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=Sy,v=xy,b=Cy,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=a0(t,1,!0,i,a??null,l,h,N,d,v,b,y0),i.context=o0(null),a=i.current,l=On(),l=Lr(l),h=$s(l),h.callback=null,Js(a,h,l),a=l,i.current.lanes=a,jr(i,a),Ui(i),t[Ti]=i.current,Bd(t),new th(i)},Yl.version="19.2.0",Yl}var R0;function tS(){if(R0)return cm.exports;R0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),cm.exports=eS(),cm.exports}var nS=tS();const iS=SE(nS);var _r=(s=>(s.ADMIN="ADMIN",s.EDITOR="EDITOR",s.READER="READER",s))(_r||{}),ut=(s=>(s.PDF="PDF",s.URL="URL",s.TEXT="TEXT",s.EMAIL="EMAIL",s.GOOGLE_DOC="GOOGLE_DOC",s))(ut||{});const tc=[{id:"strategy",label:"Strategie & Visie",subCategories:[{id:"yearplan",label:"Jaarplannen"},{id:"management",label:"Directie"},{id:"market",label:"Marktontwikkeling"}]},{id:"hr",label:"HR & Organisatie",subCategories:[{id:"handbook",label:"Handboek"},{id:"leave",label:"Verlof & Verzuim"},{id:"onboarding",label:"Onboarding"},{id:"wfh",label:"Thuiswerken"}]},{id:"marketing",label:"Marketing & Sales",subCategories:[{id:"branding",label:"Branding"},{id:"campaigns",label:"Campagnes"},{id:"products",label:"Productsheets"},{id:"scripts",label:"Sales Scripts"}]},{id:"tech",label:"IT & Development",subCategories:[{id:"security",label:"Security"},{id:"manuals",label:"Handleidingen"},{id:"stack",label:"Tech Stack"},{id:"protocols",label:"Protocollen"}]},{id:"projects",label:"Projecten",subCategories:[{id:"active",label:"Lopend"},{id:"finished",label:"Afgerond"},{id:"cases",label:"Case Studies"}]}],sS=()=>{};var I0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},rS=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],f=s[n++],m=s[n++],p=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const c=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},CE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],f=o+1<s.length,m=f?s[o+1]:0,p=o+2<s.length,_=p?s[o+2]:0,T=c>>2,w=(c&3)<<4|m>>4;let x=(m&15)<<2|_>>6,U=_&63;p||(U=64,f||(x=64)),r.push(n[T],n[w],n[x],n[U])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(xE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):rS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||m==null||_==null||w==null)throw new aS;const x=c<<2|m>>4;if(r.push(x),_!==64){const U=m<<4&240|_>>2;if(r.push(U),w!==64){const Y=_<<6&192|w;r.push(Y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class aS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oS=function(s){const e=xE(s);return CE.encodeByteArray(e,!0)},bh=function(s){return oS(s).replace(/\./g,"")},RE=function(s){try{return CE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=()=>lS().__FIREBASE_DEFAULTS__,uS=()=>{if(typeof process>"u"||typeof I0>"u")return;const s=I0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&RE(s[1]);return e&&JSON.parse(e)},qh=()=>{try{return sS()||cS()||uS()||hS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},IE=s=>{var e,n;return(n=(e=qh())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},fS=s=>{const e=IE(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},NE=()=>{var s;return(s=qh())==null?void 0:s.config},DE=s=>{var e;return(e=qh())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function OE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[bh(JSON.stringify(n)),bh(JSON.stringify(f)),""].join(".")}const nc={};function gS(){const s={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?s.emulator.push(e):s.prod.push(e);return s}function pS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let N0=!1;function ME(s,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||nc[s]===e||nc[s]||N0)return;nc[s]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",c=gS().prod.length>0;function f(){const x=document.getElementById(r);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,U){x.setAttribute("width","24"),x.setAttribute("id",U),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function _(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{N0=!0,f()},x}function T(x,U){x.setAttribute("id",U),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=pS(r),U=n("text"),Y=document.getElementById(U)||document.createElement("span"),te=n("learnmore"),W=document.getElementById(te)||document.createElement("a"),pe=n("preprendIcon"),ue=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const le=x.element;m(le),T(W,te);const Ae=_();p(ue,pe),le.append(ue,Y,W,Ae),document.body.appendChild(le)}c?(Y.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function _S(){var e;const s=(e=qh())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ES(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function bS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TS(){const s=un();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function AS(){return!_S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wS(){try{return typeof indexedDB=="object"}catch{return!1}}function SS(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="FirebaseError";class Cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xS,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vc.prototype.create)}}class vc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?CS(c,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Cs(o,m,r)}}function CS(s,e){return s.replace(RS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const RS=/\{\$([^}]+)}/g;function IS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ts(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=s[o],f=e[o];if(D0(c)&&D0(f)){if(!Ts(c,f))return!1}else if(c!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function D0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ql(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Xl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function NS(s,e){const n=new DS(s,e);return n.subscribe.bind(n)}class DS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=dm),o.error===void 0&&(o.error=dm),o.complete===void 0&&(o.complete=dm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(s){return s&&s._delegate?s._delegate:s}class ma{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jS(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VS(s){return s===la?void 0:s}function jS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pe||(Pe={}));const LS={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},US=Pe.INFO,PS={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},zS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=PS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ig{constructor(e){this.name=e,this._logLevel=US,this._logHandler=zS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const BS=(s,e)=>e.some(n=>s instanceof n);let O0,M0;function qS(){return O0||(O0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HS(){return M0||(M0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VE=new WeakMap,xm=new WeakMap,jE=new WeakMap,mm=new WeakMap,sg=new WeakMap;function GS(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(Er(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&VE.set(n,s)}).catch(()=>{}),sg.set(e,s),e}function FS(s){if(xm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});xm.set(s,e)}let Cm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return xm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||jE.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function KS(s){Cm=s(Cm)}function YS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(gm(this),e,...n);return jE.set(r,e.sort?e.sort():[e]),Er(r)}:HS().includes(s)?function(...e){return s.apply(gm(this),e),Er(VE.get(this))}:function(...e){return Er(s.apply(gm(this),e))}}function QS(s){return typeof s=="function"?YS(s):(s instanceof IDBTransaction&&FS(s),BS(s,qS())?new Proxy(s,Cm):s)}function Er(s){if(s instanceof IDBRequest)return GS(s);if(mm.has(s))return mm.get(s);const e=QS(s);return e!==s&&(mm.set(s,e),sg.set(e,s)),e}const gm=s=>sg.get(s);function XS(s,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const f=indexedDB.open(s,e),m=Er(f);return r&&f.addEventListener("upgradeneeded",p=>{r(Er(f.result),p.oldVersion,p.newVersion,Er(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const $S=["get","getKey","getAll","getAllKeys","count"],JS=["put","add","delete","clear"],pm=new Map;function V0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(pm.get(e))return pm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=JS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||$S.includes(n)))return;const c=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let _=p.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&p.done]))[0]};return pm.set(e,c),c}KS(s=>({...s,get:(e,n,r)=>V0(e,n)||s.get(e,n,r),has:(e,n)=>!!V0(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rm="@firebase/app",j0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new ig("@firebase/app"),ex="@firebase/app-compat",tx="@firebase/analytics-compat",nx="@firebase/analytics",ix="@firebase/app-check-compat",sx="@firebase/app-check",rx="@firebase/auth",ax="@firebase/auth-compat",ox="@firebase/database",lx="@firebase/data-connect",cx="@firebase/database-compat",ux="@firebase/functions",hx="@firebase/functions-compat",fx="@firebase/installations",dx="@firebase/installations-compat",mx="@firebase/messaging",gx="@firebase/messaging-compat",px="@firebase/performance",yx="@firebase/performance-compat",_x="@firebase/remote-config",vx="@firebase/remote-config-compat",Ex="@firebase/storage",bx="@firebase/storage-compat",Tx="@firebase/firestore",Ax="@firebase/ai",wx="@firebase/firestore-compat",Sx="firebase",xx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",Cx={[Rm]:"fire-core",[ex]:"fire-core-compat",[nx]:"fire-analytics",[tx]:"fire-analytics-compat",[sx]:"fire-app-check",[ix]:"fire-app-check-compat",[rx]:"fire-auth",[ax]:"fire-auth-compat",[ox]:"fire-rtdb",[lx]:"fire-data-connect",[cx]:"fire-rtdb-compat",[ux]:"fire-fn",[hx]:"fire-fn-compat",[fx]:"fire-iid",[dx]:"fire-iid-compat",[mx]:"fire-fcm",[gx]:"fire-fcm-compat",[px]:"fire-perf",[yx]:"fire-perf-compat",[_x]:"fire-rc",[vx]:"fire-rc-compat",[Ex]:"fire-gcs",[bx]:"fire-gcs-compat",[Tx]:"fire-fst",[wx]:"fire-fst-compat",[Ax]:"fire-vertex","fire-js":"fire-js",[Sx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map,Rx=new Map,Nm=new Map;function k0(s,e){try{s.container.addComponent(e)}catch(n){As.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Io(s){const e=s.name;if(Nm.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,s);for(const n of Th.values())k0(n,s);for(const n of Rx.values())k0(n,s);return!0}function rg(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function jn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new vc("app","Firebase",Ix);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=xx;function kE(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:Im,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw br.create("bad-app-name",{appName:String(o)});if(n||(n=NE()),!n)throw br.create("no-options");const c=Th.get(o);if(c){if(Ts(n,c.options)&&Ts(r,c.config))return c;throw br.create("duplicate-app",{appName:o})}const f=new kS(o);for(const p of Nm.values())f.addComponent(p);const m=new Nx(n,r,f);return Th.set(o,m),m}function LE(s=Im){const e=Th.get(s);if(!e&&s===Im&&NE())return kE();if(!e)throw br.create("no-app",{appName:s});return e}function Tr(s,e,n){let r=Cx[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(f.join(" "));return}Io(new ma(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="firebase-heartbeat-database",Ox=1,cc="firebase-heartbeat-store";let ym=null;function UE(){return ym||(ym=XS(Dx,Ox,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(cc)}catch(n){console.warn(n)}}}}).catch(s=>{throw br.create("idb-open",{originalErrorMessage:s.message})})),ym}async function Mx(s){try{const n=(await UE()).transaction(cc),r=await n.objectStore(cc).get(PE(s));return await n.done,r}catch(e){if(e instanceof Cs)As.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(n.message)}}}async function L0(s,e){try{const r=(await UE()).transaction(cc,"readwrite");await r.objectStore(cc).put(e,PE(s)),await r.done}catch(n){if(n instanceof Cs)As.warn(n.message);else{const r=br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});As.warn(r.message)}}}function PE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=1024,jx=30;class kx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ux(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=U0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>jx){const f=Px(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){As.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=U0(),{heartbeatsToSend:r,unsentEntries:o}=Lx(this._heartbeatsCache.heartbeats),c=bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return As.warn(n),""}}}function U0(){return new Date().toISOString().substring(0,10)}function Lx(s,e=Vx){const n=[];let r=s.slice();for(const o of s){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),P0(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ux{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wS()?SS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Mx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return L0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return L0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function P0(s){return bh(JSON.stringify({version:2,heartbeats:s})).length}function Px(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(s){Io(new ma("platform-logger",e=>new ZS(e),"PRIVATE")),Io(new ma("heartbeat",e=>new kx(e),"PRIVATE")),Tr(Rm,j0,s),Tr(Rm,j0,"esm2020"),Tr("fire-js","")}zx("");var Bx="firebase",qx="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(Bx,qx,"app");function zE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hx=zE,BE=new vc("auth","Firebase",zE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new ig("@firebase/auth");function Gx(s,...e){Ah.logLevel<=Pe.WARN&&Ah.warn(`Auth (${Po}): ${s}`,...e)}function uh(s,...e){Ah.logLevel<=Pe.ERROR&&Ah.error(`Auth (${Po}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(s,...e){throw og(s,...e)}function fi(s,...e){return og(s,...e)}function ag(s,e,n){const r={...Hx(),[e]:n};return new vc("auth","Firebase",r).create(e,{appName:s.name})}function Es(s){return ag(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fx(s,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jn(s,"argument-error"),ag(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function og(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return BE.create(s,...e)}function Ee(s,e,...n){if(!s)throw og(e,...n)}function ys(s){const e="INTERNAL ASSERTION FAILED: "+s;throw uh(e),new Error(e)}function ws(s,e){s||ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function Kx(){return z0()==="http:"||z0()==="https:"}function z0(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Kx()||ES()||"connection"in navigator)?navigator.onLine:!0}function Qx(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=yS()||bS()}get(){return Yx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(s,e){ws(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jx=new bc(3e4,6e4);function Rs(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Is(s,e,n,r,o={}){return HE(s,o,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const m=Ec({key:s.config.apiKey,...f}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:p,...c};return vS()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Uo(s.emulatorConfig.host)&&(_.credentials="include"),qE.fetch()(await GE(s,s.config.apiHost,n,m),_)})}async function HE(s,e,n){s._canInitEmulator=!1;const r={...Xx,...e};try{const o=new Wx(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw ih(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const m=c.ok?f.errorMessage:f.error.message,[p,_]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(s,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw ih(s,"email-already-in-use",f);if(p==="USER_DISABLED")throw ih(s,"user-disabled",f);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw ag(s,T,_);Jn(s,T)}}catch(o){if(o instanceof Cs)throw o;Jn(s,"network-request-failed",{message:String(o)})}}async function Tc(s,e,n,r,o={}){const c=await Is(s,e,n,r,o);return"mfaPendingCredential"in c&&Jn(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function GE(s,e,n,r){const o=`${e}${n}?${r}`,c=s,f=c.config.emulator?lg(s.config,o):`${s.config.apiScheme}://${o}`;return $x.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function Zx(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fi(this.auth,"network-request-failed")),Jx.get())})}}function ih(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=fi(s,e,r);return o.customData._tokenResponse=n,o}function B0(s){return s!==void 0&&s.enterprise!==void 0}class e1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Zx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function t1(s,e){return Is(s,"GET","/v2/recaptchaConfig",Rs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(s,e){return Is(s,"POST","/v1/accounts:delete",e)}async function wh(s,e){return Is(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function i1(s,e=!1){const n=Qt(s),r=await n.getIdToken(e),o=cg(r);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:ic(_m(o.auth_time)),issuedAtTime:ic(_m(o.iat)),expirationTime:ic(_m(o.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function _m(s){return Number(s)*1e3}function cg(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=RE(n);return o?JSON.parse(o):(uh("Failed to decode base64 JWT payload"),null)}catch(o){return uh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function q0(s){const e=cg(s);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cs&&s1(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function s1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(s){var w;const e=s.auth,n=await s.getIdToken(),r=await uc(s,wh(e,{idToken:n}));Ee(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const c=(w=o.providerUserInfo)!=null&&w.length?FE(o.providerUserInfo):[],f=o1(s.providerData,c),m=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),_=m?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Om(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,T)}async function a1(s){const e=Qt(s);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o1(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function FE(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(s,e){const n=await HE(s,{},async()=>{const r=Ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,f=await GE(s,o,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return s.emulatorConfig&&Uo(s.emulatorConfig.host)&&(p.credentials="include"),qE.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function c1(s,e){return Is(s,"POST","/v2/accounts:revokeToken",Rs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=q0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await l1(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,f=new To;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Ee(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(Ee(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(s,e){Ee(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class hi{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new r1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Om(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return i1(this,e)}reload(){return a1(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await uc(this,n1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,_=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:w,emailVerified:x,isAnonymous:U,providerData:Y,stsTokenManager:te}=n;Ee(w&&te,e,"internal-error");const W=To.fromJSON(this.name,te);Ee(typeof w=="string",e,"internal-error"),dr(r,e.name),dr(o,e.name),Ee(typeof x=="boolean",e,"internal-error"),Ee(typeof U=="boolean",e,"internal-error"),dr(c,e.name),dr(f,e.name),dr(m,e.name),dr(p,e.name),dr(_,e.name),dr(T,e.name);const pe=new hi({uid:w,auth:e,email:o,emailVerified:x,displayName:r,isAnonymous:U,photoURL:f,phoneNumber:c,tenantId:m,stsTokenManager:W,createdAt:_,lastLoginAt:T});return Y&&Array.isArray(Y)&&(pe.providerData=Y.map(ue=>({...ue}))),p&&(pe._redirectEventId=p),pe}static async _fromIdTokenResponse(e,n,r=!1){const o=new To;o.updateFromServerResponse(n);const c=new hi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Sh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?FE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new To;m.updateFromIdToken(r);const p=new hi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Om(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,_),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map;function _s(s){ws(s instanceof Function,"Expected a class definition");let e=H0.get(s);return e?(ws(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,H0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}KE.type="NONE";const G0=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(s,e,n){return`firebase:${s}:${e}:${n}`}class Ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=hh(this.userKey,o.apiKey,c),this.fullPersistenceKey=hh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wh(this.auth,{idToken:e}).catch(()=>{});return n?hi._fromGetAccountInfoResponse(this.auth,n,e):null}return hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ao(_s(G0),e,r);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||_s(G0);const f=hh(r,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const T=await _._get(f);if(T){let w;if(typeof T=="string"){const x=await wh(e,{idToken:T}).catch(()=>{});if(!x)break;w=await hi._fromGetAccountInfoResponse(e,x,T)}else w=hi._fromJSON(e,T);_!==c&&(m=w),c=_;break}}catch{}const p=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Ao(c,e,r):(c=p[0],m&&await c._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(f)}catch{}})),new Ao(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($E(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZE(e))return"Blackberry";if(WE(e))return"Webos";if(QE(e))return"Safari";if((e.includes("chrome/")||XE(e))&&!e.includes("edge/"))return"Chrome";if(JE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YE(s=un()){return/firefox\//i.test(s)}function QE(s=un()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XE(s=un()){return/crios\//i.test(s)}function $E(s=un()){return/iemobile/i.test(s)}function JE(s=un()){return/android/i.test(s)}function ZE(s=un()){return/blackberry/i.test(s)}function WE(s=un()){return/webos/i.test(s)}function ug(s=un()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function u1(s=un()){var e;return ug(s)&&!!((e=window.navigator)!=null&&e.standalone)}function h1(){return TS()&&document.documentMode===10}function eb(s=un()){return ug(s)||JE(s)||WE(s)||ZE(s)||/windows phone/i.test(s)||$E(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(s,e=[]){let n;switch(s){case"Browser":n=F0(un());break;case"Worker":n=`${F0(un())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((f,m)=>{try{const p=e(c);f(p)}catch(p){m(p)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(s,e={}){return Is(s,"GET","/v2/passwordPolicy",Rs(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=6;class g1{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??m1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K0(this),this.idTokenSubscription=new K0(this),this.beforeStateQueue=new f1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wh(this,{idToken:e}),r=await hi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(jn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Es(this));const n=e?Qt(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await d1(this),n=new g1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await c1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Gx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ns(s){return Qt(s)}class K0{constructor(e){this.auth=e,this.observer=null,this.addObserver=NS(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y1(s){Hh=s}function nb(s){return Hh.loadJS(s)}function _1(){return Hh.recaptchaEnterpriseScript}function v1(){return Hh.gapiScript}function E1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class b1{constructor(){this.enterprise=new T1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class T1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const A1="recaptcha-enterprise",ib="NO_RECAPTCHA";class w1{constructor(e){this.type=A1,this.auth=Ns(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,m)=>{t1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new e1(p);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,f(_.siteKey)}}).catch(p=>{m(p)})})}function o(c,f,m){const p=window.grecaptcha;B0(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(_=>{f(_)}).catch(()=>{f(ib)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new b1().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(m=>{if(!n&&B0(window.grecaptcha))o(m,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=_1();p.length!==0&&(p+=m),nb(p).then(()=>{o(m,c,f)}).catch(_=>{f(_)})}}).catch(m=>{f(m)})})}}async function Y0(s,e,n,r=!1,o=!1){const c=new w1(s);let f;if(o)f=ib;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function xh(s,e,n,r,o){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Y0(s,e,n,n==="getOobCode");return r(s,f)}else return r(s,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Y0(s,e,n,n==="getOobCode");return r(s,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(s,e){const n=rg(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Ts(c,e??{}))return o;Jn(o,"already-initialized")}return n.initialize({options:e})}function x1(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_s);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function C1(s,e,n){const r=Ns(s);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=sb(e),{host:f,port:m}=R1(e),p=m===null?"":`:${m}`,_={url:`${c}//${f}${p}/`},T=Object.freeze({host:f,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(Ts(_,r.config.emulator)&&Ts(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Uo(f)?(OE(`${c}//${f}${p}`),ME("Auth",!0)):I1()}function sb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function R1(s){const e=sb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:Q0(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:Q0(f)}}}function Q0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function I1(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,n){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}async function N1(s,e){return Is(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(s,e){return Tc(s,"POST","/v1/accounts:signInWithPassword",Rs(s,e))}async function O1(s,e){return Is(s,"POST","/v1/accounts:sendOobCode",Rs(s,e))}async function M1(s,e){return O1(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(s,e){return Tc(s,"POST","/v1/accounts:signInWithEmailLink",Rs(s,e))}async function j1(s,e){return Tc(s,"POST","/v1/accounts:signInWithEmailLink",Rs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends hg{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new hc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xh(e,n,"signInWithPassword",D1);case"emailLink":return V1(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xh(e,r,"signUpPassword",N1);case"emailLink":return j1(e,{idToken:n,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(s,e){return Tc(s,"POST","/v1/accounts:signInWithIdp",Rs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="http://localhost";class ga extends hg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const f=new ga(r,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return wo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wo(e,n)}buildRequest(){const e={requestUri:k1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ec(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function U1(s){const e=Ql(Xl(s)).link,n=e?Ql(Xl(e)).deep_link_id:null,r=Ql(Xl(s)).deep_link_id;return(r?Ql(Xl(r)).link:null)||r||n||e||s}class fg{constructor(e){const n=Ql(Xl(e)),r=n.apiKey??null,o=n.oobCode??null,c=L1(n.mode??null);Ee(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=U1(e);try{return new fg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return hc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fg.parseLink(n);return Ee(r,"argument-error"),hc._fromEmailAndCode(e,r.code,r.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends dg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Ac{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ga._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ps.credential(n,r)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Ac{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Ac{constructor(){super("twitter.com")}static credential(e,n){return ga._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(s,e){return Tc(s,"POST","/v1/accounts:signUp",Rs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await hi._fromIdTokenResponse(e,r,o),f=X0(r);return new pa({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=X0(r);return new pa({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function X0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Cs{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Ch(e,n,r,o)}}function rb(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(s,c,e,r):c})}async function z1(s,e,n=!1){const r=await uc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return pa._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(s,e,n=!1){const{auth:r}=s;if(jn(r.app))return Promise.reject(Es(r));const o="reauthenticate";try{const c=await uc(s,rb(r,o,e,s),n);Ee(c.idToken,r,"internal-error");const f=cg(c.idToken);Ee(f,r,"internal-error");const{sub:m}=f;return Ee(s.uid===m,r,"user-mismatch"),pa._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Jn(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(s,e,n=!1){if(jn(s.app))return Promise.reject(Es(s));const r="signIn",o=await rb(s,r,e),c=await pa._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(c.user),c}async function q1(s,e){return ab(Ns(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(s){const e=Ns(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function H1(s,e,n){const r=Ns(s);await xh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",M1)}async function G1(s,e,n){if(jn(s.app))return Promise.reject(Es(s));const r=Ns(s),f=await xh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&ob(s),p}),m=await pa._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function F1(s,e,n){return jn(s.app)?Promise.reject(Es(s)):q1(Qt(s),zo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ob(s),r})}function K1(s,e,n,r){return Qt(s).onIdTokenChanged(e,n,r)}function Y1(s,e,n){return Qt(s).beforeAuthStateChanged(e,n)}function Q1(s,e,n,r){return Qt(s).onAuthStateChanged(e,n,r)}function X1(s){return Qt(s).signOut()}const Rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rh,"1"),this.storage.removeItem(Rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=1e3,J1=10;class cb extends lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);h1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,J1):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cb.type="LOCAL";const Z1=cb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ub.type="SESSION";const hb=ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async _=>_(n.origin,c)),p=await W1(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((m,p)=>{const _=mg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(w){const x=w;if(x.data.eventId===_)switch(x.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(x.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function tC(s){zi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function nC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iC(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function sC(){return fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebaseLocalStorageDb",rC=1,Ih="firebaseLocalStorage",mb="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fh(s,e){return s.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function aC(){const s=indexedDB.deleteDatabase(db);return new wc(s).toPromise()}function Mm(){const s=indexedDB.open(db,rC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Ih,{keyPath:mb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Ih)?e(r):(r.close(),await aC(),e(await Mm()))})})}async function $0(s,e,n){const r=Fh(s,!0).put({[mb]:e,value:n});return new wc(r).toPromise()}async function oC(s,e){const n=Fh(s,!1).get(e),r=await new wc(n).toPromise();return r===void 0?null:r.value}function J0(s,e){const n=Fh(s,!0).delete(e);return new wc(n).toPromise()}const lC=800,cC=3;class gb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(sC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await nC(),!this.activeServiceWorker)return;this.sender=new eC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await $0(e,Rh,"1"),await J0(e,Rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>J0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Fh(o,!1).getAll();return new wc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gb.type="LOCAL";const uC=gb;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(s,e){return e?_s(e):(Ee(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends hg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hC(s){return ab(s.auth,new gg(s),s.bypassAuthState)}function fC(s){const{auth:e,user:n}=s;return Ee(n,e,"internal-error"),B1(n,new gg(s),s.bypassAuthState)}async function dC(s){const{auth:e,user:n}=s;return Ee(n,e,"internal-error"),z1(n,new gg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hC;case"linkViaPopup":case"linkViaRedirect":return dC;case"reauthViaPopup":case"reauthViaRedirect":return fC;default:Jn(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new bc(2e3,1e4);async function gC(s,e,n){if(jn(s.app))return Promise.reject(fi(s,"operation-not-supported-in-this-environment"));const r=Ns(s);Fx(s,e,dg);const o=pb(r,n);return new ha(r,"signInViaPopup",e,o).executeNotNull()}class ha extends yb{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mC.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="pendingRedirect",fh=new Map;class yC extends yb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const r=await _C(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _C(s,e){const n=bC(e),r=EC(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function vC(s,e){fh.set(s._key(),e)}function EC(s){return _s(s._redirectPersistence)}function bC(s){return hh(pC,s.config.apiKey,s.name)}async function TC(s,e,n=!1){if(jn(s.app))return Promise.reject(Es(s));const r=Ns(s),o=pb(r,e),f=await new yC(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=600*1e3;class wC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_b(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(fi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}}function Z0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function _b({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _b(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(s,e={}){return Is(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RC=/^https?/;async function IC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await xC(s);for(const n of e)try{if(NC(n))return}catch{}Jn(s,"unauthorized-domain")}function NC(s){const e=Dm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!RC.test(n))return!1;if(CC.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new bc(3e4,6e4);function W0(){const s=zi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function OC(s){return new Promise((e,n)=>{var o,c,f;function r(){W0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W0(),n(fi(s,"network-request-failed"))},timeout:DC.get()})}if((c=(o=zi().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((f=zi().gapi)!=null&&f.load)r();else{const m=E1("iframefcb");return zi()[m]=()=>{gapi.load?r():n(fi(s,"network-request-failed"))},nb(`${v1()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw dh=null,e})}let dh=null;function MC(s){return dh=dh||OC(s),dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new bc(5e3,15e3),jC="__/auth/iframe",kC="emulator/auth/iframe",LC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PC(s){const e=s.config;Ee(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?lg(e,kC):`https://${s.config.authDomain}/${jC}`,r={apiKey:e.apiKey,appName:s.name,v:Po},o=UC.get(s.config.apiHost);o&&(r.eid=o);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Ec(r).slice(1)}`}async function zC(s){const e=await MC(s),n=zi().gapi;return Ee(n,s,"internal-error"),e.open({where:document.body,url:PC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LC,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const f=fi(s,"network-request-failed"),m=zi().setTimeout(()=>{c(f)},VC.get());function p(){zi().clearTimeout(m),o(r)}r.ping(p).then(p,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qC=500,HC=600,GC="_blank",FC="http://localhost";class ev{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KC(s,e,n,r=qC,o=HC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p={...BC,width:r.toString(),height:o.toString(),top:c,left:f},_=un().toLowerCase();n&&(m=XE(_)?GC:n),YE(_)&&(e=e||FC,p.scrollbars="yes");const T=Object.entries(p).reduce((x,[U,Y])=>`${x}${U}=${Y},`,"");if(u1(_)&&m!=="_self")return YC(e||"",m),new ev(null);const w=window.open(e||"",m,T);Ee(w,s,"popup-blocked");try{w.focus()}catch{}return new ev(w)}function YC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="__/auth/handler",XC="emulator/auth/handler",$C=encodeURIComponent("fac");async function tv(s,e,n,r,o,c){Ee(s.config.authDomain,s,"auth-domain-config-required"),Ee(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:Po,eventId:o};if(e instanceof dg){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",IS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,w]of Object.entries({}))f[T]=w}if(e instanceof Ac){const T=e.getScopes().filter(w=>w!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await s._getAppCheckToken(),_=p?`#${$C}=${encodeURIComponent(p)}`:"";return`${JC(s)}?${Ec(m).slice(1)}${_}`}function JC({config:s}){return s.emulator?lg(s,XC):`https://${s.authDomain}/${QC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="webStorageSupport";class ZC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hb,this._completeRedirectFn=TC,this._overrideRedirectResult=vC}async _openPopup(e,n,r,o){var f;ws((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const c=await tv(e,n,r,Dm(),o);return KC(e,c,mg())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await tv(e,n,r,Dm(),o);return tC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(ws(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zC(e),r=new wC(e);return n.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vm,{type:vm},o=>{var f;const c=(f=o==null?void 0:o[0])==null?void 0:f[vm];c!==void 0&&n(!!c),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eb()||QE()||ug()}}const WC=ZC;var nv="@firebase/auth",iv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nR(s){Io(new ma("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;Ee(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tb(s)},_=new p1(r,o,c,p);return x1(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Io(new ma("auth-internal",e=>{const n=Ns(e.getProvider("auth").getImmediate());return(r=>new eR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(nv,iv,tR(s)),Tr(nv,iv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=300,sR=DE("authIdTokenMaxAge")||iR;let sv=null;const rR=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sR)return;const o=n==null?void 0:n.token;sv!==o&&(sv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function aR(s=LE()){const e=rg(s,"auth");if(e.isInitialized())return e.getImmediate();const n=S1(s,{popupRedirectResolver:WC,persistence:[uC,Z1,hb]}),r=DE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=rR(c.toString());Y1(n,f,()=>f(n.currentUser)),K1(n,m=>f(m))}}const o=IE("auth");return o&&C1(n,`http://${o}`),n}function oR(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}y1({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const c=fi("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",oR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nR("Browser");var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,vb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function C(){}C.prototype=S.prototype,R.F=S.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(V,D,k){for(var I=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)I[Je-2]=arguments[Je];return S.prototype[D].apply(V,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,S,C){C||(C=0);const V=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)V[D]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(D=0;D<16;++D)V[D]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=R.g[0],C=R.g[1],D=R.g[2];let k=R.g[3],I;I=S+(k^C&(D^k))+V[0]+3614090360&4294967295,S=C+(I<<7&4294967295|I>>>25),I=k+(D^S&(C^D))+V[1]+3905402710&4294967295,k=S+(I<<12&4294967295|I>>>20),I=D+(C^k&(S^C))+V[2]+606105819&4294967295,D=k+(I<<17&4294967295|I>>>15),I=C+(S^D&(k^S))+V[3]+3250441966&4294967295,C=D+(I<<22&4294967295|I>>>10),I=S+(k^C&(D^k))+V[4]+4118548399&4294967295,S=C+(I<<7&4294967295|I>>>25),I=k+(D^S&(C^D))+V[5]+1200080426&4294967295,k=S+(I<<12&4294967295|I>>>20),I=D+(C^k&(S^C))+V[6]+2821735955&4294967295,D=k+(I<<17&4294967295|I>>>15),I=C+(S^D&(k^S))+V[7]+4249261313&4294967295,C=D+(I<<22&4294967295|I>>>10),I=S+(k^C&(D^k))+V[8]+1770035416&4294967295,S=C+(I<<7&4294967295|I>>>25),I=k+(D^S&(C^D))+V[9]+2336552879&4294967295,k=S+(I<<12&4294967295|I>>>20),I=D+(C^k&(S^C))+V[10]+4294925233&4294967295,D=k+(I<<17&4294967295|I>>>15),I=C+(S^D&(k^S))+V[11]+2304563134&4294967295,C=D+(I<<22&4294967295|I>>>10),I=S+(k^C&(D^k))+V[12]+1804603682&4294967295,S=C+(I<<7&4294967295|I>>>25),I=k+(D^S&(C^D))+V[13]+4254626195&4294967295,k=S+(I<<12&4294967295|I>>>20),I=D+(C^k&(S^C))+V[14]+2792965006&4294967295,D=k+(I<<17&4294967295|I>>>15),I=C+(S^D&(k^S))+V[15]+1236535329&4294967295,C=D+(I<<22&4294967295|I>>>10),I=S+(D^k&(C^D))+V[1]+4129170786&4294967295,S=C+(I<<5&4294967295|I>>>27),I=k+(C^D&(S^C))+V[6]+3225465664&4294967295,k=S+(I<<9&4294967295|I>>>23),I=D+(S^C&(k^S))+V[11]+643717713&4294967295,D=k+(I<<14&4294967295|I>>>18),I=C+(k^S&(D^k))+V[0]+3921069994&4294967295,C=D+(I<<20&4294967295|I>>>12),I=S+(D^k&(C^D))+V[5]+3593408605&4294967295,S=C+(I<<5&4294967295|I>>>27),I=k+(C^D&(S^C))+V[10]+38016083&4294967295,k=S+(I<<9&4294967295|I>>>23),I=D+(S^C&(k^S))+V[15]+3634488961&4294967295,D=k+(I<<14&4294967295|I>>>18),I=C+(k^S&(D^k))+V[4]+3889429448&4294967295,C=D+(I<<20&4294967295|I>>>12),I=S+(D^k&(C^D))+V[9]+568446438&4294967295,S=C+(I<<5&4294967295|I>>>27),I=k+(C^D&(S^C))+V[14]+3275163606&4294967295,k=S+(I<<9&4294967295|I>>>23),I=D+(S^C&(k^S))+V[3]+4107603335&4294967295,D=k+(I<<14&4294967295|I>>>18),I=C+(k^S&(D^k))+V[8]+1163531501&4294967295,C=D+(I<<20&4294967295|I>>>12),I=S+(D^k&(C^D))+V[13]+2850285829&4294967295,S=C+(I<<5&4294967295|I>>>27),I=k+(C^D&(S^C))+V[2]+4243563512&4294967295,k=S+(I<<9&4294967295|I>>>23),I=D+(S^C&(k^S))+V[7]+1735328473&4294967295,D=k+(I<<14&4294967295|I>>>18),I=C+(k^S&(D^k))+V[12]+2368359562&4294967295,C=D+(I<<20&4294967295|I>>>12),I=S+(C^D^k)+V[5]+4294588738&4294967295,S=C+(I<<4&4294967295|I>>>28),I=k+(S^C^D)+V[8]+2272392833&4294967295,k=S+(I<<11&4294967295|I>>>21),I=D+(k^S^C)+V[11]+1839030562&4294967295,D=k+(I<<16&4294967295|I>>>16),I=C+(D^k^S)+V[14]+4259657740&4294967295,C=D+(I<<23&4294967295|I>>>9),I=S+(C^D^k)+V[1]+2763975236&4294967295,S=C+(I<<4&4294967295|I>>>28),I=k+(S^C^D)+V[4]+1272893353&4294967295,k=S+(I<<11&4294967295|I>>>21),I=D+(k^S^C)+V[7]+4139469664&4294967295,D=k+(I<<16&4294967295|I>>>16),I=C+(D^k^S)+V[10]+3200236656&4294967295,C=D+(I<<23&4294967295|I>>>9),I=S+(C^D^k)+V[13]+681279174&4294967295,S=C+(I<<4&4294967295|I>>>28),I=k+(S^C^D)+V[0]+3936430074&4294967295,k=S+(I<<11&4294967295|I>>>21),I=D+(k^S^C)+V[3]+3572445317&4294967295,D=k+(I<<16&4294967295|I>>>16),I=C+(D^k^S)+V[6]+76029189&4294967295,C=D+(I<<23&4294967295|I>>>9),I=S+(C^D^k)+V[9]+3654602809&4294967295,S=C+(I<<4&4294967295|I>>>28),I=k+(S^C^D)+V[12]+3873151461&4294967295,k=S+(I<<11&4294967295|I>>>21),I=D+(k^S^C)+V[15]+530742520&4294967295,D=k+(I<<16&4294967295|I>>>16),I=C+(D^k^S)+V[2]+3299628645&4294967295,C=D+(I<<23&4294967295|I>>>9),I=S+(D^(C|~k))+V[0]+4096336452&4294967295,S=C+(I<<6&4294967295|I>>>26),I=k+(C^(S|~D))+V[7]+1126891415&4294967295,k=S+(I<<10&4294967295|I>>>22),I=D+(S^(k|~C))+V[14]+2878612391&4294967295,D=k+(I<<15&4294967295|I>>>17),I=C+(k^(D|~S))+V[5]+4237533241&4294967295,C=D+(I<<21&4294967295|I>>>11),I=S+(D^(C|~k))+V[12]+1700485571&4294967295,S=C+(I<<6&4294967295|I>>>26),I=k+(C^(S|~D))+V[3]+2399980690&4294967295,k=S+(I<<10&4294967295|I>>>22),I=D+(S^(k|~C))+V[10]+4293915773&4294967295,D=k+(I<<15&4294967295|I>>>17),I=C+(k^(D|~S))+V[1]+2240044497&4294967295,C=D+(I<<21&4294967295|I>>>11),I=S+(D^(C|~k))+V[8]+1873313359&4294967295,S=C+(I<<6&4294967295|I>>>26),I=k+(C^(S|~D))+V[15]+4264355552&4294967295,k=S+(I<<10&4294967295|I>>>22),I=D+(S^(k|~C))+V[6]+2734768916&4294967295,D=k+(I<<15&4294967295|I>>>17),I=C+(k^(D|~S))+V[13]+1309151649&4294967295,C=D+(I<<21&4294967295|I>>>11),I=S+(D^(C|~k))+V[4]+4149444226&4294967295,S=C+(I<<6&4294967295|I>>>26),I=k+(C^(S|~D))+V[11]+3174756917&4294967295,k=S+(I<<10&4294967295|I>>>22),I=D+(S^(k|~C))+V[2]+718787259&4294967295,D=k+(I<<15&4294967295|I>>>17),I=C+(k^(D|~S))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+k&4294967295}r.prototype.v=function(R,S){S===void 0&&(S=R.length);const C=S-this.blockSize,V=this.C;let D=this.h,k=0;for(;k<S;){if(D==0)for(;k<=C;)o(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<S;)if(V[D++]=R.charCodeAt(k++),D==this.blockSize){o(this,V),D=0;break}}else for(;k<S;)if(V[D++]=R[k++],D==this.blockSize){o(this,V),D=0;break}}this.h=D,this.o+=S},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)R[S++]=this.g[C]>>>V&255;return R};function c(R,S){var C=m;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=S(R)}function f(R,S){this.h=S;const C=[];let V=!0;for(let D=R.length-1;D>=0;D--){const k=R[D]|0;V&&k==S||(C[D]=k,V=!1)}this.g=C}var m={};function p(R){return-128<=R&&R<128?c(R,function(S){return new f([S|0],S<0?-1:0)}):new f([R|0],R<0?-1:0)}function _(R){if(isNaN(R)||!isFinite(R))return w;if(R<0)return W(_(-R));const S=[];let C=1;for(let V=0;R>=C;V++)S[V]=R/C|0,C*=4294967296;return new f(S,0)}function T(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return W(T(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(S,8));let V=w;for(let k=0;k<R.length;k+=8){var D=Math.min(8,R.length-k);const I=parseInt(R.substring(k,k+D),S);D<8?(D=_(Math.pow(S,D)),V=V.j(D).add(_(I))):(V=V.j(C),V=V.add(_(I)))}return V}var w=p(0),x=p(1),U=p(16777216);s=f.prototype,s.m=function(){if(te(this))return-W(this).m();let R=0,S=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);R+=(V>=0?V:4294967296+V)*S,S*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(Y(this))return"0";if(te(this))return"-"+W(this).toString(R);const S=_(Math.pow(R,6));var C=this;let V="";for(;;){const D=Ae(C,S).g;C=pe(C,D.j(S));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=D,Y(C))return k+V;for(;k.length<6;)k="0"+k;V=k+V}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function Y(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function te(R){return R.h==-1}s.l=function(R){return R=pe(this,R),te(R)?-1:Y(R)?0:1};function W(R){const S=R.g.length,C=[];for(let V=0;V<S;V++)C[V]=~R.g[V];return new f(C,~R.h).add(x)}s.abs=function(){return te(this)?W(this):this},s.add=function(R){const S=Math.max(this.g.length,R.g.length),C=[];let V=0;for(let D=0;D<=S;D++){let k=V+(this.i(D)&65535)+(R.i(D)&65535),I=(k>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);V=I>>>16,k&=65535,I&=65535,C[D]=I<<16|k}return new f(C,C[C.length-1]&-2147483648?-1:0)};function pe(R,S){return R.add(W(S))}s.j=function(R){if(Y(this)||Y(R))return w;if(te(this))return te(R)?W(this).j(W(R)):W(W(this).j(R));if(te(R))return W(this.j(W(R)));if(this.l(U)<0&&R.l(U)<0)return _(this.m()*R.m());const S=this.g.length+R.g.length,C=[];for(var V=0;V<2*S;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<R.g.length;D++){const k=this.i(V)>>>16,I=this.i(V)&65535,Je=R.i(D)>>>16,yt=R.i(D)&65535;C[2*V+2*D]+=I*yt,ue(C,2*V+2*D),C[2*V+2*D+1]+=k*yt,ue(C,2*V+2*D+1),C[2*V+2*D+1]+=I*Je,ue(C,2*V+2*D+1),C[2*V+2*D+2]+=k*Je,ue(C,2*V+2*D+2)}for(R=0;R<S;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=S;R<2*S;R++)C[R]=0;return new f(C,0)};function ue(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function le(R,S){this.g=R,this.h=S}function Ae(R,S){if(Y(S))throw Error("division by zero");if(Y(R))return new le(w,w);if(te(R))return S=Ae(W(R),S),new le(W(S.g),W(S.h));if(te(S))return S=Ae(R,W(S)),new le(W(S.g),S.h);if(R.g.length>30){if(te(R)||te(S))throw Error("slowDivide_ only works with positive integers.");for(var C=x,V=S;V.l(R)<=0;)C=me(C),V=me(V);var D=ne(C,1),k=ne(V,1);for(V=ne(V,2),C=ne(C,2);!Y(V);){var I=k.add(V);I.l(R)<=0&&(D=D.add(C),k=I),V=ne(V,1),C=ne(C,1)}return S=pe(R,D.j(S)),new le(D,S)}for(D=w;R.l(S)>=0;){for(C=Math.max(1,Math.floor(R.m()/S.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),k=_(C),I=k.j(S);te(I)||I.l(R)>0;)C-=V,k=_(C),I=k.j(S);Y(k)&&(k=x),D=D.add(k),R=pe(R,I)}return new le(D,R)}s.B=function(R){return Ae(this,R).h},s.and=function(R){const S=Math.max(this.g.length,R.g.length),C=[];for(let V=0;V<S;V++)C[V]=this.i(V)&R.i(V);return new f(C,this.h&R.h)},s.or=function(R){const S=Math.max(this.g.length,R.g.length),C=[];for(let V=0;V<S;V++)C[V]=this.i(V)|R.i(V);return new f(C,this.h|R.h)},s.xor=function(R){const S=Math.max(this.g.length,R.g.length),C=[];for(let V=0;V<S;V++)C[V]=this.i(V)^R.i(V);return new f(C,this.h^R.h)};function me(R){const S=R.g.length+1,C=[];for(let V=0;V<S;V++)C[V]=R.i(V)<<1|R.i(V-1)>>>31;return new f(C,R.h)}function ne(R,S){const C=S>>5;S%=32;const V=R.g.length-C,D=[];for(let k=0;k<V;k++)D[k]=S>0?R.i(k+C)>>>S|R.i(k+C+1)<<32-S:R.i(k+C);return new f(D,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,vb=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=T,Ar=f}).apply(typeof rv<"u"?rv:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eb,$l,bb,mh,Vm,Tb,Ab,wb;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var g=0;g<u.length;++g){var E=u[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function o(u,g){if(g)e:{var E=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var P=u[A];if(!(P in E))break e;E=E[P]}u=u[u.length-1],A=E[u],g=g(A),g!=A&&g!=null&&e(E,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var E=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&E.push([A,g[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,E){return u.call.apply(u.bind,arguments)}function _(u,g,E){return _=p,_.apply(null,arguments)}function T(u,g){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function w(u,g){function E(){}E.prototype=g.prototype,u.Z=g.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(A,P,H){for(var ie=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ie[Ne-2]=arguments[Ne];return g.prototype[P].apply(A,ie)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function U(u){const g=u.length;if(g>0){const E=Array(g);for(let A=0;A<g;A++)E[A]=u[A];return E}return[]}function Y(u,g){for(let A=1;A<arguments.length;A++){const P=arguments[A];var E=typeof P;if(E=E!="object"?E:P?Array.isArray(P)?"array":E:"null",E=="array"||E=="object"&&typeof P.length=="number"){E=u.length||0;const H=P.length||0;u.length=E+H;for(let ie=0;ie<H;ie++)u[E+ie]=P[ie]}else u.push(P)}}class te{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function W(u){f.setTimeout(()=>{throw u},0)}function pe(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ue{constructor(){this.h=this.g=null}add(g,E){const A=le.get();A.set(g,E),this.h?this.h.next=A:this.g=A,this.h=A}}var le=new te(()=>new Ae,u=>u.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ne=!1,R=new ue,S=()=>{const u=Promise.resolve(void 0);me=()=>{u.then(C)}};function C(){for(var u;u=pe();){try{u.h.call(u.g)}catch(E){W(E)}var g=le;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ne=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};f.addEventListener("test",E,g),f.removeEventListener("test",E,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function Je(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}w(Je,D),Je.prototype.init=function(u,g){const E=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(E=="mouseover"?g=u.fromElement:E=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Je.Z.h.call(this)},Je.prototype.h=function(){Je.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),j=0;function ee(u,g,E,A,P){this.listener=u,this.proxy=null,this.src=g,this.type=E,this.capture=!!A,this.ha=P,this.key=++j,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function we(u,g,E){for(const A in u)g.call(E,u[A],A,u)}function xe(u,g){for(const E in u)g.call(void 0,u[E],E,u)}function M(u){const g={};for(const E in u)g[E]=u[E];return g}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,g){let E,A;for(let P=1;P<arguments.length;P++){A=arguments[P];for(E in A)u[E]=A[E];for(let H=0;H<$.length;H++)E=$[H],Object.prototype.hasOwnProperty.call(A,E)&&(u[E]=A[E])}}function oe(u){this.src=u,this.g={},this.h=0}oe.prototype.add=function(u,g,E,A,P){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ie=Ie(u,g,A,P);return ie>-1?(g=u[ie],E||(g.fa=!1)):(g=new ee(g,this.src,H,!!A,P),g.fa=E,u.push(g)),g};function Te(u,g){const E=g.type;if(E in u.g){var A=u.g[E],P=Array.prototype.indexOf.call(A,g,void 0),H;(H=P>=0)&&Array.prototype.splice.call(A,P,1),H&&(re(g),u.g[E].length==0&&(delete u.g[E],u.h--))}}function Ie(u,g,E,A){for(let P=0;P<u.length;++P){const H=u[P];if(!H.da&&H.listener==g&&H.capture==!!E&&H.ha==A)return P}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),At={};function lt(u,g,E,A,P){if(Array.isArray(g)){for(let H=0;H<g.length;H++)lt(u,g[H],E,A,P);return null}return E=Ms(E),u&&u[yt]?u.J(g,E,m(A)?!!A.capture:!1,P):gi(u,g,E,!1,A,P)}function gi(u,g,E,A,P,H){if(!g)throw Error("Invalid event type");const ie=m(P)?!!P.capture:!!P;let Ne=pi(u);if(Ne||(u[Me]=Ne=new oe(u)),E=Ne.add(g,E,A,ie,H),E.proxy)return E;if(A=Yi(),E.proxy=A,A.src=u,A.listener=E,u.addEventListener)k||(P=ie),P===void 0&&(P=!1),u.addEventListener(g.toString(),A,P);else if(u.attachEvent)u.attachEvent(An(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Yi(){function u(E){return g.call(u.src,u.listener,E)}const g=Ds;return u}function Qi(u,g,E,A,P){if(Array.isArray(g))for(var H=0;H<g.length;H++)Qi(u,g[H],E,A,P);else A=m(A)?!!A.capture:!!A,E=Ms(E),u&&u[yt]?(u=u.i,H=String(g).toString(),H in u.g&&(g=u.g[H],E=Ie(g,E,A,P),E>-1&&(re(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete u.g[H],u.h--)))):u&&(u=pi(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ie(g,E,A,P)),(E=u>-1?g[u]:null)&&Xi(E))}function Xi(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[yt])Te(g.i,u);else{var E=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(E,A,u.capture):g.detachEvent?g.detachEvent(An(E),A):g.addListener&&g.removeListener&&g.removeListener(A),(E=pi(g))?(Te(E,u),E.h==0&&(E.src=null,g[Me]=null)):re(u)}}}function An(u){return u in At?At[u]:At[u]="on"+u}function Ds(u,g){if(u.da)u=!0;else{g=new Je(g,this);const E=u.listener,A=u.ha||u.src;u.fa&&Xi(u),u=E.call(A,g)}return u}function pi(u){return u=u[Me],u instanceof oe?u:null}var Os="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ms(u){return typeof u=="function"?u:(u[Os]||(u[Os]=function(g){return u.handleEvent(g)}),u[Os])}function F(){V.call(this),this.i=new oe(this),this.M=this,this.G=null}w(F,V),F.prototype[yt]=!0,F.prototype.removeEventListener=function(u,g,E,A){Qi(this,u,g,E,A)};function de(u,g){var E,A=u.G;if(A)for(E=[];A;A=A.G)E.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var P=g;g=new D(A,u),se(g,P)}P=!0;let H,ie;if(E)for(ie=E.length-1;ie>=0;ie--)H=g.g=E[ie],P=ke(H,A,!0,g)&&P;if(H=g.g=u,P=ke(H,A,!0,g)&&P,P=ke(H,A,!1,g)&&P,E)for(ie=0;ie<E.length;ie++)H=g.g=E[ie],P=ke(H,A,!1,g)&&P}F.prototype.N=function(){if(F.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const E=u.g[g];for(let A=0;A<E.length;A++)re(E[A]);delete u.g[g],u.h--}}this.G=null},F.prototype.J=function(u,g,E,A){return this.i.add(String(u),g,!1,E,A)},F.prototype.K=function(u,g,E,A){return this.i.add(String(u),g,!0,E,A)};function ke(u,g,E,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let P=!0;for(let H=0;H<g.length;++H){const ie=g[H];if(ie&&!ie.da&&ie.capture==E){const Ne=ie.listener,St=ie.ha||ie.src;ie.fa&&Te(u.i,ie),P=Ne.call(St,A)!==!1&&P}}return P&&!A.defaultPrevented}function We(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function it(u){u.g=We(()=>{u.g=null,u.i&&(u.i=!1,it(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ge extends V{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(u){V.call(this),this.h=u,this.g={}}w(Ye,V);var ft=[];function Qe(u){we(u.g,function(g,E){this.g.hasOwnProperty(E)&&Xi(g)},u),u.g={}}Ye.prototype.N=function(){Ye.Z.N.call(this),Qe(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=f.JSON.stringify,$i=f.JSON.parse,yi=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Vs(){}function js(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){D.call(this,"d")}w(Xt,D);function Ln(){D.call(this,"c")}w(Ln,D);var wt={},Oc=null;function wa(){return Oc=Oc||new F}wt.Ia="serverreachability";function Mc(u){D.call(this,wt.Ia,u)}w(Mc,D);function _i(u){const g=wa();de(g,new Mc(g))}wt.STAT_EVENT="statevent";function Vr(u,g){D.call(this,wt.STAT_EVENT,u),this.stat=g}w(Vr,D);function Dt(u){const g=wa();de(g,new Vr(g,u))}wt.Ja="timingevent";function vi(u,g){D.call(this,wt.Ja,u),this.size=g}w(vi,D);function Ei(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function hf(u,g,E,A,P,H){u.info(function(){if(u.g)if(H){var ie="",Ne=H.split("&");for(let Xe=0;Xe<Ne.length;Xe++){var St=Ne[Xe].split("=");if(St.length>1){const _t=St[0];St=St[1];const Bn=_t.split("_");ie=Bn.length>=2&&Bn[1]=="type"?ie+(_t+"="+St+"&"):ie+(_t+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+A+") [attempt "+P+"]: "+g+`
`+E+`
`+ie})}function Vc(u,g,E,A,P,H,ie){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+P+"]: "+g+`
`+E+`
`+H+" "+ie})}function bi(u,g,E,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ff(u,E)+(A?" "+A:"")})}function jr(u,g){u.info(function(){return"TIMEOUT: "+g})}Wn.prototype.info=function(){};function ff(u,g){if(!u.g)return g;if(!g)return null;try{const H=JSON.parse(g);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var E=H[u];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var P=A[0];if(P!="noop"&&P!="stop"&&P!="close")for(let ie=1;ie<A.length;ie++)A[ie]=""}}}}return Nt(H)}catch{return g}}var kr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qo;function Lr(){}w(Lr,Vs),Lr.prototype.g=function(){return new XMLHttpRequest},Qo=new Lr;function Ji(u){return encodeURIComponent(String(u))}function jc(u){var g=1;u=u.split(":");const E=[];for(;g>0&&u.length;)E.push(u.shift()),g--;return u.length&&E.push(u.join(":")),E}function ei(u,g,E,A){this.j=u,this.i=g,this.l=E,this.S=A||1,this.V=new Ye(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ti}function ti(){this.i=null,this.g="",this.h=!1}var Ot={},Gt={};function Ti(u,g,E){u.M=1,u.A=Ur(Vt(g)),u.u=E,u.R=!0,Sa(u,null)}function Sa(u,g){u.F=Date.now(),Ai(u),u.B=Vt(u.A);var E=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Ia(E.i,"t",A),u.C=0,E=u.j.L,u.h=new ti,u.g=$c(u.j,E?g:null,!u.u),u.P>0&&(u.O=new Ge(_(u.Y,u,u.g),u.P)),g=u.V,E=u.g,A=u.ba;var P="readystatechange";Array.isArray(P)||(P&&(ft[0]=P.toString()),P=ft);for(let H=0;H<P.length;H++){const ie=lt(E,P[H],A||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),_i(),hf(u.i,u.v,u.B,u.l,u.S,u.u)}ei.prototype.ba=function(u){u=u.target;const g=this.O;g&&si(u)==3?g.j():this.Y(u)},ei.prototype.Y=function(u){try{if(u==this.g)e:{const Ne=si(this.g),St=this.g.ya(),Xe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||$t(this.g)))){this.K||Ne!=4||St==7||(St==8||Xe<=0?_i(3):_i(2)),wi(this);var g=this.g.ca();this.X=g;var E=df(this);if(this.o=g==200,Vc(this.i,this.v,this.B,this.l,this.S,Ne,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,P=this.g;if((A=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var H=A;break t}}H=null}if(u=H)bi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Si(this,u);else{this.o=!1,this.m=3,Dt(12),wn(this),Un(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<E.length;)if(_t=Lc(this,E),_t==Gt){Ne==4&&(this.m=4,Dt(14),u=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Ot){this.m=4,Dt(15),bi(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else bi(this.i,this.l,_t,null),Si(this,_t);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||E.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)bi(this.i,this.l,E,"[Invalid Chunked Response]"),wn(this),Un(this);else if(E.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),cl(ie),ie.P=!0,Dt(11))}}else bi(this.i,this.l,E,null),Si(this,E);Ne==4&&wn(this),this.o&&!this.K&&(Ne==4?Kc(this.j,this):(this.o=!1,Ai(this)))}else Wi(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),wn(this),Un(this)}}}catch{}finally{}};function df(u){if(!kc(u))return u.g.la();const g=$t(u.g);if(g==="")return"";let E="";const A=g.length,P=si(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return wn(u),Un(u),"";u.h.i=new f.TextDecoder}for(let H=0;H<A;H++)u.h.h=!0,E+=u.h.i.decode(g[H],{stream:!(P&&H==A-1)});return g.length=0,u.h.g+=E,u.C=0,u.h.g}function kc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Lc(u,g){var E=u.C,A=g.indexOf(`
`,E);return A==-1?Gt:(E=Number(g.substring(E,A)),isNaN(E)?Ot:(A+=1,A+E>g.length?Gt:(g=g.slice(A,A+E),u.C=A+E,g)))}ei.prototype.cancel=function(){this.K=!0,wn(this)};function Ai(u){u.T=Date.now()+u.H,xa(u,u.H)}function xa(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ei(_(u.aa,u),g)}function wi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}ei.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(jr(this.i,this.B),this.M!=2&&(_i(),Dt(17)),wn(this),this.m=2,Un(this)):xa(this,this.T-u)};function Un(u){u.j.I==0||u.K||Kc(u.j,u)}function wn(u){wi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Qe(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Si(u,g){try{var E=u.j;if(E.I!=0&&(E.g==u||Ci(E.h,u))){if(!u.L&&Ci(E.h,u)&&E.I==3){try{var A=E.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var P=A;if(P[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)Va(E),Hs(E);else break e;Fr(E),Dt(18)}}else E.xa=P[1],0<E.xa-E.K&&P[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ei(_(E.Va,E),6e3));xi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Mi(E,11)}else if((u.L||E.g==u)&&Va(E),!I(g))for(P=E.Ba.g.parse(g),g=0;g<P.length;g++){let Xe=P[g];const _t=Xe[0];if(!(_t<=E.K))if(E.K=_t,Xe=Xe[1],E.I==2)if(Xe[0]=="c"){E.M=Xe[1],E.ba=Xe[2];const Bn=Xe[3];Bn!=null&&(E.ka=Bn,E.j.info("VER="+E.ka));const Vi=Xe[4];Vi!=null&&(E.za=Vi,E.j.info("SVER="+E.za));const ri=Xe[5];ri!=null&&typeof ri=="number"&&ri>0&&(A=1.5*ri,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const ai=u.g;if(ai){const Kr=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var H=A.h;H.g||Kr.indexOf("spdy")==-1&&Kr.indexOf("quic")==-1&&Kr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Jo(H,H.h),H.h=null))}if(A.G){const ja=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;ja&&(A.wa=ja,et(A.J,A.G,ja))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var ie=u;if(A.na=Xc(A,A.L?A.ba:null,A.W),ie.L){Zo(A.h,ie);var Ne=ie,St=A.O;St&&(Ne.H=St),Ne.D&&(wi(Ne),Ai(Ne)),A.g=ie}else Gc(A);E.i.length>0&&Oi(E)}else Xe[0]!="stop"&&Xe[0]!="close"||Mi(E,7);else E.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Mi(E,7):ol(E):Xe[0]!="noop"&&E.l&&E.l.qa(Xe),E.A=0)}}_i(4)}catch{}}var Mt=class{constructor(u,g){this.g=u,this.map=g}};function Xo(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $o(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xi(u){return u.h?1:u.g?u.g.size:0}function Ci(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Jo(u,g){u.g?u.g.add(g):u.h=g}function Zo(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Xo.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wo(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const E of u.g.values())g=g.concat(E.G);return g}return U(u.i)}var Uc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ca(u,g){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const A=u[E].indexOf("=");let P,H=null;A>=0?(P=u[E].substring(0,A),H=u[E].substring(A+1)):P=u[E],g(P,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Sn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Sn?(this.l=u.l,Ft(this,u.j),this.o=u.o,this.g=u.g,ks(this,u.u),this.h=u.h,el(this,qc(u.i)),this.m=u.m):u&&(g=String(u).match(Uc))?(this.l=!1,Ft(this,g[1]||"",!0),this.o=Ri(g[2]||""),this.g=Ri(g[3]||"",!0),ks(this,g[4]),this.h=Ri(g[5]||"",!0),el(this,g[6]||"",!0),this.m=Ri(g[7]||"")):(this.l=!1,this.i=new Us(null,this.l))}Sn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Pr(g,Ra,!0),":");var E=this.g;return(E||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Pr(g,Ra,!0),"@"),u.push(Ji(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Pr(E,E.charAt(0)=="/"?tl:Pc,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Pr(E,zc)),u.join("")},Sn.prototype.resolve=function(u){const g=Vt(this);let E=!!u.j;E?Ft(g,u.j):E=!!u.o,E?g.o=u.o:E=!!u.g,E?g.g=u.g:E=u.u!=null;var A=u.h;if(E)ks(g,u.u);else if(E=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var P=g.h.lastIndexOf("/");P!=-1&&(A=g.h.slice(0,P+1)+A)}if(P=A,P==".."||P==".")A="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){A=P.lastIndexOf("/",0)==0,P=P.split("/");const H=[];for(let ie=0;ie<P.length;){const Ne=P[ie++];Ne=="."?A&&ie==P.length&&H.push(""):Ne==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),A&&ie==P.length&&H.push("")):(H.push(Ne),A=!0)}A=H.join("/")}else A=P}return E?g.h=A:E=u.i.toString()!=="",E?el(g,qc(u.i)):E=!!u.m,E&&(g.m=u.m),g};function Vt(u){return new Sn(u)}function Ft(u,g,E){u.j=E?Ri(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ks(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function el(u,g,E){g instanceof Us?(u.i=g,Na(u.i,u.l)):(E||(g=Pr(g,Ls)),u.i=new Us(g,u.l))}function et(u,g,E){u.i.set(g,E)}function Ur(u){return et(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ri(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Pr(u,g,E){return typeof u=="string"?(u=encodeURI(u).replace(g,dn),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function dn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ra=/[#\/\?@]/g,Pc=/[#\?:]/g,tl=/[#\?]/g,Ls=/[#\?@]/g,zc=/#/g;function Us(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function mn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ca(u.i,function(g,E){u.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}s=Us.prototype,s.add=function(u,g){mn(this),this.i=null,u=Ps(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(g),this.h+=1,this};function Bc(u,g){mn(u),g=Ps(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function nl(u,g){return mn(u),g=Ps(u,g),u.g.has(g)}s.forEach=function(u,g){mn(this),this.g.forEach(function(E,A){E.forEach(function(P){u.call(g,P,A,this)},this)},this)};function il(u,g){mn(u);let E=[];if(typeof g=="string")nl(u,g)&&(E=E.concat(u.g.get(Ps(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)E=E.concat(u[g]);return E}s.set=function(u,g){return mn(this),this.i=null,u=Ps(this,u),nl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},s.get=function(u,g){return u?(u=il(this,u),u.length>0?String(u[0]):g):g};function Ia(u,g,E){Bc(u,g),E.length>0&&(u.i=null,u.g.set(Ps(u,g),U(E)),u.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var E=g[A];const P=Ji(E);E=il(this,E);for(let H=0;H<E.length;H++){let ie=P;E[H]!==""&&(ie+="="+Ji(E[H])),u.push(ie)}}return this.i=u.join("&")};function qc(u){const g=new Us;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Ps(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Na(u,g){g&&!u.j&&(mn(u),u.i=null,u.g.forEach(function(E,A){const P=A.toLowerCase();A!=P&&(Bc(this,A),Ia(this,P,E))},u)),u.j=g}function ni(u,g){const E=new Wn;if(f.Image){const A=new Image;A.onload=T(Pn,E,"TestLoadImage: loaded",!0,g,A),A.onerror=T(Pn,E,"TestLoadImage: error",!1,g,A),A.onabort=T(Pn,E,"TestLoadImage: abort",!1,g,A),A.ontimeout=T(Pn,E,"TestLoadImage: timeout",!1,g,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function sl(u,g){const E=new Wn,A=new AbortController,P=setTimeout(()=>{A.abort(),Pn(E,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(H=>{clearTimeout(P),H.ok?Pn(E,"TestPingServer: ok",!0,g):Pn(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),Pn(E,"TestPingServer: error",!1,g)})}function Pn(u,g,E,A,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),A(E)}catch{}}function zs(){this.g=new yi}function Ii(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Ii,Vs),Ii.prototype.g=function(){return new zr(this.i,this.h)};function zr(u,g){F.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(zr,F),s=zr.prototype,s.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,ii(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Da(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Da(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Bs(this):ii(this),this.readyState==3&&Da(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Bs(this))},s.Na=function(u){this.g&&(this.response=u,Bs(this))},s.ga=function(){this.g&&Bs(this)};function Bs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ii(u)}s.setRequestHeader=function(u,g){this.A.append(u,g)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=g.next();return u.join(`\r
`)};function ii(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zn(u){let g="";return we(u,function(E,A){g+=A,g+=":",g+=E,g+=`\r
`}),g}function Br(u,g,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=zn(E),typeof u=="string"?E!=null&&Ji(E):et(u,g,E))}function st(u){F.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(st,F);var Ni=/^https?$/i,rl=["POST","PUT"];s=st.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,g,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qo.g(),this.g.onreadystatechange=x(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(H){qr(this,H);return}if(u=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var P in A)E.set(P,A[P]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())E.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(H=>H.toLowerCase()=="content-type"),P=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(rl,g,void 0)>=0)||A||P||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of E)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){qr(this,H)}};function qr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,al(u),Zi(u)}function al(u){u.A||(u.A=!0,de(u,"complete"),de(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,de(this,"complete"),de(this,"abort"),Zi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),st.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Hr(this):this.Xa())},s.Xa=function(){Hr(this)};function Hr(u){if(u.h&&typeof c<"u"){if(u.v&&si(u)==4)setTimeout(u.Ca.bind(u),0);else if(de(u,"readystatechange"),si(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var A;if(A=H===0){let ie=String(u.D).match(Uc)[1]||null;!ie&&f.self&&f.self.location&&(ie=f.self.location.protocol.slice(0,-1)),A=!Ni.test(ie?ie.toLowerCase():"")}E=A}if(E)de(u,"complete"),de(u,"success");else{u.o=6;try{var P=si(u)>2?u.g.statusText:""}catch{P=""}u.l=P+" ["+u.ca()+"]",al(u)}}finally{Zi(u)}}}}function Zi(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,g||de(u,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function si(u){return u.g?u.g.readyState:0}s.ca=function(){try{return si(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),$i(g)}};function $t(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Wi(u){const g={};u=(u.g&&si(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(I(u[A]))continue;var E=jc(u[A]);const P=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const H=g[P]||[];g[P]=H,H.push(E)}xe(g,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(u,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||g}function qs(u){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,u),this.Za=Di("retryDelaySeedMs",1e4,u),this.Ta=Di("forwardChannelMaxRetries",2,u),this.va=Di("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Xo(u&&u.concurrentRequestLimit),this.Ba=new zs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=qs.prototype,s.ka=8,s.I=1,s.connect=function(u,g,E,A){Dt(0),this.W=u,this.H=g||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Xc(this,null,this.W),Oi(this)};function ol(u){if(Oa(u),u.I==3){var g=u.V++,E=Vt(u.J);if(et(E,"SID",u.M),et(E,"RID",g),et(E,"TYPE","terminate"),Gr(u,E),g=new ei(u,u.j,g),g.M=2,g.A=Ur(Vt(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=g.A,E=!0),E||(g.g=$c(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ai(g)}Qc(u)}function Hs(u){u.g&&(cl(u),u.g.cancel(),u.g=null)}function Oa(u){Hs(u),u.v&&(f.clearTimeout(u.v),u.v=null),Va(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Oi(u){if(!$o(u.h)&&!u.m){u.m=!0;var g=u.Ea;me||S(),ne||(me(),ne=!0),R.add(g,u),u.D=0}}function Ma(u,g){return xi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ei(_(u.Ea,u,g),Yc(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const P=new ei(this,this.j,u);let H=this.o;if(this.U&&(H?(H=M(H),se(H,this.U)):H=this.U),this.u!==null||this.R||(P.J=H,H=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=Hc(this,P,g),E=Vt(this.J),et(E,"RID",u),et(E,"CVER",22),this.G&&et(E,"X-HTTP-Session-Id",this.G),Gr(this,E),H&&(this.R?g="headers="+Ji(zn(H))+"&"+g:this.u&&Br(E,this.u,H)),Jo(this.h,P),this.Ra&&et(E,"TYPE","init"),this.S?(et(E,"$req",g),et(E,"SID","null"),P.U=!0,Ti(P,E,null)):Ti(P,E,g),this.I=2}}else this.I==3&&(u?ll(this,u):this.i.length==0||$o(this.h)||ll(this))};function ll(u,g){var E;g?E=g.l:E=u.V++;const A=Vt(u.J);et(A,"SID",u.M),et(A,"RID",E),et(A,"AID",u.K),Gr(u,A),u.u&&u.o&&Br(A,u.u,u.o),E=new ei(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Hc(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Jo(u.h,E),Ti(E,A,g)}function Gr(u,g){u.H&&we(u.H,function(E,A){et(g,A,E)}),u.l&&we({},function(E,A){et(g,A,E)})}function Hc(u,g,E){E=Math.min(u.i.length,E);const A=u.l?_(u.l.Ka,u.l,u):null;e:{var P=u.i;let Ne=-1;for(;;){const St=["count="+E];Ne==-1?E>0?(Ne=P[0].g,St.push("ofs="+Ne)):Ne=0:St.push("ofs="+Ne);let Xe=!0;for(let _t=0;_t<E;_t++){var H=P[_t].g;const Bn=P[_t].map;if(H-=Ne,H<0)Ne=Math.max(0,P[_t].g-100),Xe=!1;else try{H="req"+H+"_"||"";try{var ie=Bn instanceof Map?Bn:Object.entries(Bn);for(const[Vi,ri]of ie){let ai=ri;m(ri)&&(ai=Nt(ri)),St.push(H+Vi+"="+encodeURIComponent(ai))}}catch(Vi){throw St.push(H+"type="+encodeURIComponent("_badmap")),Vi}}catch{A&&A(Bn)}}if(Xe){ie=St.join("&");break e}}ie=void 0}return u=u.i.splice(0,E),g.G=u,ie}function Gc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;me||S(),ne||(me(),ne=!0),R.add(g,u),u.A=0}}function Fr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ei(_(u.Da,u),Yc(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ei(_(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Hs(this),Fc(this))};function cl(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Fc(u){u.g=new ei(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Vt(u.na);et(g,"RID","rpc"),et(g,"SID",u.M),et(g,"AID",u.K),et(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&et(g,"TO",u.ia),et(g,"TYPE","xmlhttp"),Gr(u,g),u.u&&u.o&&Br(g,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=Ur(Vt(g)),E.u=null,E.R=!0,Sa(E,u)}s.Va=function(){this.C!=null&&(this.C=null,Hs(this),Fr(this),Dt(19))};function Va(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Kc(u,g){var E=null;if(u.g==g){Va(u),cl(u),u.g=null;var A=2}else if(Ci(u.h,g))E=g.G,Zo(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var P=u.D;A=wa(),de(A,new vi(A,E)),Oi(u)}else Gc(u);else if(P=g.m,P==3||P==0&&g.X>0||!(A==1&&Ma(u,g)||A==2&&Fr(u)))switch(E&&E.length>0&&(g=u.h,g.i=g.i.concat(E)),P){case 1:Mi(u,5);break;case 4:Mi(u,10);break;case 3:Mi(u,6);break;default:Mi(u,2)}}}function Yc(u,g){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*g}function Mi(u,g){if(u.j.info("Error code "+g),g==2){var E=_(u.bb,u),A=u.Ua;const P=!A;A=new Sn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ft(A,"https"),Ur(A),P?ni(A.toString(),E):sl(A.toString(),E)}else Dt(2);u.I=0,u.l&&u.l.pa(g),Qc(u),Oa(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Qc(u){if(u.I=0,u.ja=[],u.l){const g=Wo(u.h);(g.length!=0||u.i.length!=0)&&(Y(u.ja,g),Y(u.ja,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.oa()}}function Xc(u,g,E){var A=E instanceof Sn?Vt(E):new Sn(E);if(A.g!="")g&&(A.g=g+"."+A.g),ks(A,A.u);else{var P=f.location;A=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;const H=new Sn(null);A&&Ft(H,A),g&&(H.g=g),P&&ks(H,P),E&&(H.h=E),A=H}return E=u.G,g=u.wa,E&&g&&et(A,E,g),et(A,"VER",u.ka),Gr(u,A),A}function $c(u,g,E){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new st(new Ii({ab:E})):new st(u.ma),g.Fa(u.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}s=Jc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Gs(){}Gs.prototype.g=function(u,g){return new hn(u,g)};function hn(u,g){F.call(this),this.g=new qs(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new es(this)}w(hn,F),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){ol(this.g)},hn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=Nt(u),u=E);g.i.push(new Mt(g.Ya++,u)),g.I==3&&Oi(g)},hn.prototype.N=function(){this.g.l=null,delete this.j,ol(this.g),delete this.g,hn.Z.N.call(this)};function Zc(u){Xt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const E in g){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}w(Zc,Xt);function Wc(){Ln.call(this),this.status=1}w(Wc,Ln);function es(u){this.g=u}w(es,Jc),es.prototype.ra=function(){de(this.g,"a")},es.prototype.qa=function(u){de(this.g,new Zc(u))},es.prototype.pa=function(u){de(this.g,new Wc)},es.prototype.oa=function(){de(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,wb=function(){return new Gs},Ab=function(){return wa()},Tb=wt,Vm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,mh=kr,Yo.COMPLETE="complete",bb=Yo,js.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",F.prototype.listen=F.prototype.J,$l=js,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,Eb=st}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const av="@firebase/firestore",ov="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new ig("@firebase/firestore");function po(){return ya.logLevel}function ce(s,...e){if(ya.logLevel<=Pe.DEBUG){const n=e.map(pg);ya.debug(`Firestore (${Bo}): ${s}`,...n)}}function Ss(s,...e){if(ya.logLevel<=Pe.ERROR){const n=e.map(pg);ya.error(`Firestore (${Bo}): ${s}`,...n)}}function No(s,...e){if(ya.logLevel<=Pe.WARN){const n=e.map(pg);ya.warn(`Firestore (${Bo}): ${s}`,...n)}}function pg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Sb(s,r,n)}function Sb(s,e,n){let r=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ss(r),new Error(r)}function Ze(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||Sb(e,o,r)}function Re(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(on.UNAUTHENTICATED)))}shutdown(){}}class cR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class uR{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let c=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new bs,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new bs)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string",31837,{l:r}),new xb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class hR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const r=c=>{c.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ce("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=mR(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function ze(s,e){return s<e?-1:s>e?1:0}function jm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),c=e.charAt(r);if(o!==c)return Em(o)===Em(c)?ze(o,c):Em(o)?1:-1}return ze(s.length,e.length)}const gR=55296,pR=57343;function Em(s){const e=s.charCodeAt(0);return e>=gR&&e<=pR}function Do(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__name__";class Pi{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Pi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return ze(e.length,n.length)}static compareSegments(e,n){const r=Pi.isNumericId(e),o=Pi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Pi.extractNumericId(e).compare(Pi.extractNumericId(n)):jm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class ht extends Pi{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new ht(n)}static emptyPath(){return new ht([])}}const yR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Pi{construct(e,n,r){return new nn(e,n,r)}static isValidIdentifier(e){return yR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cv}static keyField(){return new nn([cv])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new ae(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ae(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(c(),o++)}if(c(),f)throw new ae(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ht.fromString(e))}static fromName(e){return new _e(ht.fromString(e).popFirst(5))}static empty(){return new _e(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(s,e,n){if(!n)throw new ae(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function _R(s,e,n,r){if(e===!0&&r===!0)throw new ae(X.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function uv(s){if(!_e.isDocumentKey(s))throw new ae(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function hv(s){if(_e.isDocumentKey(s))throw new ae(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Rb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Kh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":be(12329,{type:typeof s})}function Fi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ae(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kh(s);throw new ae(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Sc(s,e){if(!Rb(s))throw new ae(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new ae(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=-62135596800,dv=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*dv);return new pt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fv)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dv}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sc(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Bt("string",pt._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new pt(0,0))}static max(){return new Se(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=-1;function vR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new xr(o,_e.empty(),e)}function ER(s){return new xr(s.readTime,s.key,fc)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(Se.min(),_e.empty(),fc)}static max(){return new xr(Se.max(),_e.empty(),fc)}}function bR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(s.documentKey,e.documentKey),n!==0?n:ze(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==TR)throw s;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,r)=>{n(e)}))}static reject(e){return new Z(((n,r)=>{r(e)}))}static waitFor(e){return new Z(((n,r)=>{let o=0,c=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++c,f&&c===o&&n()}),(p=>r(p)))})),f=!0,c===o&&n()}))}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next((o=>o?Z.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new Z(((r,o)=>{const c=e.length,f=new Array(c);let m=0;for(let p=0;p<c;p++){const _=p;n(e[_]).next((T=>{f[_]=T,++m,m===c&&r(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new Z(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function wR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=-1;function Qh(s){return s==null}function Nh(s){return s===0&&1/s==-1/0}function SR(s){return typeof s=="number"&&Number.isInteger(s)&&!Nh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="";function xR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=mv(e)),e=CR(s.get(n),e);return mv(e)}function CR(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case Ib:n+="";break;default:n+=c}}return n}function mv(s){return s+Ib+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Or(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Nb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rh(this.root,e,this.comparator,!0)}}class rh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??tn.RED,this.left=o??tn.EMPTY,this.right=c??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new tn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new kn([])}unionWith(e){let n=new Ht(nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Db("Invalid base64 string: "+c):c}})(e);return new sn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c})(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(s){if(Ze(!!s,39018),typeof s=="string"){let e=0;const n=RR.exec(s);if(Ze(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(s.seconds),nanos:Rt(s.nanos)}}function Rt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Rr(s){return typeof s=="string"?sn.fromBase64String(s):sn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="server_timestamp",Mb="__type__",Vb="__previous_value__",jb="__local_write_time__";function vg(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Mb])==null?void 0:r.stringValue)===Ob}function Xh(s){const e=s.mapValue.fields[Vb];return vg(e)?Xh(e):e}function dc(s){const e=Cr(s.mapValue.fields[jb].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,r,o,c,f,m,p,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=_,this.isUsingEmulator=T}}const km="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||km}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===km}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="__type__",NR="__max__",ah={mapValue:{}},Lb="__vector__",Dh="value";function Ir(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?vg(s)?4:OR(s)?9007199254740991:DR(s)?10:11:be(28295,{value:s})}function Ki(s,e){if(s===e)return!0;const n=Ir(s);if(n!==Ir(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return dc(s).isEqual(dc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=Cr(o.timestampValue),m=Cr(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Rr(o.bytesValue).isEqual(Rr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Rt(o.geoPointValue.latitude)===Rt(c.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Rt(o.integerValue)===Rt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Rt(o.doubleValue),m=Rt(c.doubleValue);return f===m?Nh(f)===Nh(m):isNaN(f)&&isNaN(m)}return!1})(s,e);case 9:return Do(s.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(gv(f)!==gv(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Ki(f[p],m[p])))return!1;return!0})(s,e);default:return be(52216,{left:s})}}function gc(s,e){return(s.values||[]).find((n=>Ki(n,e)))!==void 0}function Oo(s,e){if(s===e)return 0;const n=Ir(s),r=Ir(e);if(n!==r)return ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=Rt(c.integerValue||c.doubleValue),p=Rt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(s,e);case 3:return yv(s.timestampValue,e.timestampValue);case 4:return yv(dc(s),dc(e));case 5:return jm(s.stringValue,e.stringValue);case 6:return(function(c,f){const m=Rr(c),p=Rr(f);return m.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),p=f.split("/");for(let _=0;_<m.length&&_<p.length;_++){const T=ze(m[_],p[_]);if(T!==0)return T}return ze(m.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=ze(Rt(c.latitude),Rt(f.latitude));return m!==0?m:ze(Rt(c.longitude),Rt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return _v(s.arrayValue,e.arrayValue);case 10:return(function(c,f){var x,U,Y,te;const m=c.fields||{},p=f.fields||{},_=(x=m[Dh])==null?void 0:x.arrayValue,T=(U=p[Dh])==null?void 0:U.arrayValue,w=ze(((Y=_==null?void 0:_.values)==null?void 0:Y.length)||0,((te=T==null?void 0:T.values)==null?void 0:te.length)||0);return w!==0?w:_v(_,T)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===ah.mapValue&&f===ah.mapValue)return 0;if(c===ah.mapValue)return 1;if(f===ah.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),_=f.fields||{},T=Object.keys(_);p.sort(),T.sort();for(let w=0;w<p.length&&w<T.length;++w){const x=jm(p[w],T[w]);if(x!==0)return x;const U=Oo(m[p[w]],_[T[w]]);if(U!==0)return U}return ze(p.length,T.length)})(s.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function yv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ze(s,e);const n=Cr(s),r=Cr(e),o=ze(n.seconds,r.seconds);return o!==0?o:ze(n.nanos,r.nanos)}function _v(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=Oo(n[o],r[o]);if(c)return c}return ze(n.length,r.length)}function Mo(s){return Lm(s)}function Lm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=Cr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Rr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return _e.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Lm(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const f of r)c?c=!1:o+=",",o+=`${f}:${Lm(n.fields[f])}`;return o+"}"})(s.mapValue):be(61005,{value:s})}function gh(s){switch(Ir(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xh(s);return e?16+gh(e):16;case 5:return 2*s.stringValue.length;case 6:return Rr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+gh(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Or(r.fields,((c,f)=>{o+=c.length+gh(f)})),o})(s.mapValue);default:throw be(13486,{value:s})}}function vv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Um(s){return!!s&&"integerValue"in s}function Eg(s){return!!s&&"arrayValue"in s}function Ev(s){return!!s&&"nullValue"in s}function bv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ph(s){return!!s&&"mapValue"in s}function DR(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[kb])==null?void 0:r.stringValue)===Lb}function sc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Or(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=sc(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(s.arrayValue.values[n]);return e}return{...s}}function OR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===NR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ph(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=nn.emptyPath(),r={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,r,o),r={},o=[],n=m.popLast()}f?r[m.lastSegment()]=sc(f):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());ph(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];ph(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Or(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Tn(sc(this.value))}}function Ub(s){const e=[];return Or(s.fields,((n,r)=>{const o=new nn([n]);if(ph(r)){const c=Ub(r.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)})),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,r,o,c,f,m){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new ln(e,0,Se.min(),Se.min(),Se.min(),Tn.empty(),0)}static newFoundDocument(e,n,r,o){return new ln(e,1,n,Se.min(),r,o,0)}static newNoDocument(e,n){return new ln(e,2,n,Se.min(),Se.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,Se.min(),Se.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.position=e,this.inclusive=n}}function Tv(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const c=e[o],f=s.position[o];if(c.field.isKeyField()?r=_e.comparator(_e.fromName(f.referenceValue),n.key):r=Oo(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Av(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ki(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function MR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{}class zt extends Pb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jR(e,n,r):n==="array-contains"?new UR(e,r):n==="in"?new PR(e,r):n==="not-in"?new zR(e,r):n==="array-contains-any"?new BR(e,r):new zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kR(e,r):new LR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oo(n,this.value)):n!==null&&Ir(this.value)===Ir(n)&&this.matchesComparison(Oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends Pb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new mi(e,n)}matches(e){return zb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zb(s){return s.op==="and"}function Bb(s){return VR(s)&&zb(s)}function VR(s){for(const e of s.filters)if(e instanceof mi)return!1;return!0}function Pm(s){if(s instanceof zt)return s.field.canonicalString()+s.op.toString()+Mo(s.value);if(Bb(s))return s.filters.map((e=>Pm(e))).join(",");{const e=s.filters.map((n=>Pm(n))).join(",");return`${s.op}(${e})`}}function qb(s,e){return s instanceof zt?(function(r,o){return o instanceof zt&&r.op===o.op&&r.field.isEqual(o.field)&&Ki(r.value,o.value)})(s,e):s instanceof mi?(function(r,o){return o instanceof mi&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,f,m)=>c&&qb(f,o.filters[m])),!0):!1})(s,e):void be(19439)}function Hb(s){return s instanceof zt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`})(s):s instanceof mi?(function(n){return n.op.toString()+" {"+n.getFilters().map(Hb).join(" ,")+"}"})(s):"Filter"}class jR extends zt{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class kR extends zt{constructor(e,n){super(e,"in",n),this.keys=Gb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class LR extends zt{constructor(e,n){super(e,"not-in",n),this.keys=Gb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Gb(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class UR extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eg(n)&&gc(n.arrayValue,this.value)}}class PR extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class zR extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gc(this.value.arrayValue,n)}}class BR extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>gc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n=null,r=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function wv(s,e=null,n=[],r=[],o=null,c=null,f=null){return new qR(s,e,n,r,o,c,f)}function bg(s){const e=Re(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Pm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Mo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Mo(r))).join(",")),e.Te=n}return e.Te}function Tg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!MR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!qb(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Av(s.startAt,e.startAt)&&Av(s.endAt,e.endAt)}function zm(s){return _e.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n=null,r=[],o=[],c=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HR(s,e,n,r,o,c,f,m){return new Go(s,e,n,r,o,c,f,m)}function Ag(s){return new Go(s)}function Sv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Fb(s){return s.collectionGroup!==null}function rc(s){const e=Re(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ht(nn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new pc(c,r))})),n.has(nn.keyField().canonicalString())||e.Ie.push(new pc(nn.keyField(),r))}return e.Ie}function Bi(s){const e=Re(s);return e.Ee||(e.Ee=GR(e,rc(s))),e.Ee}function GR(s,e){if(s.limitType==="F")return wv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new pc(o.field,c)}));const n=s.endAt?new Oh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Oh(s.startAt.position,s.startAt.inclusive):null;return wv(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Bm(s,e){const n=s.filters.concat([e]);return new Go(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function qm(s,e,n){return new Go(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function $h(s,e){return Tg(Bi(s),Bi(e))&&s.limitType===e.limitType}function Kb(s){return`${bg(Bi(s))}|lt:${s.limitType}`}function yo(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>Hb(o))).join(", ")}]`),Qh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Mo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Mo(o))).join(",")),`Target(${r})`})(Bi(s))}; limitType=${s.limitType})`}function Jh(s,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):_e.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,o){for(const c of rc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(f,m,p){const _=Tv(f,m,p);return f.inclusive?_<=0:_<0})(r.startAt,rc(r),o)||r.endAt&&!(function(f,m,p){const _=Tv(f,m,p);return f.inclusive?_>=0:_>0})(r.endAt,rc(r),o))})(s,e)}function FR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Yb(s){return(e,n)=>{let r=!1;for(const o of rc(s)){const c=KR(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function KR(s,e,n){const r=s.field.isKeyField()?_e.comparator(e.key,n.key):(function(c,f,m){const p=f.data.field(c),_=m.data.field(c);return p!==null&&_!==null?Oo(p,_):be(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return be(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Or(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return Nb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Et(_e.comparator);function xs(){return YR}const Qb=new Et(_e.comparator);function Jl(...s){let e=Qb;for(const n of s)e=e.insert(n.key,n);return e}function Xb(s){let e=Qb;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function fa(){return ac()}function $b(){return ac()}function ac(){return new Ea((s=>s.toString()),((s,e)=>s.isEqual(e)))}const QR=new Et(_e.comparator),XR=new Ht(_e.comparator);function Be(...s){let e=XR;for(const n of s)e=e.add(n);return e}const $R=new Ht(ze);function JR(){return $R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nh(e)?"-0":e}}function Jb(s){return{integerValue:""+s}}function ZR(s,e){return SR(e)?Jb(e):wg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(){this._=void 0}}function WR(s,e,n){return s instanceof Mh?(function(o,c){const f={fields:{[Mb]:{stringValue:Ob},[jb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&vg(c)&&(c=Xh(c)),c&&(f.fields[Vb]=c),{mapValue:f}})(n,e):s instanceof Vo?Wb(s,e):s instanceof jo?eT(s,e):(function(o,c){const f=Zb(o,c),m=xv(f)+xv(o.Ae);return Um(f)&&Um(o.Ae)?Jb(m):wg(o.serializer,m)})(s,e)}function eI(s,e,n){return s instanceof Vo?Wb(s,e):s instanceof jo?eT(s,e):n}function Zb(s,e){return s instanceof Vh?(function(r){return Um(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Mh extends Zh{}class Vo extends Zh{constructor(e){super(),this.elements=e}}function Wb(s,e){const n=tT(e);for(const r of s.elements)n.some((o=>Ki(o,r)))||n.push(r);return{arrayValue:{values:n}}}class jo extends Zh{constructor(e){super(),this.elements=e}}function eT(s,e){let n=tT(e);for(const r of s.elements)n=n.filter((o=>!Ki(o,r)));return{arrayValue:{values:n}}}class Vh extends Zh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function xv(s){return Rt(s.integerValue||s.doubleValue)}function tT(s){return Eg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n){this.field=e,this.transform=n}}function tI(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Vo&&o instanceof Vo||r instanceof jo&&o instanceof jo?Do(r.elements,o.elements,Ki):r instanceof Vh&&o instanceof Vh?Ki(r.Ae,o.Ae):r instanceof Mh&&o instanceof Mh})(s.transform,e.transform)}class nI{constructor(e,n){this.version=e,this.transformResults=n}}class di{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new di}static exists(e){return new di(void 0,e)}static updateTime(e){return new di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Wh{}function iT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Sg(s.key,di.none()):new xc(s.key,s.data,di.none());{const n=s.data,r=Tn.empty();let o=new Ht(nn.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),o=o.add(c)}return new Mr(s.key,r,new kn(o.toArray()),di.none())}}function iI(s,e,n){s instanceof xc?(function(o,c,f){const m=o.value.clone(),p=Rv(o.fieldTransforms,c,f.transformResults);m.setAll(p),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(s,e,n):s instanceof Mr?(function(o,c,f){if(!yh(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Rv(o.fieldTransforms,c,f.transformResults),p=c.data;p.setAll(sT(o)),p.setAll(m),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):(function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function oc(s,e,n,r){return s instanceof xc?(function(c,f,m,p){if(!yh(c.precondition,f))return m;const _=c.value.clone(),T=Iv(c.fieldTransforms,p,f);return _.setAll(T),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(s,e,n,r):s instanceof Mr?(function(c,f,m,p){if(!yh(c.precondition,f))return m;const _=Iv(c.fieldTransforms,p,f),T=f.data;return T.setAll(sT(c)),T.setAll(_),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(s,e,n,r):(function(c,f,m){return yh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(s,e,n)}function sI(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),c=Zb(r.transform,o||null);c!=null&&(n===null&&(n=Tn.empty()),n.set(r.field,c))}return n||null}function Cv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Do(r,o,((c,f)=>tI(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class xc extends Wh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mr extends Wh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function sT(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function Rv(s,e,n){const r=new Map;Ze(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],f=c.transform,m=e.data.field(c.field);r.set(c.field,eI(f,m,n[o]))}return r}function Iv(s,e,n){const r=new Map;for(const o of s){const c=o.transform,f=n.data.field(o.field);r.set(o.field,WR(c,f,e))}return r}class Sg extends Wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rI extends Wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&iI(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$b();return this.mutations.forEach((o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(o.key)?null:m;const p=iT(f,m);p!==null&&r.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,((n,r)=>Cv(n,r)))&&Do(this.baseMutations,e.baseMutations,((n,r)=>Cv(n,r)))}}class xg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return QR})();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,r[f].version);return new xg(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,He;function cI(s){switch(s){case X.OK:return be(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return be(15467,{code:s})}}function rT(s){if(s===void 0)return Ss("GRPC error has no .code"),X.UNKNOWN;switch(s){case Pt.OK:return X.OK;case Pt.CANCELLED:return X.CANCELLED;case Pt.UNKNOWN:return X.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return X.INTERNAL;case Pt.UNAVAILABLE:return X.UNAVAILABLE;case Pt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Pt.NOT_FOUND:return X.NOT_FOUND;case Pt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Pt.ABORTED:return X.ABORTED;case Pt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Pt.DATA_LOSS:return X.DATA_LOSS;default:return be(39323,{code:s})}}(He=Pt||(Pt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new Ar([4294967295,4294967295],0);function Nv(s){const e=uI().encode(s),n=new vb;return n.update(e),new Uint8Array(n.digest())}function Dv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([o,c],0)]}class Cg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zl(`Invalid padding: ${n}`);if(r<0)throw new Zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ar.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Ar.fromNumber(r)));return o.compare(hI)===1&&(o=new Ar([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Nv(e),[r,o]=Dv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,o,c);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Cg(c,o,n);return r.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Nv(e),[r,o]=Dv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,o,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ef(Se.min(),o,new Et(ze),xs(),Be())}}class Cc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cc(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class aT{constructor(e,n){this.targetId=e,this.Ce=n}}class oT{constructor(e,n,r=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Ov{constructor(){this.ve=0,this.Fe=Mv(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),r=Be();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:be(38017,{changeType:c})}})),new Cc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Mv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fI{constructor(e){this.Ge=e,this.ze=new Map,this.je=xs(),this.Je=oh(),this.He=oh(),this.Ye=new Et(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(zm(c))if(r===0){const f=new _e(c.path);this.et(n,f,ln.newNoDocument(f,Se.min()))}else Ze(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let f,m;try{f=Rr(r).toUint8Array()}catch(p){if(p instanceof Db)return No("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Cg(f,o,c)}catch(p){return No(p instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&zm(m.target)){const p=new _e(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,ln.newNoDocument(p,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let r=Be();this.He.forEach(((c,f)=>{let m=!0;f.forEachWhile((p=>{const _=this.ot(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const o=new ef(e,n,this.Ye,this.je,r);return this.je=xs(),this.Je=oh(),this.He=oh(),this.Ye=new Et(ze),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ov,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ht(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ht(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ov),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function oh(){return new Et(_e.comparator)}function Mv(){return new Et(_e.comparator)}const dI={asc:"ASCENDING",desc:"DESCENDING"},mI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gI={and:"AND",or:"OR"};class pI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hm(s,e){return s.useProto3Json||Qh(e)?e:{value:e}}function jh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function yI(s,e){return jh(s,e.toTimestamp())}function qi(s){return Ze(!!s,49232),Se.fromTimestamp((function(n){const r=Cr(n);return new pt(r.seconds,r.nanos)})(s))}function Rg(s,e){return Gm(s,e).canonicalString()}function Gm(s,e){const n=(function(o){return new ht(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function cT(s){const e=ht.fromString(s);return Ze(mT(e),10190,{key:e.toString()}),e}function Fm(s,e){return Rg(s.databaseId,e.path)}function bm(s,e){const n=cT(e);if(n.get(1)!==s.databaseId.projectId)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new _e(hT(n))}function uT(s,e){return Rg(s.databaseId,e)}function _I(s){const e=cT(s);return e.length===4?ht.emptyPath():hT(e)}function Km(s){return new ht(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function hT(s){return Ze(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Vv(s,e,n){return{name:Fm(s,e),fields:n.value.mapValue.fields}}function vI(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:be(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,T){return _.useProto3Json?(Ze(T===void 0||typeof T=="string",58123),sn.fromBase64String(T||"")):(Ze(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),sn.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(_){const T=_.code===void 0?X.UNKNOWN:rT(_.code);return new ae(T,_.message||"")})(f);n=new oT(r,o,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=bm(s,r.document.name),c=qi(r.document.updateTime),f=r.document.createTime?qi(r.document.createTime):Se.min(),m=new Tn({mapValue:{fields:r.document.fields}}),p=ln.newFoundDocument(o,c,f,m),_=r.targetIds||[],T=r.removedTargetIds||[];n=new _h(_,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=bm(s,r.document),c=r.readTime?qi(r.readTime):Se.min(),f=ln.newNoDocument(o,c),m=r.removedTargetIds||[];n=new _h([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=bm(s,r.document),c=r.removedTargetIds||[];n=new _h([],c,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,f=new lI(o,c),m=r.targetId;n=new aT(m,f)}}return n}function EI(s,e){let n;if(e instanceof xc)n={update:Vv(s,e.key,e.value)};else if(e instanceof Sg)n={delete:Fm(s,e.key)};else if(e instanceof Mr)n={update:Vv(s,e.key,e.data),updateMask:II(e.fieldMask)};else{if(!(e instanceof rI))return be(16599,{Vt:e.type});n={verify:Fm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,f){const m=f.transform;if(m instanceof Mh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Vo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof jo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Vh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw be(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:yI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:be(27497)})(s,e.precondition)),n}function bI(s,e){return s&&s.length>0?(Ze(e!==void 0,14353),s.map((n=>(function(o,c){let f=o.updateTime?qi(o.updateTime):qi(c);return f.isEqual(Se.min())&&(f=qi(c)),new nI(f,o.transformResults||[])})(n,e)))):[]}function TI(s,e){return{documents:[uT(s,e.path)]}}function AI(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uT(s,o);const c=(function(_){if(_.length!==0)return dT(mi.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(_){if(_.length!==0)return _.map((T=>(function(x){return{field:_o(x.field),direction:xI(x.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Hm(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function wI(s){let e=_I(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ze(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(w){const x=fT(w);return x instanceof mi&&Bb(x)?x.getFilters():[x]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((x=>(function(Y){return new pc(vo(Y.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(x)))})(n.orderBy));let m=null;n.limit&&(m=(function(w){let x;return x=typeof w=="object"?w.value:w,Qh(x)?null:x})(n.limit));let p=null;n.startAt&&(p=(function(w){const x=!!w.before,U=w.values||[];return new Oh(U,x)})(n.startAt));let _=null;return n.endAt&&(_=(function(w){const x=!w.before,U=w.values||[];return new Oh(U,x)})(n.endAt)),HR(e,o,f,c,m,"F",p,_)}function SI(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fT(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vo(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(n.unaryFilter.field);return zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=vo(n.unaryFilter.field);return zt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=vo(n.unaryFilter.field);return zt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(s):s.fieldFilter!==void 0?(function(n){return zt.create(vo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return mi.create(n.compositeFilter.filters.map((r=>fT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(s):be(30097,{filter:s})}function xI(s){return dI[s]}function CI(s){return mI[s]}function RI(s){return gI[s]}function _o(s){return{fieldPath:s.canonicalString()}}function vo(s){return nn.fromServerFormat(s.fieldPath)}function dT(s){return s instanceof zt?(function(n){if(n.op==="=="){if(bv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NAN"}};if(Ev(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bv(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NAN"}};if(Ev(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(n.field),op:CI(n.op),value:n.value}}})(s):s instanceof mi?(function(n){const r=n.getFilters().map((o=>dT(o)));return r.length===1?r[0]:{compositeFilter:{op:RI(n.op),filters:r}}})(s):be(54877,{filter:s})}function II(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function mT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r,o,c=Se.min(),f=Se.min(),m=sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.yt=e}}function DI(s){const e=wI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?qm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.Cn=new MI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(xr.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class MI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Ht(ht.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ht(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gT=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(gT,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ko(0)}static cr(){return new ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="LruGarbageCollector",VI=1048576;function Lv([s,e],[n,r]){const o=ze(s,n);return o===0?ze(e,r):o}class jI{constructor(e){this.Ir=e,this.buffer=new Ht(Lv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Lv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(kv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?ce(kv,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Vr(3e5)}))}}class LI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Yh.ce);const r=new jI(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(jv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,f,m,p,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,m=Date.now(),this.removeTargets(e,r,n)))).next((w=>(c=w,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(_=Date.now(),po()<=Pe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(_-p)+`ms
Total Duration: ${_-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:w}))))}}function UI(s,e){return new LI(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new Ea((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&oc(r.mutation,o,kn.empty(),pt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Be()){const o=fa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let f=Jl();return c.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=fa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Be())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,r,o){let c=xs();const f=ac(),m=(function(){return ac()})();return n.forEach(((p,_)=>{const T=r.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof Mr)?c=c.insert(_.key,_):T!==void 0?(f.set(_.key,T.mutation.getFieldMask()),oc(T.mutation,_,T.mutation.getFieldMask(),pt.now())):f.set(_.key,kn.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((_,T)=>f.set(_,T))),n.forEach(((_,T)=>m.set(_,new zI(T,f.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,n){const r=ac();let o=new Et(((f,m)=>f-m)),c=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const _=n.get(p);if(_===null)return;let T=r.get(p)||kn.empty();T=m.applyToLocalView(_,T),r.set(p,T);const w=(o.get(m.batchId)||Be()).add(p);o=o.insert(m.batchId,w)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),_=p.key,T=p.value,w=$b();T.forEach((x=>{if(!c.has(x)){const U=iT(n.get(x),r.get(x));U!==null&&w.set(x,U),c=c.add(x)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,w))}return Z.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(f){return _e.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):Z.resolve(fa());let m=fc,p=c;return f.next((_=>Z.forEach(_,((T,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),c.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(e,T).next((x=>{p=p.insert(T,x)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,p,_,Be()))).next((T=>({batchId:m,changes:Xb(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((r=>{let o=Jl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let f=Jl();return this.indexManager.getCollectionParents(e,c).next((m=>Z.forEach(m,(p=>{const _=(function(w,x){return new Go(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next((T=>{T.forEach(((w,x)=>{f=f.insert(w,x)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((f=>{c.forEach(((p,_)=>{const T=_.getKey();f.get(T)===null&&(f=f.insert(T,ln.newInvalidDocument(T)))}));let m=Jl();return f.forEach(((p,_)=>{const T=c.get(p);T!==void 0&&oc(T.mutation,_,kn.empty(),pt.now()),Jh(n,_)&&(m=m.insert(p,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:qi(o.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:DI(o.bundledQuery),readTime:qi(o.readTime)}})(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.overlays=new Et(_e.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fa();return Z.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),Z.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const o=fa(),c=n.length+1,f=new _e(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,_=p.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&p.largestBatchId>r&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new Et(((_,T)=>_-T));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let T=c.get(_.largestBatchId);T===null&&(T=fa(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const m=fa(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((_,T)=>m.set(_,T))),!(m.size()>=o)););return Z.resolve(m)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new oI(n,r));let c=this.qr.get(n);c===void 0&&(c=Be(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this.Qr=new Ht(Yt.$r),this.Ur=new Ht(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Yt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Yt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new _e(new ht([])),r=new Yt(n,e),o=new Yt(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new ht([])),r=new Yt(n,e),o=new Yt(n,e+1);let c=Be();return this.Ur.forEachInRange([r,o],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Yt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Yt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new aI(c,n,r,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?_g:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yt(n,0),o=new Yt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(f=>{const m=this.Xr(f.Yr);c.push(m)})),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ht(ze);return n.forEach((o=>{const c=new Yt(o,0),f=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(m=>{r=r.add(m.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;_e.isDocumentKey(c)||(c=c.child(""));const f=new Yt(new _e(c),0);let m=new Ht(ze);return this.Zr.forEachWhile((p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(p.Yr)),!0)}),f),Z.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,(o=>{const c=new Yt(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Yt(n,0),o=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.ri=e,this.docs=(function(){return new Et(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let r=xs();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():ln.newInvalidDocument(o))})),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=xs();const f=n.path,m=new _e(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:_,value:{document:T}}=p.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||bR(ER(T),r)<=0||(o.has(T.key)||Jh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(e,n,r,o){be(9500)}ii(e,n){return Z.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new YI(this)}getSize(e){return Z.resolve(this.size)}}class YI extends PI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.persistence=e,this.si=new Ea((n=>bg(n)),Tg),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Ig,this.targetCount=0,this.ai=ko.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ko(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),Z.waitFor(c).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((f=>{c.push(o.markPotentiallyOrphaned(e,f))})),Z.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yh(0),this.li=!1,this.li=!0,this.hi=new GI,this.referenceDelegate=e(this),this.Pi=new QI(this),this.indexManager=new OI,this.remoteDocumentCache=(function(o){return new KI(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new NI(n),this.Ii=new qI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new FI(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ce("MemoryPersistence","Starting transaction:",e);const o=new XI(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class XI extends AR{constructor(e){super(),this.currentSequenceNumber=e}}class Ng{constructor(e){this.persistence=e,this.Ri=new Ig,this.Vi=null}static mi(e){return new Ng(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const o=_e.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.pi=new Ea((r=>xR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=UI(this,n)}static mi(e,n){return new kh(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?Z.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(r++,c.removeEntry(f,Se.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gh(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return Z.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Be(),o=Be();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Dg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AS()?8:wR(un())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new $I;return this.Ss(e,n,f).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(po()<=Pe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(po()<=Pe.DEBUG&&ce("QueryEngine","Query:",yo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(po()<=Pe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(n))):Z.resolve())}ys(e,n){if(Sv(n))return Z.resolve(null);let r=Bi(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=qm(n,null,"F"),r=Bi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const f=Be(...c);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,r).next((p=>{const _=this.Ds(n,m);return this.Cs(n,_,f,p.readTime)?this.ys(e,qm(n,null,"F")):this.vs(e,_,n,p)}))))})))))}ws(e,n,r,o){return Sv(n)||o.isEqual(Se.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,r,o)?Z.resolve(null):(po()<=Pe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(n)),this.vs(e,f,n,vR(o,fc)).next((m=>m)))}))}Ds(e,n){let r=new Ht(Yb(e));return n.forEach(((o,c)=>{Jh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return po()<=Pe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",yo(n)),this.ps.getDocumentsMatchingQuery(e,n,xr.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="LocalStore",ZI=3e8;class WI{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Et(ze),this.xs=new Ea((c=>bg(c)),Tg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function e2(s,e,n,r){return new WI(s,e,n,r)}async function yT(s,e){const n=Re(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const f=[],m=[];let p=Be();for(const _ of o){f.push(_.batchId);for(const T of _.mutations)p=p.add(T.key)}for(const _ of c){m.push(_.batchId);for(const T of _.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(r,p).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:m})))}))}))}function t2(s,e){const n=Re(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,_,T){const w=_.batch,x=w.keys();let U=Z.resolve();return x.forEach((Y=>{U=U.next((()=>T.getEntry(p,Y))).next((te=>{const W=_.docVersions.get(Y);Ze(W!==null,48541),te.version.compareTo(W)<0&&(w.applyToRemoteDocument(te,_),te.isValidDocument()&&(te.setReadTime(_.commitVersion),T.addEntry(te)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(p,w)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=Be();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(p=p.add(m.batch.mutations[_].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function _T(s){const e=Re(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function n2(s,e){const n=Re(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((T,w)=>{const x=o.get(w);if(!x)return;m.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,w))));let U=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?U=U.withResumeToken(sn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),o=o.insert(w,U),(function(te,W,pe){return te.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=ZI?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(x,U,T)&&m.push(n.Pi.updateTargetData(c,U))}));let p=xs(),_=Be();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),m.push(i2(c,f,e.documentUpdates).next((T=>{p=T.ks,_=T.qs}))),!r.isEqual(Se.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));m.push(T)}return Z.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,_))).next((()=>p))})).then((c=>(n.Ms=o,c)))}function i2(s,e,n){let r=Be(),o=Be();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let f=xs();return n.forEach(((m,p)=>{const _=c.get(m);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):ce(Og,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function s2(s,e){const n=Re(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=_g),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function r2(s,e){const n=Re(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,Z.resolve(o)):n.Pi.allocateTargetId(r).next((f=>(o=new vr(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Ym(s,e,n){const r=Re(s),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Ho(f))throw f;ce(Og,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Uv(s,e,n){const r=Re(s);let o=Se.min(),c=Be();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,_,T){const w=Re(p),x=w.xs.get(T);return x!==void 0?Z.resolve(w.Ms.get(x)):w.Pi.getTargetData(_,T)})(r,f,Bi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{c=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?o:Se.min(),n?c:Be()))).next((m=>(a2(r,FR(e),m),{documents:m,Qs:c})))))}function a2(s,e,n){let r=s.Os.get(e)||Se.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class Pv{constructor(){this.activeTargetIds=JR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o2{constructor(){this.Mo=new Pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="ConnectivityMonitor";class Bv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(zv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(zv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function Qm(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="RestConnection",c2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===km?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const f=Qm(),m=this.zo(e,n.toUriEncodedString());ce(Tm,`Sending RPC '${e}' ${f}:`,m,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:_}=new URL(m),T=Uo(_);return this.Jo(e,m,p,r,T).then((w=>(ce(Tm,`Received RPC '${e}' ${f}: `,w),w)),(w=>{throw No(Tm,`RPC '${e}' ${f} failed with error: `,w,"url: ",m,"request:",r),w}))}Ho(e,n,r,o,c,f){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=c2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class f2 extends u2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const f=Qm();return new Promise(((m,p)=>{const _=new Eb;_.setWithCredentials(!0),_.listenOnce(bb.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case mh.NO_ERROR:const w=_.getResponseJson();ce(an,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),m(w);break;case mh.TIMEOUT:ce(an,`RPC '${e}' ${f} timed out`),p(new ae(X.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const x=_.getStatus();if(ce(an,`RPC '${e}' ${f} failed with status:`,x,"response text:",_.getResponseText()),x>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const Y=U==null?void 0:U.error;if(Y&&Y.status&&Y.message){const te=(function(pe){const ue=pe.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ue)>=0?ue:X.UNKNOWN})(Y.status);p(new ae(te,Y.message))}else p(new ae(X.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new ae(X.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ce(an,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(o);ce(an,`RPC '${e}' ${f} sending request:`,o),_.send(n,"POST",T,r,15)}))}T_(e,n,r){const o=Qm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=wb(),m=Ab(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const T=c.join("");ce(an,`Creating RPC '${e}' stream ${o}: ${T}`,p);const w=f.createWebChannel(T,p);this.I_(w);let x=!1,U=!1;const Y=new h2({Yo:W=>{U?ce(an,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(x||(ce(an,`Opening RPC '${e}' stream ${o} transport.`),w.open(),x=!0),ce(an,`RPC '${e}' stream ${o} sending:`,W),w.send(W))},Zo:()=>w.close()}),te=(W,pe,ue)=>{W.listen(pe,(le=>{try{ue(le)}catch(Ae){setTimeout((()=>{throw Ae}),0)}}))};return te(w,$l.EventType.OPEN,(()=>{U||(ce(an,`RPC '${e}' stream ${o} transport opened.`),Y.o_())})),te(w,$l.EventType.CLOSE,(()=>{U||(U=!0,ce(an,`RPC '${e}' stream ${o} transport closed`),Y.a_(),this.E_(w))})),te(w,$l.EventType.ERROR,(W=>{U||(U=!0,No(an,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),Y.a_(new ae(X.UNAVAILABLE,"The operation could not be completed")))})),te(w,$l.EventType.MESSAGE,(W=>{var pe;if(!U){const ue=W.data[0];Ze(!!ue,16349);const le=ue,Ae=(le==null?void 0:le.error)||((pe=le[0])==null?void 0:pe.error);if(Ae){ce(an,`RPC '${e}' stream ${o} received error:`,Ae);const me=Ae.status;let ne=(function(C){const V=Pt[C];if(V!==void 0)return rT(V)})(me),R=Ae.message;ne===void 0&&(ne=X.INTERNAL,R="Unknown error status: "+me+" with message "+Ae.message),U=!0,Y.a_(new ae(ne,R)),w.close()}else ce(an,`RPC '${e}' stream ${o} received:`,ue),Y.u_(ue)}})),te(m,Tb.STAT_EVENT,(W=>{W.stat===Vm.PROXY?ce(an,`RPC '${e}' stream ${o} detected buffering proxy`):W.stat===Vm.NOPROXY&&ce(an,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(s){return new pI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="PersistentStream";class ET{constructor(e,n,r,o,c,f,m,p){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ae(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(qv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ce(qv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class d2 extends ET{constructor(e,n,r,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=vI(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Se.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Se.min():f.readTime?qi(f.readTime):Se.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Km(this.serializer),n.addTarget=(function(c,f){let m;const p=f.target;if(m=zm(p)?{documents:TI(c,p)}:{query:AI(c,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=lT(c,f.resumeToken);const _=Hm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(Se.min())>0){m.readTime=jh(c,f.snapshotVersion.toTimestamp());const _=Hm(c,f.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const r=SI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Km(this.serializer),n.removeTarget=e,this.q_(n)}}class m2 extends ET{constructor(e,n,r,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bI(e.writeResults,e.commitTime),r=qi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Km(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>EI(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{}class p2 extends g2{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,Gm(n,r),o,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(X.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,Gm(n,r),o,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ae(X.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class y2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(n),this.aa=!1):ce("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class _2{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ba(this)&&(ce(_a,"Restarting streams for network reachability change."),await(async function(p){const _=Re(p);_.Ea.add(4),await Rc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await nf(_)})(this))}))})),this.Ra=new y2(r,o)}}async function nf(s){if(ba(s))for(const e of s.da)await e(!0)}async function Rc(s){for(const e of s.da)await e(!1)}function bT(s,e){const n=Re(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),kg(n)?jg(n):Fo(n).O_()&&Vg(n,e))}function Mg(s,e){const n=Re(s),r=Fo(n);n.Ia.delete(e),r.O_()&&TT(n,e),n.Ia.size===0&&(r.O_()?r.L_():ba(n)&&n.Ra.set("Unknown"))}function Vg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(s).Y_(e)}function TT(s,e){s.Va.Ue(e),Fo(s).Z_(e)}function jg(s){s.Va=new fI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Fo(s).start(),s.Ra.ua()}function kg(s){return ba(s)&&!Fo(s).x_()&&s.Ia.size>0}function ba(s){return Re(s).Ea.size===0}function AT(s){s.Va=void 0}async function v2(s){s.Ra.set("Online")}async function E2(s){s.Ia.forEach(((e,n)=>{Vg(s,e)}))}async function b2(s,e){AT(s),kg(s)?(s.Ra.ha(e),jg(s)):s.Ra.set("Unknown")}async function T2(s,e,n){if(s.Ra.set("Online"),e instanceof oT&&e.state===2&&e.cause)try{await(async function(o,c){const f=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){ce(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lh(s,r)}else if(e instanceof _h?s.Va.Ze(e):e instanceof aT?s.Va.st(e):s.Va.tt(e),!n.isEqual(Se.min()))try{const r=await _T(s.localStore);n.compareTo(r)>=0&&await(function(c,f){const m=c.Va.Tt(f);return m.targetChanges.forEach(((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ia.get(_);T&&c.Ia.set(_,T.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,_)=>{const T=c.Ia.get(p);if(!T)return;c.Ia.set(p,T.withResumeToken(sn.EMPTY_BYTE_STRING,T.snapshotVersion)),TT(c,p);const w=new vr(T.target,p,_,T.sequenceNumber);Vg(c,w)})),c.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(r){ce(_a,"Failed to raise snapshot:",r),await Lh(s,r)}}async function Lh(s,e,n){if(!Ho(e))throw e;s.Ea.add(1),await Rc(s),s.Ra.set("Offline"),n||(n=()=>_T(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ce(_a,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await nf(s)}))}function wT(s,e){return e().catch((n=>Lh(s,n,e)))}async function sf(s){const e=Re(s),n=Nr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_g;for(;A2(e);)try{const o=await s2(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,w2(e,o)}catch(o){await Lh(e,o)}ST(e)&&xT(e)}function A2(s){return ba(s)&&s.Ta.length<10}function w2(s,e){s.Ta.push(e);const n=Nr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function ST(s){return ba(s)&&!Nr(s).x_()&&s.Ta.length>0}function xT(s){Nr(s).start()}async function S2(s){Nr(s).ra()}async function x2(s){const e=Nr(s);for(const n of s.Ta)e.ea(n.mutations)}async function C2(s,e,n){const r=s.Ta.shift(),o=xg.from(r,e,n);await wT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await sf(s)}async function R2(s,e){e&&Nr(s).X_&&await(async function(r,o){if((function(f){return cI(f)&&f!==X.ABORTED})(o.code)){const c=r.Ta.shift();Nr(r).B_(),await wT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await sf(r)}})(s,e),ST(s)&&xT(s)}async function Hv(s,e){const n=Re(s);n.asyncQueue.verifyOperationInProgress(),ce(_a,"RemoteStore received new credentials");const r=ba(n);n.Ea.add(3),await Rc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nf(n)}async function I2(s,e){const n=Re(s);e?(n.Ea.delete(2),await nf(n)):e||(n.Ea.add(2),await Rc(n),n.Ra.set("Unknown"))}function Fo(s){return s.ma||(s.ma=(function(n,r,o){const c=Re(n);return c.sa(),new d2(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:v2.bind(null,s),t_:E2.bind(null,s),r_:b2.bind(null,s),H_:T2.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),kg(s)?jg(s):s.Ra.set("Unknown")):(await s.ma.stop(),AT(s))}))),s.ma}function Nr(s){return s.fa||(s.fa=(function(n,r,o){const c=Re(n);return c.sa(),new m2(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:S2.bind(null,s),r_:R2.bind(null,s),ta:x2.bind(null,s),na:C2.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await sf(s)):(await s.fa.stop(),s.Ta.length>0&&(ce(_a,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const f=Date.now()+r,m=new Lg(e,n,f,o,c);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(s,e){if(Ss("AsyncQueue",`${e}: ${s}`),Ho(s))return new ae(X.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{static emptySet(e){return new So(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=Jl(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new So;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.ga=new Et(_e.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Lo{constructor(e,n,r,o,c,f,m,p,_){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,n,r,o,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Lo(e,n,So.emptySet(n),f,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class D2{constructor(){this.queries=Fv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Re(n),c=o.queries;o.queries=Fv(),c.forEach(((f,m)=>{for(const p of m.Sa)p.onError(r)}))})(this,new ae(X.ABORTED,"Firestore shutting down"))}}function Fv(){return new Ea((s=>Kb(s)),$h)}async function CT(s,e){const n=Re(s);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new N2,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Ug(f,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Pg(n)}async function RT(s,e){const n=Re(s),r=e.query;let o=3;const c=n.queries.get(r);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function O2(s,e){const n=Re(s);let r=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const m of f.Sa)m.Fa(o)&&(r=!0);f.wa=o}}r&&Pg(n)}function M2(s,e,n){const r=Re(s),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function Pg(s){s.Ca.forEach((e=>{e.next()}))}var Xm,Kv;(Kv=Xm||(Xm={})).Ma="default",Kv.Cache="cache";class IT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.key=e}}class DT{constructor(e){this.key=e}}class V2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=Yb(e),this.tu=new So(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Gv,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,w)=>{const x=o.get(T),U=Jh(this.query,w)?w:null,Y=!!x&&this.mutatedKeys.has(x.key),te=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let W=!1;x&&U?x.data.isEqual(U.data)?Y!==te&&(r.track({type:3,doc:U}),W=!0):this.su(x,U)||(r.track({type:2,doc:U}),W=!0,(p&&this.eu(U,p)>0||_&&this.eu(U,_)<0)&&(m=!0)):!x&&U?(r.track({type:0,doc:U}),W=!0):x&&!U&&(r.track({type:1,doc:x}),W=!0,(p||_)&&(m=!0)),W&&(U?(f=f.add(U),c=te?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,w)=>(function(U,Y){const te=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:W})}};return te(U)-te(Y)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,_=p!==this.Za;return this.Za=p,f.length!==0||_?{snapshot:new Lo(this.query,e.tu,c,f,e.mutatedKeys,p===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new DT(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new NT(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zg="SyncEngine";class j2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class k2{constructor(e){this.key=e,this.hu=!1}}class L2{constructor(e,n,r,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ea((m=>Kb(m)),$h),this.Iu=new Map,this.Eu=new Set,this.du=new Et(_e.comparator),this.Au=new Map,this.Ru=new Ig,this.Vu={},this.mu=new Map,this.fu=ko.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U2(s,e,n=!0){const r=LT(s);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await OT(r,e,n,!0),o}async function P2(s,e){const n=LT(s);await OT(n,e,!0,!1)}async function OT(s,e,n,r){const o=await r2(s.localStore,Bi(e)),c=o.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let m;return r&&(m=await z2(s,e,c,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&bT(s.remoteStore,o),m}async function z2(s,e,n,r,o){s.pu=(w,x,U)=>(async function(te,W,pe,ue){let le=W.view.ru(pe);le.Cs&&(le=await Uv(te.localStore,W.query,!1).then((({documents:R})=>W.view.ru(R,le))));const Ae=ue&&ue.targetChanges.get(W.targetId),me=ue&&ue.targetMismatches.get(W.targetId)!=null,ne=W.view.applyChanges(le,te.isPrimaryClient,Ae,me);return Qv(te,W.targetId,ne.au),ne.snapshot})(s,w,x,U);const c=await Uv(s.localStore,e,!0),f=new V2(e,c.Qs),m=f.ru(c.documents),p=Cc.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),_=f.applyChanges(m,s.isPrimaryClient,p);Qv(s,n,_.au);const T=new j2(e,n,f);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),_.snapshot}async function B2(s,e,n){const r=Re(s),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((f=>!$h(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Ym(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Mg(r.remoteStore,o.targetId),$m(r,o.targetId)})).catch(qo)):($m(r,o.targetId),await Ym(r.localStore,o.targetId,!0))}async function q2(s,e){const n=Re(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mg(n.remoteStore,r.targetId))}async function H2(s,e,n){const r=$2(s);try{const o=await(function(f,m){const p=Re(f),_=pt.now(),T=m.reduce(((U,Y)=>U.add(Y.key)),Be());let w,x;return p.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let Y=xs(),te=Be();return p.Ns.getEntries(U,T).next((W=>{Y=W,Y.forEach(((pe,ue)=>{ue.isValidDocument()||(te=te.add(pe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(U,Y))).next((W=>{w=W;const pe=[];for(const ue of m){const le=sI(ue,w.get(ue.key).overlayedDocument);le!=null&&pe.push(new Mr(ue.key,le,Ub(le.value.mapValue),di.exists(!0)))}return p.mutationQueue.addMutationBatch(U,_,pe,m)})).next((W=>{x=W;const pe=W.applyToLocalDocumentSet(w,te);return p.documentOverlayCache.saveOverlays(U,W.batchId,pe)}))})).then((()=>({batchId:x.batchId,changes:Xb(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let _=f.Vu[f.currentUser.toKey()];_||(_=new Et(ze)),_=_.insert(m,p),f.Vu[f.currentUser.toKey()]=_})(r,o.batchId,n),await Ic(r,o.changes),await sf(r.remoteStore)}catch(o){const c=Ug(o,"Failed to persist write");n.reject(c)}}async function MT(s,e){const n=Re(s);try{const r=await n2(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const f=n.Au.get(c);f&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ze(f.hu,14607):o.removedDocuments.size>0&&(Ze(f.hu,42227),f.hu=!1))})),await Ic(n,r,e)}catch(r){await qo(r)}}function Yv(s,e,n){const r=Re(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=Re(f);p.onlineState=m;let _=!1;p.queries.forEach(((T,w)=>{for(const x of w.Sa)x.va(m)&&(_=!0)})),_&&Pg(p)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function G2(s,e,n){const r=Re(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let f=new Et(_e.comparator);f=f.insert(c,ln.newNoDocument(c,Se.min()));const m=Be().add(c),p=new ef(Se.min(),new Map,new Et(ze),f,m);await MT(r,p),r.du=r.du.remove(c),r.Au.delete(e),Bg(r)}else await Ym(r.localStore,e,!1).then((()=>$m(r,e,n))).catch(qo)}async function F2(s,e){const n=Re(s),r=e.batch.batchId;try{const o=await t2(n.localStore,e);jT(n,r,null),VT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ic(n,o)}catch(o){await qo(o)}}async function K2(s,e,n){const r=Re(s);try{const o=await(function(f,m){const p=Re(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return p.mutationQueue.lookupMutationBatch(_,m).next((w=>(Ze(w!==null,37113),T=w.keys(),p.mutationQueue.removeMutationBatch(_,w)))).next((()=>p.mutationQueue.performConsistencyCheck(_))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(_,T,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>p.localDocuments.getDocuments(_,T)))}))})(r.localStore,e);jT(r,e,n),VT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ic(r,o)}catch(o){await qo(o)}}function VT(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function jT(s,e,n){const r=Re(s);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function $m(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||kT(s,r)}))}function kT(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Mg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Bg(s))}function Qv(s,e,n){for(const r of n)r instanceof NT?(s.Ru.addReference(r.key,e),Y2(s,r)):r instanceof DT?(ce(zg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||kT(s,r.key)):be(19791,{wu:r})}function Y2(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ce(zg,"New document in limbo: "+n),s.Eu.add(r),Bg(s))}function Bg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new _e(ht.fromString(e)),r=s.fu.next();s.Au.set(r,new k2(n)),s.du=s.du.insert(n,r),bT(s.remoteStore,new vr(Bi(Ag(n.path)),r,"TargetPurposeLimboResolution",Yh.ce))}}async function Ic(s,e,n){const r=Re(s),o=[],c=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,p)=>{f.push(r.pu(p,e,n).then((_=>{var T;if((_||n)&&r.isPrimaryClient){const w=_?!_.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(_){o.push(_);const w=Dg.As(p.targetId,_);c.push(w)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(p,_){const T=Re(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>Z.forEach(_,(x=>Z.forEach(x.Es,(U=>T.persistence.referenceDelegate.addReference(w,x.targetId,U))).next((()=>Z.forEach(x.ds,(U=>T.persistence.referenceDelegate.removeReference(w,x.targetId,U)))))))))}catch(w){if(!Ho(w))throw w;ce(Og,"Failed to update sequence numbers: "+w)}for(const w of _){const x=w.targetId;if(!w.fromCache){const U=T.Ms.get(x),Y=U.snapshotVersion,te=U.withLastLimboFreeSnapshotVersion(Y);T.Ms=T.Ms.insert(x,te)}}})(r.localStore,c))}async function Q2(s,e){const n=Re(s);if(!n.currentUser.isEqual(e)){ce(zg,"User change. New user:",e.toKey());const r=await yT(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new ae(X.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ic(n,r.Ls)}}function X2(s,e){const n=Re(s),r=n.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let o=Be();const c=n.Iu.get(e);if(!c)return o;for(const f of c){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function LT(s){const e=Re(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=MT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G2.bind(null,e),e.Pu.H_=O2.bind(null,e.eventManager),e.Pu.yu=M2.bind(null,e.eventManager),e}function $2(s){const e=Re(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K2.bind(null,e),e}class Uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return e2(this.persistence,new JI,e.initialUser,this.serializer)}Cu(e){return new pT(Ng.mi,this.serializer)}Du(e){return new o2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uh.provider={build:()=>new Uh};class J2 extends Uh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof kh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new pT((r=>kh.mi(r,n)),this.serializer)}}class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q2.bind(null,this.syncEngine),await I2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new D2})()}createDatastore(e){const n=tf(e.databaseInfo.databaseId),r=(function(c){return new f2(c)})(e.databaseInfo);return(function(c,f,m,p){return new p2(c,f,m,p)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,f,m){return new _2(r,o,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>Yv(this.syncEngine,n,0)),(function(){return Bv.v()?new Bv:new l2})())}createSyncEngine(e,n){return(function(o,c,f,m,p,_,T){const w=new L2(o,c,f,m,p,_);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Re(o);ce(_a,"RemoteStore shutting down."),c.Ea.add(5),await Rc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class Z2{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async f=>{ce(Dr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(ce(Dr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ug(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function wm(s,e){s.asyncQueue.verifyOperationInProgress(),ce(Dr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await yT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Xv(s,e){s.asyncQueue.verifyOperationInProgress();const n=await W2(s);ce(Dr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>Hv(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>Hv(e.remoteStore,o))),s._onlineComponents=e}async function W2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ce(Dr,"Using user provided OfflineComponentProvider");try{await wm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await wm(s,new Uh)}}else ce(Dr,"Using default OfflineComponentProvider"),await wm(s,new J2(void 0));return s._offlineComponents}async function PT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ce(Dr,"Using user provided OnlineComponentProvider"),await Xv(s,s._uninitializedComponentsProvider._online)):(ce(Dr,"Using default OnlineComponentProvider"),await Xv(s,new Jm))),s._onlineComponents}function eN(s){return PT(s).then((e=>e.syncEngine))}async function zT(s){const e=await PT(s),n=e.eventManager;return n.onListen=U2.bind(null,e.syncEngine),n.onUnlisten=B2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=q2.bind(null,e.syncEngine),n}function tN(s,e,n={}){const r=new bs;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,p,_){const T=new UT({next:x=>{T.Nu(),f.enqueueAndForget((()=>RT(c,w)));const U=x.docs.has(m);!U&&x.fromCache?_.reject(new ae(X.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&x.fromCache&&p&&p.source==="server"?_.reject(new ae(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),w=new IT(Ag(m.path),T,{includeMetadataChanges:!0,qa:!0});return CT(c,w)})(await zT(s),s.asyncQueue,e,n,r))),r.promise}function nN(s,e,n={}){const r=new bs;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,p,_){const T=new UT({next:x=>{T.Nu(),f.enqueueAndForget((()=>RT(c,w))),x.fromCache&&p.source==="server"?_.reject(new ae(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),w=new IT(m,T,{includeMetadataChanges:!0,qa:!0});return CT(c,w)})(await zT(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="firestore.googleapis.com",Jv=!0;class Zv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qT,this.ssl=Jv}else this.host=e.host,this.ssl=e.ssl??Jv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VI)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_R("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rf{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lR;switch(r.type){case"firstParty":return new fR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=$v.get(n);r&&(ce("ComponentProvider","Removing Datastore"),$v.delete(n),r.terminate())})(this),Promise.resolve()}}function iN(s,e,n,r={}){var _;s=Fi(s,rf);const o=Uo(e),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${n}`;o&&(OE(`https://${m}`),ME("Firestore",!0)),c.host!==qT&&c.host!==m&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:o,emulatorOptions:r};if(!Ts(p,f)&&(s._setSettings(p),r.mockUserToken)){let T,w;if(typeof r.mockUserToken=="string")T=r.mockUserToken,w=on.MOCK_USER;else{T=mS(r.mockUserToken,(_=s._app)==null?void 0:_.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ae(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new on(x)}s._authCredentials=new cR(new xb(T,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ta(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Sc(n,It._jsonSchema))return new It(e,r||null,new _e(ht.fromString(n.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:Bt("string",It._jsonSchemaVersion),referencePath:Bt("string")};class wr extends Ta{constructor(e,n,r){super(e,n,Ag(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new _e(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function bn(s,e,...n){if(s=Qt(s),Cb("collection","path",e),s instanceof rf){const r=ht.fromString(e,...n);return hv(r),new wr(s,null,r)}{if(!(s instanceof It||s instanceof wr))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ht.fromString(e,...n));return hv(r),new wr(s.firestore,null,r)}}function ui(s,e,...n){if(s=Qt(s),arguments.length===1&&(e=yg.newId()),Cb("doc","path",e),s instanceof rf){const r=ht.fromString(e,...n);return uv(r),new It(s,null,new _e(r))}{if(!(s instanceof It||s instanceof wr))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ht.fromString(e,...n));return uv(r),new It(s.firestore,s instanceof wr?s.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="AsyncQueue";class eE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vT(this,"async_queue_retry"),this._c=()=>{const r=Am();r&&ce(Wv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;ce(Wv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",tE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Lg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:tE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function tE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ko extends rf{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new eE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eE(e),this._firestoreClient=void 0,await e}}}function sN(s,e){const n=typeof s=="object"?s:LE(),r=typeof s=="string"?s:e,o=rg(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=fS("firestore");c&&iN(o,...c)}return o}function qg(s){if(s._terminated)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||rN(s),s._firestoreClient}function rN(s){var r,o,c;const e=s._freezeSettings(),n=(function(m,p,_,T){return new IR(m,p,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,BT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Z2(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(sn.fromBase64String(e))}catch(n){throw new ae(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $n(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sc(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Bt("string",$n._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(Sc(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:Bt("string",Hi._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sc(e,Gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Gi(e.vectorValues);throw new ae(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gi._jsonSchemaVersion="firestore/vectorValue/1.0",Gi._jsonSchema={type:Bt("string",Gi._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=/^__.*__$/;class oN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new xc(e,this.data,n,this.fieldTransforms)}}class HT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:s})}}class of{constructor(e,n,r,o,c,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new of({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ph(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GT(this.Ac)&&aN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||tf(e)}Cc(e,n,r,o=!1){return new of({Ac:e,methodName:n,Dc:r,path:nn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hg(s){const e=s._freezeSettings(),n=tf(s._databaseId);return new lN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function cN(s,e,n,r,o,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);Kg("Data must be an object, but it was:",f,r);const m=KT(r,f);let p,_;if(c.merge)p=new kn(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const x=Zm(e,w,n);if(!f.contains(x))throw new ae(X.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);QT(T,x)||T.push(x)}p=new kn(T),_=f.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,_=f.fieldTransforms;return new oN(new Tn(m),p,_)}class lf extends Nc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}function FT(s,e,n){return new of({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Gg extends Nc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=FT(this,e,!0),r=this.vc.map((c=>Aa(c,n))),o=new Vo(r);return new nT(e.path,o)}isEqual(e){return e instanceof Gg&&Ts(this.vc,e.vc)}}class Fg extends Nc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=FT(this,e,!0),r=this.vc.map((c=>Aa(c,n))),o=new jo(r);return new nT(e.path,o)}isEqual(e){return e instanceof Fg&&Ts(this.vc,e.vc)}}function uN(s,e,n,r){const o=s.Cc(1,e,n);Kg("Data must be an object, but it was:",o,r);const c=[],f=Tn.empty();Or(r,((p,_)=>{const T=Yg(e,p,n);_=Qt(_);const w=o.yc(T);if(_ instanceof lf)c.push(T);else{const x=Aa(_,w);x!=null&&(c.push(T),f.set(T,x))}}));const m=new kn(c);return new HT(f,m,o.fieldTransforms)}function hN(s,e,n,r,o,c){const f=s.Cc(1,e,n),m=[Zm(e,r,n)],p=[o];if(c.length%2!=0)throw new ae(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)m.push(Zm(e,c[x])),p.push(c[x+1]);const _=[],T=Tn.empty();for(let x=m.length-1;x>=0;--x)if(!QT(_,m[x])){const U=m[x];let Y=p[x];Y=Qt(Y);const te=f.yc(U);if(Y instanceof lf)_.push(U);else{const W=Aa(Y,te);W!=null&&(_.push(U),T.set(U,W))}}const w=new kn(_);return new HT(T,w,f.fieldTransforms)}function fN(s,e,n,r=!1){return Aa(n,s.Cc(r?4:3,e))}function Aa(s,e){if(YT(s=Qt(s)))return Kg("Unsupported field value:",e,s),KT(s,e);if(s instanceof Nc)return(function(r,o){if(!GT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let f=0;for(const m of r){let p=Aa(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),f++}return{arrayValue:{values:c}}})(s,e)}return(function(r,o){if((r=Qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=pt.fromDate(r);return{timestampValue:jh(o.serializer,c)}}if(r instanceof pt){const c=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jh(o.serializer,c)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:lT(o.serializer,r._byteString)};if(r instanceof It){const c=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Rg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Gi)return(function(f,m){return{mapValue:{fields:{[kb]:{stringValue:Lb},[Dh]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return wg(m.serializer,_)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Kh(r)}`)})(s,e)}function KT(s,e){const n={};return Nb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Or(s,((r,o)=>{const c=Aa(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function YT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof pt||s instanceof Hi||s instanceof $n||s instanceof It||s instanceof Nc||s instanceof Gi)}function Kg(s,e,n){if(!YT(n)||!Rb(n)){const r=Kh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Zm(s,e,n){if((e=Qt(e))instanceof af)return e._internalPath;if(typeof e=="string")return Yg(s,e);throw Ph("Field path arguments must be of type string or ",s,!1,void 0,n)}const dN=new RegExp("[~\\*/\\[\\]]");function Yg(s,e,n){if(e.search(dN)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new af(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Ph(s,e,n,r,o){const c=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||f)&&(p+=" (found",c&&(p+=` in field ${r}`),f&&(p+=` in document ${o}`),p+=")"),new ae(X.INVALID_ARGUMENT,m+s+p)}function QT(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mN extends XT{data(){return super.data()}}function cf(s,e){return typeof e=="string"?Yg(s,e):e instanceof af?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ae(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qg{}class $T extends Qg{}function ua(s,e,...n){let r=[];e instanceof Qg&&r.push(e),r=r.concat(n),(function(c){const f=c.filter((p=>p instanceof Xg)).length,m=c.filter((p=>p instanceof uf)).length;if(f>1||f>0&&m>0)throw new ae(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class uf extends $T{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uf(e,n,r)}_apply(e){const n=this._parse(e);return ZT(e._query,n),new Ta(e.firestore,e.converter,Bm(e._query,n))}_parse(e){const n=Hg(e.firestore);return(function(c,f,m,p,_,T,w){let x;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ae(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){iE(w,T);const Y=[];for(const te of w)Y.push(nE(p,c,te));x={arrayValue:{values:Y}}}else x=nE(p,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||iE(w,T),x=fN(m,f,w,T==="in"||T==="not-in");return zt.create(_,T,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wl(s,e,n){const r=e,o=cf("where",s);return uf._create(o,r,n)}class Xg extends Qg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:mi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let f=o;const m=c.getFlattenedFilters();for(const p of m)ZT(f,p),f=Bm(f,p)})(e._query,n),new Ta(e.firestore,e.converter,Bm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $g extends $T{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $g(e,n)}_apply(e){const n=(function(o,c,f){if(o.startAt!==null)throw new ae(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(c,f)})(e._query,this._field,this._direction);return new Ta(e.firestore,e.converter,(function(o,c){const f=o.explicitOrderBy.concat([c]);return new Go(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function JT(s,e="asc"){const n=e,r=cf("orderBy",s);return $g._create(r,n)}function nE(s,e,n){if(typeof(n=Qt(n))=="string"){if(n==="")throw new ae(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fb(e)&&n.indexOf("/")!==-1)throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ht.fromString(n));if(!_e.isDocumentKey(r))throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vv(s,new _e(r))}if(n instanceof It)return vv(s,n._key);throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function iE(s,e){if(!Array.isArray(s)||s.length===0)throw new ae(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZT(s,e){const n=(function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ae(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pN{convertValue(e,n="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Or(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){var r,o,c;const n=(c=(o=(r=e.fields)==null?void 0:r[Dh].arrayValue)==null?void 0:o.values)==null?void 0:c.map((f=>Rt(f.doubleValue)));return new Gi(n)}convertGeoPoint(e){return new Hi(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const n=Cr(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);Ze(mT(r),9688,{name:e});const o=new mc(r.get(1),r.get(3)),c=new _e(r.popFirst(5));return o.isEqual(n)||Ss(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class ec{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends XT{constructor(e,n,r,o,c,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=da._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:Bt("string",da._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class vh extends da{data(e={}){return super.data(e)}}class xo{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ec(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new vh(this._firestore,this._userDataWriter,r.key,r,new ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new vh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ec(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new vh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ec(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:_N(m.type),doc:p,oldIndex:_,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _N(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(s){s=Fi(s,It);const e=Fi(s.firestore,Ko);return tN(qg(e),s._key).then((n=>vN(e,s,n)))}xo._jsonSchemaVersion="firestore/querySnapshot/1.0",xo._jsonSchema={type:Bt("string",xo._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class WT extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function Mn(s){s=Fi(s,Ta);const e=Fi(s.firestore,Ko),n=qg(e),r=new WT(e);return gN(s._query),nN(n,s._query).then((o=>new xo(e,r,s,o)))}function Co(s,e,n){s=Fi(s,It);const r=Fi(s.firestore,Ko),o=yN(s.converter,e);return Jg(r,[cN(Hg(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,di.none())])}function Eo(s,e,n,...r){s=Fi(s,It);const o=Fi(s.firestore,Ko),c=Hg(o);let f;return f=typeof(e=Qt(e))=="string"||e instanceof af?hN(c,"updateDoc",s._key,e,n,r):uN(c,"updateDoc",s._key,e),Jg(o,[f.toMutation(s._key,di.exists(!0))])}function sE(s){return Jg(Fi(s.firestore,Ko),[new Sg(s._key,di.none())])}function Jg(s,e){return(function(r,o){const c=new bs;return r.asyncQueue.enqueueAndForget((async()=>H2(await eN(r),o,c))),c.promise})(qg(s),e)}function vN(s,e,n){const r=n.docs.get(e._key),o=new WT(s);return new da(s,o,e._key,r,new ec(n.hasPendingWrites,n.fromCache),e.converter)}function rE(...s){return new Gg("arrayUnion",s)}function EN(...s){return new Fg("arrayRemove",s)}(function(e,n=!0){(function(o){Bo=o})(Po),Io(new ma("firestore",((r,{instanceIdentifier:o,options:c})=>{const f=r.getProvider("app").getImmediate(),m=new Ko(new uR(r.getProvider("auth-internal")),new dR(f,r.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ae(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(_.options.projectId,T)})(f,o),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Tr(av,ov,e),Tr(av,ov,"esm2020")})();const eA={apiKey:"AIzaSyBy8CcUGLleucoYt73VtupuIHZllXnv1WA",authDomain:"richting-sales.firebaseapp.com",projectId:"richting-sales",storageBucket:"richting-sales.firebasestorage.app",messagingSenderId:"1048315100697",appId:"1:1048315100697:web:a053dc84c014107a827488",measurementId:"G-RYLL8X9JY0"},tA=kE(eA),ho=aR(tA),gt=sN(tA,"richting01");console.log("Firebase geinitialiseerd. Project:",eA.projectId,"Database: richting01");const Ro=s=>JSON.parse(JSON.stringify(s)),ca={login:async(s,e)=>{const n=await F1(ho,s,e);return await Sm(n.user)},loginWithGoogle:async()=>{const s=new ps;try{const e=await gC(ho,s);return await Sm(e.user)}catch(e){if(e.code==="auth/unauthorized-domain"){const n=window.location.hostname||window.location.host||"localhost";console.error(`DOMEIN ERROR: Voeg '${n}' toe aan Firebase Console -> Authentication -> Settings.`)}throw e}},register:async(s,e,n)=>{const o=(await G1(ho,s,n)).user.uid,c={id:o,email:s,name:e,role:_r.EDITOR,avatarUrl:`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=random`,department:"General"};return await Co(ui(gt,"users",o),Ro(c)),c},logout:async()=>X1(ho),resetPassword:async s=>H1(ho,s),updateUserRole:async(s,e)=>{await Eo(ui(gt,"users",s),{role:e})},onAuthStateChange:s=>Q1(ho,async e=>{if(e){const n=await Sm(e);s(n)}else s(null)})};async function Sm(s){var r;const e=ui(gt,"users",s.uid),n=await Wm(e);if(n.exists())return{id:s.uid,...n.data()};{const o={id:s.uid,email:s.email||"",name:s.displayName||((r=s.email)==null?void 0:r.split("@")[0])||"User",role:_r.EDITOR,avatarUrl:s.photoURL||void 0,department:"General"};return await Co(e,Ro(o)),o}}const bo={getDocuments:async()=>{try{const s=ua(bn(gt,"documents"),JT("uploadedAt","desc"));return(await Mn(s)).docs.map(n=>{const r=n.data();return{id:n.id,...r,viewedBy:r.viewedBy||[],likedBy:r.likedBy||[],tags:r.tags||[]}})}catch(s){throw s.code==="not-found"?(console.error("CRITISCHE FOUT: Database 'richting01' bestaat niet."),new Error("FIREBASE_DB_NOT_FOUND")):s}},getDocumentsForCustomer:async s=>{try{const e=ua(bn(gt,"documents"),Wl("customerId","==",s));return(await Mn(e)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>new Date(o.uploadedAt).getTime()-new Date(r.uploadedAt).getTime())}catch(e){return console.error("Error getting customer docs",e),[]}},addDocument:async s=>{await Co(ui(gt,"documents",s.id),Ro(s))},updateDocumentStats:async(s,e,n)=>{var o;const r=ui(gt,"documents",s);if(n==="view")await Eo(r,{viewedBy:rE(e)});else if(n==="like"){const c=await Wm(r);c.exists()&&((c.data().likedBy||[]).includes(e)?await Eo(r,{likedBy:EN(e)}):await Eo(r,{likedBy:rE(e)}))}else if(n==="archive"){const c=await Wm(r);if(c.exists()){const f=((o=c.data())==null?void 0:o.isArchived)||!1;await Eo(r,{isArchived:!f})}}},createBackup:async()=>{try{const e=(await Mn(bn(gt,"users"))).docs.map(w=>w.data()),r=(await Mn(bn(gt,"documents"))).docs.map(w=>w.data()),c=(await Mn(bn(gt,"customers"))).docs.map(w=>w.data()),m=(await Mn(bn(gt,"locations"))).docs.map(w=>w.data()),_=(await Mn(bn(gt,"contacts"))).docs.map(w=>w.data()),T={timestamp:new Date().toISOString(),users:e,documents:r,customers:c,locations:m,contacts:_};return JSON.stringify(T,null,2)}catch(s){return console.error("Backup failed",s),""}},seed:async()=>{try{if(!(await Mn(bn(gt,"documents"))).empty)return;console.log("Seed skipped or done")}catch(s){console.error("Seeding failed",s)}}},Vn={getCustomersForUser:async(s,e)=>{try{let n;return e===_r.ADMIN?n=ua(bn(gt,"customers")):n=ua(bn(gt,"customers"),Wl("assignedUserIds","array-contains",s)),(await Mn(n)).docs.map(c=>{const f=c.data();return{id:c.id,...f,assignedUserIds:f.assignedUserIds||[]}}).sort((c,f)=>new Date(f.createdAt).getTime()-new Date(c.createdAt).getTime())}catch(n){return console.error("Error fetching customers:",n),[]}},getAllUsers:async()=>{try{return(await Mn(bn(gt,"users"))).docs.map(e=>({id:e.id,...e.data()}))}catch(s){return console.error("Error fetching users:",s),[]}},addCustomer:async s=>{await Co(ui(gt,"customers",s.id),Ro(s))},updateCustomerStatus:async(s,e)=>{await Eo(ui(gt,"customers",s),{status:e})},deleteCustomer:async s=>{console.log("Deleting customer",s),await sE(ui(gt,"customers",s))},getLocations:async s=>{try{const e=ua(bn(gt,"locations"),Wl("customerId","==",s));return(await Mn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error fetching locations:",e),[]}},addLocation:async s=>{await Co(ui(gt,"locations",s.id),Ro(s))},getContactPersons:async s=>{try{const e=ua(bn(gt,"contacts"),Wl("customerId","==",s));return(await Mn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error fetching contacts:",e),[]}},addContactPerson:async s=>{await Co(ui(gt,"contacts",s.id),Ro(s))},deleteContactPerson:async s=>{await sE(ui(gt,"contacts",s))},getOrganisatieProfiel:async s=>{try{const e=ua(bn(gt,"organisatieProfielen"),Wl("customerId","==",s),JT("analyseDatum","desc")),n=await Mn(e);return n.empty?null:{id:n.docs[0].id,...n.docs[0].data()}}catch(e){return console.error("Error fetching organisatie profiel:",e),null}}},bN="https://wsrv.nl/?url=richting.nl/wp-content/uploads/2019/12/logo-richting.png&w=400&output=png",nA=({className:s="h-10"})=>y.jsx("img",{src:bN,alt:"Richting",className:`${s} object-contain`}),TN=({children:s,user:e,onLogout:n,currentView:r,onNavigate:o})=>{if(!e)return y.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:s});const c=[{id:"dashboard",label:"De Krant",icon:""},{id:"customers",label:"Klanten",icon:""},{id:"knowledge",label:"Kennisbank",icon:""},{id:"chat",label:"Vraag het Gemini",icon:""},{id:"upload",label:"Nieuwe Bron",icon:""}],f=async m=>{await ca.updateUserRole(e.id,m),window.location.reload()};return y.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row font-sans text-slate-800",children:[y.jsxs("aside",{className:"w-full md:w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm sticky top-0 h-auto md:h-screen z-10",children:[y.jsx("div",{className:"p-6 border-b border-gray-100 flex justify-center md:justify-start",children:y.jsx(nA,{className:"h-8 md:h-10 w-auto"})}),y.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:c.map(m=>y.jsxs("button",{onClick:()=>o(m.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${r===m.id?"bg-orange-50 text-richting-orange border-l-4 border-richting-orange":"text-gray-600 hover:bg-gray-50 hover:text-slate-900"}`,children:[y.jsx("span",{className:"text-lg",children:m.icon}),m.label]},m.id))}),y.jsxs("div",{className:"p-4 border-t border-gray-100 bg-slate-50",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[y.jsxs("span",{className:"relative flex h-3 w-3",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),y.jsx("span",{className:"text-xs font-medium text-green-700",children:"Database: Richting01"})]}),y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx("img",{src:e.avatarUrl,alt:e.name,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm bg-gray-200"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:e.name}),y.jsx("div",{className:"flex items-center gap-1",children:y.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.role})})]})]}),y.jsxs("button",{onClick:n,className:"w-full text-xs text-gray-500 hover:text-red-600 font-medium text-left px-1 flex items-center gap-1 mb-4",children:[y.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Uitloggen"]}),y.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[y.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-400 mb-2",children:"Dev Tools (Rollen)"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>f(_r.ADMIN),className:`flex-1 text-[10px] py-1 rounded border ${e.role===_r.ADMIN?"bg-slate-800 text-white border-slate-800":"bg-white text-gray-600 border-gray-300"}`,children:"Admin"}),y.jsx("button",{onClick:()=>f(_r.EDITOR),className:`flex-1 text-[10px] py-1 rounded border ${e.role===_r.EDITOR?"bg-slate-800 text-white border-slate-800":"bg-white text-gray-600 border-gray-300"}`,children:"Editor"})]})]})]})]}),y.jsx("main",{className:"flex-1 overflow-y-auto h-screen",children:y.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:s})})]})};var aE;(function(s){s.STRING="string",s.NUMBER="number",s.INTEGER="integer",s.BOOLEAN="boolean",s.ARRAY="array",s.OBJECT="object"})(aE||(aE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oE;(function(s){s.LANGUAGE_UNSPECIFIED="language_unspecified",s.PYTHON="python"})(oE||(oE={}));var lE;(function(s){s.OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(lE||(lE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=["user","model","function","system"];var uE;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(uE||(uE={}));var hE;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(hE||(hE={}));var fE;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(fE||(fE={}));var dE;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER"})(dE||(dE={}));var lc;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.OTHER="OTHER"})(lc||(lc={}));var mE;(function(s){s.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",s.RETRIEVAL_QUERY="RETRIEVAL_QUERY",s.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",s.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",s.CLASSIFICATION="CLASSIFICATION",s.CLUSTERING="CLUSTERING"})(mE||(mE={}));var gE;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(gE||(gE={}));var pE;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(pE||(pE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class fo extends cn{constructor(e,n){super(e),this.response=n}}class iA extends cn{constructor(e,n,r,o){super(e),this.status=n,this.statusText=r,this.errorDetails=o}}class Sr extends cn{}class sA extends cn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="https://generativelanguage.googleapis.com",wN="v1beta",SN="0.24.1",xN="genai-js";var va;(function(s){s.GENERATE_CONTENT="generateContent",s.STREAM_GENERATE_CONTENT="streamGenerateContent",s.COUNT_TOKENS="countTokens",s.EMBED_CONTENT="embedContent",s.BATCH_EMBED_CONTENTS="batchEmbedContents"})(va||(va={}));class CN{constructor(e,n,r,o,c){this.model=e,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=c}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||wN;let c=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||AN}/${r}/${this.model}:${this.task}`;return this.stream&&(c+="?alt=sse"),c}}function RN(s){const e=[];return s!=null&&s.apiClient&&e.push(s.apiClient),e.push(`${xN}/${SN}`),e.join(" ")}async function IN(s){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",RN(s.requestOptions)),n.append("x-goog-api-key",s.apiKey);let r=(e=s.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Sr(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,c]of r.entries()){if(o==="x-goog-api-key")throw new Sr(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Sr(`Header name ${o} can only be set using the apiClient field`);n.append(o,c)}}return n}async function NN(s,e,n,r,o,c){const f=new CN(s,e,n,r,c);return{url:f.toString(),fetchOptions:Object.assign(Object.assign({},VN(c)),{method:"POST",headers:await IN(f),body:o})}}async function Dc(s,e,n,r,o,c={},f=fetch){const{url:m,fetchOptions:p}=await NN(s,e,n,r,o,c);return DN(m,p,f)}async function DN(s,e,n=fetch){let r;try{r=await n(s,e)}catch(o){ON(o,s)}return r.ok||await MN(r,s),r}function ON(s,e){let n=s;throw n.name==="AbortError"?(n=new sA(`Request aborted when fetching ${e.toString()}: ${s.message}`),n.stack=s.stack):s instanceof iA||s instanceof Sr||(n=new cn(`Error fetching from ${e.toString()}: ${s.message}`),n.stack=s.stack),n}async function MN(s,e){let n="",r;try{const o=await s.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new iA(`Error fetching from ${e.toString()}: [${s.status} ${s.statusText}] ${n}`,s.status,s.statusText,r)}function VN(s){const e={};if((s==null?void 0:s.signal)!==void 0||(s==null?void 0:s.timeout)>=0){const n=new AbortController;(s==null?void 0:s.timeout)>=0&&setTimeout(()=>n.abort(),s.timeout),s!=null&&s.signal&&s.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(s){return s.text=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Eh(s.candidates[0]))throw new fo(`${mr(s)}`,s);return jN(s)}else if(s.promptFeedback)throw new fo(`Text not available. ${mr(s)}`,s);return""},s.functionCall=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Eh(s.candidates[0]))throw new fo(`${mr(s)}`,s);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),yE(s)[0]}else if(s.promptFeedback)throw new fo(`Function call not available. ${mr(s)}`,s)},s.functionCalls=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Eh(s.candidates[0]))throw new fo(`${mr(s)}`,s);return yE(s)}else if(s.promptFeedback)throw new fo(`Function call not available. ${mr(s)}`,s)},s}function jN(s){var e,n,r,o;const c=[];if(!((n=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.text&&c.push(f.text),f.executableCode&&c.push("\n```"+f.executableCode.language+`
`+f.executableCode.code+"\n```\n"),f.codeExecutionResult&&c.push("\n```\n"+f.codeExecutionResult.output+"\n```\n");return c.length>0?c.join(""):""}function yE(s){var e,n,r,o;const c=[];if(!((n=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.functionCall&&c.push(f.functionCall);if(c.length>0)return c}const kN=[lc.RECITATION,lc.SAFETY,lc.LANGUAGE];function Eh(s){return!!s.finishReason&&kN.includes(s.finishReason)}function mr(s){var e,n,r;let o="";if((!s.candidates||s.candidates.length===0)&&s.promptFeedback)o+="Response was blocked",!((e=s.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${s.promptFeedback.blockReason}`),!((n=s.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${s.promptFeedback.blockReasonMessage}`);else if(!((r=s.candidates)===null||r===void 0)&&r[0]){const c=s.candidates[0];Eh(c)&&(o+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(o+=`: ${c.finishMessage}`))}return o}function yc(s){return this instanceof yc?(this.v=s,this):new yc(s)}function LN(s,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(s,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(x){r[x]&&(o[x]=function(U){return new Promise(function(Y,te){c.push([x,U,Y,te])>1||m(x,U)})})}function m(x,U){try{p(r[x](U))}catch(Y){w(c[0][3],Y)}}function p(x){x.value instanceof yc?Promise.resolve(x.value.v).then(_,T):w(c[0][2],x)}function _(x){m("next",x)}function T(x){m("throw",x)}function w(x,U){x(U),c.shift(),c.length&&m(c[0][0],c[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function UN(s){const e=s.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=BN(e),[r,o]=n.tee();return{stream:zN(r),response:PN(o)}}async function PN(s){const e=[],n=s.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return Zg(qN(e));e.push(o)}}function zN(s){return LN(this,arguments,function*(){const n=s.getReader();for(;;){const{value:r,done:o}=yield yc(n.read());if(o)break;yield yield yc(Zg(r))}})}function BN(s){const e=s.getReader();return new ReadableStream({start(r){let o="";return c();function c(){return e.read().then(({value:f,done:m})=>{if(m){if(o.trim()){r.error(new cn("Failed to parse stream"));return}r.close();return}o+=f;let p=o.match(_E),_;for(;p;){try{_=JSON.parse(p[1])}catch{r.error(new cn(`Error parsing JSON response: "${p[1]}"`));return}r.enqueue(_),o=o.substring(p[0].length),p=o.match(_E)}return c()}).catch(f=>{let m=f;throw m.stack=f.stack,m.name==="AbortError"?m=new sA("Request aborted when reading from the stream"):m=new cn("Error reading from the stream"),m})}}})}function qN(s){const e=s[s.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of s){if(r.candidates){let o=0;for(const c of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=c.citationMetadata,n.candidates[o].groundingMetadata=c.groundingMetadata,n.candidates[o].finishReason=c.finishReason,n.candidates[o].finishMessage=c.finishMessage,n.candidates[o].safetyRatings=c.safetyRatings,c.content&&c.content.parts){n.candidates[o].content||(n.candidates[o].content={role:c.content.role||"user",parts:[]});const f={};for(const m of c.content.parts)m.text&&(f.text=m.text),m.functionCall&&(f.functionCall=m.functionCall),m.executableCode&&(f.executableCode=m.executableCode),m.codeExecutionResult&&(f.codeExecutionResult=m.codeExecutionResult),Object.keys(f).length===0&&(f.text=""),n.candidates[o].content.parts.push(f)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(s,e,n,r){const o=await Dc(e,va.STREAM_GENERATE_CONTENT,s,!0,JSON.stringify(n),r);return UN(o)}async function aA(s,e,n,r){const c=await(await Dc(e,va.GENERATE_CONTENT,s,!1,JSON.stringify(n),r)).json();return{response:Zg(c)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(s){if(s!=null){if(typeof s=="string")return{role:"system",parts:[{text:s}]};if(s.text)return{role:"system",parts:[s]};if(s.parts)return s.role?s:{role:"system",parts:s.parts}}}function _c(s){let e=[];if(typeof s=="string")e=[{text:s}];else for(const n of s)typeof n=="string"?e.push({text:n}):e.push(n);return HN(e)}function HN(s){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const c of s)"functionResponse"in c?(n.parts.push(c),o=!0):(e.parts.push(c),r=!0);if(r&&o)throw new cn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new cn("No content is provided for sending chat message.");return r?e:n}function GN(s,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=s.generateContentRequest!=null;if(s.contents){if(o)throw new Sr("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=s.contents}else if(o)r=Object.assign(Object.assign({},r),s.generateContentRequest);else{const c=_c(s);r.contents=[c]}return{generateContentRequest:r}}function vE(s){let e;return s.contents?e=s:e={contents:[_c(s)]},s.systemInstruction&&(e.systemInstruction=oA(s.systemInstruction)),e}function FN(s){return typeof s=="string"||Array.isArray(s)?{content:_c(s)}:s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],KN={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function YN(s){let e=!1;for(const n of s){const{role:r,parts:o}=n;if(!e&&r!=="user")throw new cn(`First content should be with role 'user', got ${r}`);if(!cE.includes(r))throw new cn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(cE)}`);if(!Array.isArray(o))throw new cn("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new cn("Each Content should have at least one part");const c={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const m of o)for(const p of EE)p in m&&(c[p]+=1);const f=KN[r];for(const m of EE)if(!f.includes(m)&&c[m]>0)throw new cn(`Content with role '${r}' can't contain '${m}' part`);e=!0}}function bE(s){var e;if(s.candidates===void 0||s.candidates.length===0)return!1;const n=(e=s.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="SILENT_ERROR";class QN{constructor(e,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(YN(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,o,c,f,m,p;await this._sendPromise;const _=_c(e),T={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,_]},w=Object.assign(Object.assign({},this._requestOptions),n);let x;return this._sendPromise=this._sendPromise.then(()=>aA(this._apiKey,this.model,T,w)).then(U=>{var Y;if(bE(U.response)){this._history.push(_);const te=Object.assign({parts:[],role:"model"},(Y=U.response.candidates)===null||Y===void 0?void 0:Y[0].content);this._history.push(te)}else{const te=mr(U.response);te&&console.warn(`sendMessage() was unsuccessful. ${te}. Inspect response object for details.`)}x=U}).catch(U=>{throw this._sendPromise=Promise.resolve(),U}),await this._sendPromise,x}async sendMessageStream(e,n={}){var r,o,c,f,m,p;await this._sendPromise;const _=_c(e),T={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,_]},w=Object.assign(Object.assign({},this._requestOptions),n),x=rA(this._apiKey,this.model,T,w);return this._sendPromise=this._sendPromise.then(()=>x).catch(U=>{throw new Error(TE)}).then(U=>U.response).then(U=>{if(bE(U)){this._history.push(_);const Y=Object.assign({},U.candidates[0].content);Y.role||(Y.role="model"),this._history.push(Y)}else{const Y=mr(U);Y&&console.warn(`sendMessageStream() was unsuccessful. ${Y}. Inspect response object for details.`)}}).catch(U=>{U.message!==TE&&console.error(U)}),x}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(s,e,n,r){return(await Dc(e,va.COUNT_TOKENS,s,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(s,e,n,r){return(await Dc(e,va.EMBED_CONTENT,s,!1,JSON.stringify(n),r)).json()}async function JN(s,e,n,r){const o=n.requests.map(f=>Object.assign(Object.assign({},f),{model:e}));return(await Dc(e,va.BATCH_EMBED_CONTENTS,s,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=oA(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const o=vE(e),c=Object.assign(Object.assign({},this._requestOptions),n);return aA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}async generateContentStream(e,n={}){var r;const o=vE(e),c=Object.assign(Object.assign({},this._requestOptions),n);return rA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}startChat(e){var n;return new QN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=GN(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return XN(this.apiKey,this.model,r,o)}async embedContent(e,n={}){const r=FN(e),o=Object.assign(Object.assign({},this._requestOptions),n);return $N(this.apiKey,this.model,r,o)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return JN(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new cn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new AE(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Sr("Cached content must contain a `name` field.");if(!e.model)throw new Sr("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const f of o)if(n!=null&&n[f]&&e[f]&&(n==null?void 0:n[f])!==e[f]){if(f==="model"){const m=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,p=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(m===p)continue}throw new Sr(`Different value for "${f}" specified in modelParams (${n[f]}) and cachedContent (${e[f]})`)}const c=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new AE(this.apiKey,c,r)}}const zh=new ZN("AIzaSyBjTJOUHlcE-aE1p1f1C1wAyXXnqmbSQfY"),WN=async s=>{if(!zh)return console.warn("No API Key provided. Returning mock analysis."),{summary:"AI analyse niet beschikbaar (geen API key). Dit is een placeholder.",mainCategoryId:"strategy",subCategoryId:"yearplan",tags:["Demo","NoKey"]};try{const n=`
      Je bent een content analist voor Richting.nl. Analyseer de volgende tekst.
      
      TAAK:
      1. Schrijf een scherpe, zakelijke samenvatting (max 25 woorden).
      2. Categoriseer het document door een Main Category ID en een Sub Category ID te kiezen uit de lijst hieronder.
      3. Genereer 3 relevante tags.
      
      CATEGORIE STRUCTUUR:
      ${tc.map(U=>`HOOFDCATEGORIE: ${U.label} (ID: ${U.id})
       SUBCATEGORIEN: ${U.subCategories.map(Y=>`${Y.label} (ID: ${Y.id})`).join(", ")}`).join(`

`)}
      
      TEKST:
      ${s.substring(0,1e4)}
      
      Geef het antwoord in JSON formaat:
      {
        "summary": "...",
        "mainCategoryId": "...",
        "subCategoryId": "...",
        "tags": ["...", "...", "..."]
      }
    `;let m=(await(await zh.getGenerativeModel({model:"gemini-2.5-flash"}).generateContent(n)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();const p=m.match(/\{[\s\S]*\}/);p&&(m=p[0]);const _=JSON.parse(m),T=tc.find(U=>U.id===_.mainCategoryId)||tc[0],x=T.subCategories.some(U=>U.id===_.subCategoryId)?_.subCategoryId:T.subCategories[0].id;return{summary:_.summary||"Geen samenvatting.",mainCategoryId:T.id,subCategoryId:x,tags:_.tags||[]}}catch(e){return console.error("Gemini analysis failed:",e),{summary:"Fout bij analyse.",mainCategoryId:"strategy",subCategoryId:"yearplan",tags:["Error"]}}},eD=async(s,e)=>{if(!zh)return{answer:"Configureer de API key om de AI assistent te gebruiken.",citedIds:[]};try{const r=`
      Je bent de AI Kennisbank assistent van Richting.nl.
      Beantwoord de vraag op basis van de bronnen.
      
      BELANGRIJK:
      - Citeer je bronnen door de titel te noemen.
      - Wees professioneel, direct en behulpzaam.
      - Als het antwoord niet in de bronnen staat, geef dit aan.
      
      BRONNEN:
      ${e.filter(m=>!m.isArchived).slice(0,15).map(m=>`ID: ${m.id}
TITEL: ${m.title}
CATEGORIE: ${m.mainCategoryId}
INHOUD: ${m.content.substring(0,800)}
---`).join(`
`)}
      
      VRAAG:
      ${s}
    `;return{answer:(await(await zh.getGenerativeModel({model:"gemini-2.5-flash"}).generateContent(r)).response).text()||"Geen antwoord.",citedIds:[]}}catch{return{answer:"Excuses, ik kan de vraag niet verwerken.",citedIds:[]}}},tD=()=>y.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),lA=({filled:s})=>y.jsx("svg",{className:`w-4 h-4 ${s?"fill-richting-orange text-richting-orange":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),eg=()=>y.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),cA=()=>y.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),nD=()=>y.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),wE=()=>y.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),iD=()=>y.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),uA=()=>y.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),sD=()=>y.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),hA=()=>y.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),fA=()=>y.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm-1 2l5 5h-5V4zM6 20V4h5v7h7v9H6z"})}),dA=()=>y.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5v1.5H19v2h-1.5V7h2V8.5zm-5 0h1v3h-1v-3zM9 9.5h1v-1H9v1z",transform:"translate(0, 1)"})}),vs=(s,e)=>{const n=tc.find(o=>o.id===s);if(!e)return(n==null?void 0:n.label)||s;const r=n==null?void 0:n.subCategories.find(o=>o.id===e);return(r==null?void 0:r.label)||e},mo=s=>{const e={1:.5,2:1,3:3,4:6,5:10};return s>5?s:e[s]||s},go=s=>{const e={1:1,2:3,3:7,4:15,5:40};return s>5?s:e[s]||s},mA=s=>{switch(s){case"active":return"Actief";case"churned":return"Gearchiveerd";case"prospect":return"Prospect";case"rejected":return"Afgewezen";default:return s}},Bh=s=>s?(s=s.trim(),s.startsWith("http://")||s.startsWith("https://")?s:`https://${s}`):"",tg=s=>{if(!s)return null;const e=Bh(s);return`https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${encodeURIComponent(e)}&size=128`},ch=s=>(console.log("Error code:",s),s.includes("auth/invalid-email")?"Ongeldig e-mailadres.":s.includes("auth/user-not-found")?"Geen account gevonden met dit e-mailadres.":s.includes("auth/wrong-password")?"Onjuist wachtwoord.":s.includes("auth/email-already-in-use")?"Dit e-mailadres is al in gebruik.":s.includes("auth/weak-password")?"Wachtwoord moet minimaal 6 tekens zijn.":s.includes("auth/operation-not-allowed")?"Inlogmethode staat uit. Ga naar Firebase Console > Authentication > Sign-in method en zet Email/Password of Google aan.":s.includes("auth/popup-closed-by-user")?"Inlogscherm is gesloten voordat het klaar was.":s.includes("auth/popup-blocked")?"De inlog pop-up werd geblokkeerd door je browser. Sta pop-ups toe.":s.includes("auth/unauthorized-domain")?`Domein fout. Voeg '${window.location.hostname||window.location.host||"unknown"}' toe aan Authorized Domains in Firebase.`:s.includes("FIREBASE_DB_NOT_FOUND")?"Database 'richting01' niet gevonden. Maak deze aan in Firestore (Test Mode).":`Er is iets misgegaan (${s}). Probeer het opnieuw.`),rD=()=>y.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-lg w-full text-center border-l-4 border-red-500",children:[y.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),y.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Database 'richting01' Niet Gevonden"}),y.jsxs("p",{className:"text-gray-600 mb-6 leading-relaxed",children:["De applicatie probeert te verbinden met Firestore database: ",y.jsx("br",{}),y.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded font-bold text-red-600",children:"richting01"})]}),y.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg text-left text-sm text-slate-700 space-y-2 border border-gray-200",children:[y.jsx("p",{className:"font-bold text-slate-900",children:"Controleer in Firebase Console:"}),y.jsxs("ol",{className:"list-decimal pl-4 space-y-1",children:[y.jsxs("li",{children:["Ga naar ",y.jsx("strong",{children:"Firestore Database"}),"."]}),y.jsx("li",{children:'Kijk linksboven naast het kopje "Database".'}),y.jsxs("li",{children:["Heet de database daar ",y.jsx("code",{children:"richting01"}),"?"]}),y.jsx("li",{children:"Zo nee, maak hem aan."}),y.jsxs("li",{children:["Zorg dat hij in ",y.jsx("strong",{children:"Test Mode"})," staat."]})]})]}),y.jsx("button",{onClick:()=>window.location.reload(),className:"mt-8 bg-richting-orange text-white px-6 py-3 rounded-lg font-bold hover:bg-orange-600 transition-colors w-full",children:"Ik heb dit gecheckt, herlaad pagina"})]})}),aD=({onLogin:s,onGoogleLogin:e,onRegister:n,onForgot:r,loading:o,error:c,success:f,setAuthError:m})=>{const[p,_]=fe.useState("login"),[T,w]=fe.useState(""),[x,U]=fe.useState(""),[Y,te]=fe.useState(""),W=le=>{le.preventDefault(),p==="login"?s(T,x):p==="register"?n(T,Y,x):p==="forgot"&&r(T)},pe=()=>{const le=window.location.hostname||window.location.host||"localhost";navigator.clipboard.writeText(le),alert(`Domein gekopieerd: ${le}`)},ue=window.location.hostname||window.location.host||"localhost";return y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-white",children:y.jsxs("div",{className:"w-full max-w-md p-8 bg-white",children:[y.jsxs("div",{className:"flex flex-col items-center mb-10",children:[y.jsx(nA,{className:"h-14 mb-6 w-auto"}),y.jsx("p",{className:"mt-2 text-gray-500 uppercase text-xs tracking-widest",children:"Kennis & Inzicht (Firebase Editie)"})]}),p!=="forgot"&&y.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[y.jsx("button",{onClick:()=>{_("login"),m("")},className:`flex-1 pb-3 text-sm font-medium transition-colors ${p==="login"?"text-richting-orange border-b-2 border-richting-orange":"text-gray-500"}`,children:"Inloggen"}),y.jsx("button",{onClick:()=>{_("register"),m("")},className:`flex-1 pb-3 text-sm font-medium transition-colors ${p==="register"?"text-richting-orange border-b-2 border-richting-orange":"text-gray-500"}`,children:"Registreren"})]}),c&&y.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 text-sm rounded-md border border-red-100",children:c}),f&&y.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-700 text-sm rounded-md border border-green-100",children:f}),y.jsxs("form",{onSubmit:W,className:"space-y-5",children:[p==="register"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Volledige Naam"}),y.jsx("input",{type:"text",required:!0,value:Y,onChange:le=>te(le.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-richting-orange focus:border-richting-orange"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"E-mailadres"}),y.jsx("input",{type:"email",required:!0,value:T,onChange:le=>w(le.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-richting-orange focus:border-richting-orange"})]}),p!=="forgot"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Wachtwoord"}),y.jsx("input",{type:"password",required:!0,value:x,onChange:le=>U(le.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-richting-orange focus:border-richting-orange"})]}),y.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-richting-orange hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-richting-orange transition-colors",children:o?"Laden...":p==="login"?"Inloggen":p==="register"?"Account Aanmaken":"Stuur Herstel Link"})]}),p==="login"&&y.jsxs("div",{className:"mt-6",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-300"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Of ga verder met"})})]}),y.jsx("div",{className:"mt-6",children:y.jsxs("button",{onClick:()=>e(),type:"button",className:"w-full flex justify-center items-center gap-3 px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-richting-orange transition-colors",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx(iD,{})}),y.jsx("span",{children:"Inloggen met Google"})]})})]}),y.jsxs("div",{className:"mt-6 text-center",children:[p==="login"&&y.jsx("button",{onClick:()=>_("forgot"),className:"text-sm text-gray-500 hover:text-richting-orange",children:"Wachtwoord vergeten?"}),p==="forgot"&&y.jsx("button",{onClick:()=>_("login"),className:"text-sm text-gray-500 hover:text-richting-orange",children:"Terug naar inloggen"})]}),y.jsxs("div",{className:"mt-10 pt-6 border-t border-gray-100 text-center",children:[y.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Login werkt niet? Klik hieronder om je domein te kopiren voor Firebase:"}),y.jsxs("div",{onClick:pe,className:"inline-flex items-center gap-2 bg-gray-50 px-3 py-1 rounded text-xs text-slate-600 cursor-pointer hover:bg-gray-100 border border-gray-200",title:"Klik om te kopiren",children:[y.jsx("code",{children:ue}),y.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})]})]})]})})},oD=({customer:s,user:e,onBack:n,onUpdate:r,onDelete:o,onOpenDoc:c})=>{var lt,gi,Yi,Qi,Xi,An,Ds,pi,Os,Ms;const[f,m]=fe.useState([]),[p,_]=fe.useState([]),[T,w]=fe.useState([]),[x,U]=fe.useState(null),[Y,te]=fe.useState(null),[W,pe]=fe.useState(null),[ue,le]=fe.useState(!1),[Ae,me]=fe.useState(!1),[ne,R]=fe.useState(!1),[S,C]=fe.useState(""),[V,D]=fe.useState(""),[k,I]=fe.useState(""),[Je,yt]=fe.useState(""),[j,ee]=fe.useState(""),[re,we]=fe.useState(""),[xe,M]=fe.useState("");fe.useEffect(()=>{(async()=>{const[de,ke,We,it]=await Promise.all([Vn.getLocations(s.id),Vn.getContactPersons(s.id),bo.getDocumentsForCustomer(s.id),Vn.getOrganisatieProfiel(s.id)]);m(de),_(ke),w(We),U(it)})()},[s]);const $=async()=>{if(!S||!V)return;const F={id:`loc_${Date.now()}`,customerId:s.id,name:S,address:V,city:k};await Vn.addLocation(F),m(de=>[...de,F]),le(!1),C(""),D(""),I("")},se=async()=>{if(!Je||!re)return;const F={id:`contact_${Date.now()}`,customerId:s.id,firstName:Je,lastName:j,email:re,role:xe};await Vn.addContactPerson(F),_(de=>[...de,F]),me(!1),yt(""),ee(""),we(""),M("")},oe=async F=>{await Vn.updateCustomerStatus(s.id,F),r({...s,status:F})},Te=async()=>{if(e.role!=="ADMIN"){alert("Geen rechten. Alleen een administrator kan klanten verwijderen.");return}if(window.confirm(`LET OP: Weet je zeker dat je '${s.name}' definitief wilt verwijderen? Dit kan niet ongedaan worden gemaakt.`)){R(!0);try{await Vn.deleteCustomer(s.id),o(s.id)}catch(F){console.error("Delete failed:",F),R(!1),alert(`Kon klant niet verwijderen: ${F.message}`)}}},Ie=F=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${F.address}, ${F.city}`)}`,Me=s.logoUrl||tg(s.website),At=F=>{switch(F){case ut.EMAIL:return y.jsx(hA,{});case ut.GOOGLE_DOC:return y.jsx(fA,{});case ut.PDF:return y.jsx(dA,{});case ut.URL:return y.jsx("span",{className:"text-xl",children:""});default:return y.jsx("span",{className:"text-xl",children:""})}};return y.jsxs("div",{className:"space-y-6",children:[y.jsx("button",{onClick:n,className:"text-gray-500 hover:text-richting-orange flex items-center gap-1 text-sm font-medium mb-4",children:" Terug naar overzicht"}),y.jsx("div",{className:"bg-white border-l-4 border-richting-orange rounded-r-xl shadow-sm p-6 mb-6",children:y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:s.name}),y.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 mt-2",children:[y.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:mA(s.status)}),y.jsx("span",{className:"text-gray-500",children:s.industry}),s.website&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"hidden md:inline text-gray-300",children:"|"}),y.jsxs("a",{href:Bh(s.website),target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-richting-orange hover:underline text-sm font-medium",children:[y.jsx("img",{src:tg(s.website)||"",alt:"",className:"w-4 h-4 object-contain rounded-sm",onError:F=>{F.target.style.display="none"}}),s.website.replace(/^https?:\/\//,""),y.jsx(eg,{})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[y.jsxs("select",{value:s.status,onChange:F=>oe(F.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 bg-white text-gray-600 focus:ring-richting-orange",children:[y.jsx("option",{value:"prospect",children:"Prospect"}),y.jsx("option",{value:"active",children:"Actief"}),y.jsx("option",{value:"churned",children:"Archief"}),y.jsx("option",{value:"rejected",children:"Afgewezen"})]}),e.role==="ADMIN"&&y.jsxs("button",{onClick:Te,disabled:ne,className:`text-xs flex items-center gap-1 text-red-500 hover:text-red-700 font-medium bg-red-50 px-2 py-1 rounded ${ne?"opacity-50 cursor-not-allowed":""}`,children:[y.jsx(uA,{}),ne?"Bezig...":"Verwijderen"]})]}),y.jsx("div",{className:"w-16 h-16 bg-white border border-gray-100 rounded-lg flex items-center justify-center overflow-hidden",children:Me?y.jsx("img",{src:Me,alt:s.name,className:"w-14 h-14 object-contain"}):y.jsx("div",{className:"w-full h-full bg-gray-50"})})]})]})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-2",children:[y.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[y.jsx(wE,{})," Locaties"]}),y.jsx("button",{onClick:()=>le(!0),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded text-slate-700 font-medium",children:"+ Toevoegen"})]}),ue&&y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4 animate-fade-in",children:[y.jsx("h4",{className:"text-xs font-bold uppercase text-gray-500 mb-3",children:"Nieuwe Locatie"}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("input",{type:"text",placeholder:"Naam (bijv. Hoofdkantoor)",className:"w-full text-sm border p-2 rounded",value:S,onChange:F=>C(F.target.value)}),y.jsx("input",{type:"text",placeholder:"Adres",className:"w-full text-sm border p-2 rounded",value:V,onChange:F=>D(F.target.value)}),y.jsx("input",{type:"text",placeholder:"Stad",className:"w-full text-sm border p-2 rounded",value:k,onChange:F=>I(F.target.value)}),y.jsxs("div",{className:"flex gap-2 pt-2",children:[y.jsx("button",{onClick:$,className:"bg-richting-orange text-white text-xs px-3 py-2 rounded font-bold",children:"Opslaan"}),y.jsx("button",{onClick:()=>le(!1),className:"text-gray-500 text-xs px-3 py-2",children:"Annuleren"})]})]})]}),y.jsxs("div",{className:"space-y-3",children:[f.length===0&&!ue&&y.jsx("p",{className:"text-sm text-gray-400 italic",children:"Nog geen locaties toegevoegd."}),f.map(F=>y.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100 shadow-sm flex justify-between items-center group",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-bold text-slate-800 text-sm",children:F.name}),y.jsxs("p",{className:"text-xs text-gray-500",children:[F.address,", ",F.city]})]}),y.jsx("a",{href:Ie(F),target:"_blank",rel:"noreferrer",className:"text-gray-400 hover:text-richting-orange p-2",title:"Bekijk op kaart",children:y.jsx(wE,{})})]},F.id))]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-2",children:[y.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[y.jsx(sD,{})," Contactpersonen"]}),y.jsx("button",{onClick:()=>me(!0),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded text-slate-700 font-medium",children:"+ Toevoegen"})]}),Ae&&y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4 animate-fade-in",children:[y.jsx("h4",{className:"text-xs font-bold uppercase text-gray-500 mb-3",children:"Nieuw Contact"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",placeholder:"Voornaam",className:"w-full text-sm border p-2 rounded",value:Je,onChange:F=>yt(F.target.value)}),y.jsx("input",{type:"text",placeholder:"Achternaam",className:"w-full text-sm border p-2 rounded",value:j,onChange:F=>ee(F.target.value)})]}),y.jsx("input",{type:"email",placeholder:"Email",className:"w-full text-sm border p-2 rounded",value:re,onChange:F=>we(F.target.value)}),y.jsx("input",{type:"text",placeholder:"Rol (bijv. HR Manager)",className:"w-full text-sm border p-2 rounded",value:xe,onChange:F=>M(F.target.value)}),y.jsxs("div",{className:"flex gap-2 pt-2",children:[y.jsx("button",{onClick:se,className:"bg-richting-orange text-white text-xs px-3 py-2 rounded font-bold",children:"Opslaan"}),y.jsx("button",{onClick:()=>me(!1),className:"text-gray-500 text-xs px-3 py-2",children:"Annuleren"})]})]})]}),y.jsxs("div",{className:"space-y-3",children:[p.length===0&&!Ae&&y.jsx("p",{className:"text-sm text-gray-400 italic",children:"Nog geen contactpersonen."}),p.map(F=>y.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100 shadow-sm",children:[y.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:[F.firstName," ",F.lastName]}),y.jsx("p",{className:"text-xs text-gray-500",children:F.role}),y.jsxs("a",{href:`https://mail.google.com/mail/?view=cm&fs=1&to=${F.email}`,target:"_blank",rel:"noreferrer",className:"text-xs text-richting-orange hover:underline block mt-1 flex items-center gap-1",children:[F.email," ",y.jsx(eg,{})]})]},F.id))]})]})]}),x&&y.jsxs("div",{className:"pt-8 border-t border-gray-200",children:[y.jsx("h3",{className:"font-bold text-slate-900 mb-4 text-lg",children:"Organisatie Analyse"}),y.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Analyse datum: ",new Date(x.analyseDatum).toLocaleDateString("nl-NL")]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[y.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[y.jsxs("h4",{className:"font-bold text-slate-900 mb-3",children:["Processen (",((lt=x.processen)==null?void 0:lt.length)||0,")"]}),y.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(gi=x.processen)==null?void 0:gi.map(F=>{const de=F.risicos||[],ke=de.map(ft=>{const Qe=ft.risico||x.risicos.find(js=>js.id===ft.risicoId);if(!Qe)return null;const Nt=ft.blootstelling||3,$i=mo(Qe.kans),yi=go(Qe.effect),Vs=Nt*$i*yi;return{risico:Qe,blootstelling:Nt,kans:$i,effect:yi,risicogetal:Vs}}).filter(Boolean),We=ke.length>0?ke.reduce((ft,Qe)=>ft+((Qe==null?void 0:Qe.risicogetal)||0),0)/ke.length:0,it=We>=400?1:We>=200?2:We>=100?3:We>=50?4:5,Ge=["Zeer hoog","Hoog","Middel","Laag","Zeer laag"],Ye=["bg-red-100 text-red-700","bg-orange-100 text-orange-700","bg-yellow-100 text-yellow-700","bg-blue-100 text-blue-700","bg-green-100 text-green-700"];return y.jsx("div",{onClick:()=>te(F),className:"p-3 border border-gray-200 rounded cursor-pointer hover:border-richting-orange transition-colors",children:y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h5",{className:"font-bold text-sm text-slate-900",children:F.naam}),y.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:F.beschrijving}),y.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[de.length," risico's"]})]}),y.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${Ye[it-1]}`,children:[it,". ",Ge[it-1]]})]})},F.id)})})]}),y.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[y.jsxs("h4",{className:"font-bold text-slate-900 mb-3",children:["Functies (",((Yi=x.functies)==null?void 0:Yi.length)||0,")"]}),y.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(Qi=x.functies)==null?void 0:Qi.map(F=>{const de=F.risicos||[],ke=de.map(ft=>{const Qe=ft.risico||x.risicos.find(js=>js.id===ft.risicoId);if(!Qe)return null;const Nt=ft.blootstelling||3,$i=mo(Qe.kans),yi=go(Qe.effect),Vs=Nt*$i*yi;return{risico:Qe,blootstelling:Nt,kans:$i,effect:yi,risicogetal:Vs}}).filter(Boolean),We=ke.length>0?ke.reduce((ft,Qe)=>ft+((Qe==null?void 0:Qe.risicogetal)||0),0)/ke.length:0,it=We>=400?1:We>=200?2:We>=100?3:We>=50?4:5,Ge=["Zeer hoog","Hoog","Middel","Laag","Zeer laag"],Ye=["bg-red-100 text-red-700","bg-orange-100 text-orange-700","bg-yellow-100 text-yellow-700","bg-blue-100 text-blue-700","bg-green-100 text-green-700"];return y.jsx("div",{onClick:()=>pe(F),className:"p-3 border border-gray-200 rounded cursor-pointer hover:border-richting-orange transition-colors",children:y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h5",{className:"font-bold text-sm text-slate-900",children:F.naam}),y.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:F.beschrijving}),F.fysiek!==void 0&&F.psychisch!==void 0&&y.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Fysiek: ",F.fysiek,"/5, Psychisch: ",F.psychisch,"/5"]}),y.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[de.length," risico's"]})]}),y.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${Ye[it-1]}`,children:[it,". ",Ge[it-1]]})]})},F.id)})})]})]}),(Y||W)&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[y.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[y.jsx("h3",{className:"font-bold text-slate-800",children:Y?`Proces: ${Y.naam}`:`Functie: ${W==null?void 0:W.naam}`}),y.jsx("button",{onClick:()=>{te(null),pe(null)},className:"text-gray-400 hover:text-gray-600",children:""})]}),y.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[Y&&y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Y.beschrijving}),y.jsxs("h4",{className:"font-bold text-slate-900 mb-3",children:["Risico's (",((Xi=Y.risicos)==null?void 0:Xi.length)||0,")"]}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Risico"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categorie"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Blootstelling (B)"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kans (W)"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Effect (E)"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Risicogetal (R)"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prioriteit"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(An=Y.risicos)==null?void 0:An.map((F,de)=>{const ke=F.risico||x.risicos.find(Qe=>Qe.id===F.risicoId);if(!ke)return null;const We=F.blootstelling||3,it=mo(ke.kans),Ge=go(ke.effect),Ye=We*it*Ge,ft=Ye>=400?1:Ye>=200?2:Ye>=100?3:Ye>=50?4:5;return{item:F,risico:ke,blootstelling:We,kans:it,effect:Ge,risicogetal:Ye,prioriteitNiveau:ft,idx:de}}).filter(Boolean).sort((F,de)=>((F==null?void 0:F.prioriteitNiveau)||5)-((de==null?void 0:de.prioriteitNiveau)||5)).map(F=>{if(!F)return null;const{risico:de,blootstelling:ke,kans:We,effect:it,risicogetal:Ge,prioriteitNiveau:Ye}=F,ft=["Zeer hoog","Hoog","Middel","Laag","Zeer laag"],Qe=["bg-red-100 text-red-700","bg-orange-100 text-orange-700","bg-yellow-100 text-yellow-700","bg-blue-100 text-blue-700","bg-green-100 text-green-700"],Nt={fysiek:"bg-blue-100 text-blue-700",psychisch:"bg-purple-100 text-purple-700",overige:"bg-gray-100 text-gray-700"};return y.jsxs("tr",{children:[y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:de.naam}),y.jsx("td",{className:"px-4 py-3",children:y.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Nt[de.categorie]||Nt.overige}`,children:de.categorie})}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ke}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:We}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:it}),y.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:Ge}),y.jsx("td",{className:"px-4 py-3",children:y.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${Qe[Ye-1]}`,children:[Ye,". ",ft[Ye-1]]})})]},F.idx)})}),y.jsx("tfoot",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("td",{colSpan:6,className:"px-4 py-3 text-right text-sm font-bold text-gray-900",children:"Totaal:"}),y.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:((Ds=Y.risicos)==null?void 0:Ds.map(F=>{const de=F.risico||x.risicos.find(Ge=>Ge.id===F.risicoId);if(!de)return 0;const ke=F.blootstelling||3,We=mo(de.kans),it=go(de.effect);return ke*We*it}).reduce((F,de)=>F+de,0))||0})]})})]})})]}),W&&y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:W.beschrijving}),y.jsx("h4",{className:"font-bold text-slate-900 mb-3",children:"Functiebelasting"}),y.jsx("div",{className:"mb-4",children:y.jsxs("div",{className:"flex gap-4",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-xs text-gray-500",children:"Fysiek"}),y.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[W.fysiek||0,"/5"]})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-xs text-gray-500",children:"Psychisch"}),y.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[W.psychisch||0,"/5"]})]})]})}),y.jsxs("h4",{className:"font-bold text-slate-900 mb-3",children:["Risico's (",((pi=W.risicos)==null?void 0:pi.length)||0,")"]}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Risico"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categorie"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Blootstelling (B)"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kans (W)"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Effect (E)"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Risicogetal (R)"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prioriteit"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Os=W.risicos)==null?void 0:Os.map((F,de)=>{const ke=F.risico||x.risicos.find(Qe=>Qe.id===F.risicoId);if(!ke)return null;const We=F.blootstelling||3,it=mo(ke.kans),Ge=go(ke.effect),Ye=We*it*Ge,ft=Ye>=400?1:Ye>=200?2:Ye>=100?3:Ye>=50?4:5;return{item:F,risico:ke,blootstelling:We,kans:it,effect:Ge,risicogetal:Ye,prioriteitNiveau:ft,idx:de}}).filter(Boolean).sort((F,de)=>((F==null?void 0:F.prioriteitNiveau)||5)-((de==null?void 0:de.prioriteitNiveau)||5)).map(F=>{if(!F)return null;const{risico:de,blootstelling:ke,kans:We,effect:it,risicogetal:Ge,prioriteitNiveau:Ye}=F,ft=["Zeer hoog","Hoog","Middel","Laag","Zeer laag"],Qe=["bg-red-100 text-red-700","bg-orange-100 text-orange-700","bg-yellow-100 text-yellow-700","bg-blue-100 text-blue-700","bg-green-100 text-green-700"],Nt={fysiek:"bg-blue-100 text-blue-700",psychisch:"bg-purple-100 text-purple-700",overige:"bg-gray-100 text-gray-700"};return y.jsxs("tr",{children:[y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:de.naam}),y.jsx("td",{className:"px-4 py-3",children:y.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Nt[de.categorie]||Nt.overige}`,children:de.categorie})}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ke}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:We}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:it}),y.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:Ge}),y.jsx("td",{className:"px-4 py-3",children:y.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${Qe[Ye-1]}`,children:[Ye,". ",ft[Ye-1]]})})]},F.idx)})}),y.jsx("tfoot",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("td",{colSpan:6,className:"px-4 py-3 text-right text-sm font-bold text-gray-900",children:"Totaal:"}),y.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:((Ms=W.risicos)==null?void 0:Ms.map(F=>{const de=F.risico||x.risicos.find(Ge=>Ge.id===F.risicoId);if(!de)return 0;const ke=F.blootstelling||3,We=mo(de.kans),it=go(de.effect);return ke*We*it}).reduce((F,de)=>F+de,0))||0})]})})]})})]})]})]})})]}),y.jsxs("div",{className:"pt-8 border-t border-gray-200",children:[y.jsx("h3",{className:"font-bold text-slate-900 mb-4 text-lg",children:"Klant Dossier"}),T.length===0?y.jsx("p",{className:"text-gray-500 text-sm italic",children:"Nog geen documenten gekoppeld aan dit dossier."}):y.jsx("div",{className:"grid grid-cols-1 gap-3",children:T.map(F=>y.jsxs("div",{onClick:()=>c(F),className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:border-richting-orange cursor-pointer group",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"text-gray-600",children:At(F.type)}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-sm text-slate-900 group-hover:text-richting-orange",children:F.title}),y.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(F.uploadedAt).toLocaleDateString()," - ",vs(F.mainCategoryId)]})]})]}),y.jsx("button",{className:"text-xs text-richting-orange font-bold uppercase",children:"Openen"})]},F.id))})]})]})},lD=({user:s,onOpenDoc:e})=>{const[n,r]=fe.useState([]),[o,c]=fe.useState([]),[f,m]=fe.useState(null),[p,_]=fe.useState([]),[T,w]=fe.useState(!1),[x,U]=fe.useState(!0),[Y,te]=fe.useState(""),[W,pe]=fe.useState(""),[ue,le]=fe.useState(""),[Ae,me]=fe.useState(""),[ne,R]=fe.useState([s.id]);fe.useEffect(()=>{(async()=>{U(!0);const ee=await Vn.getCustomersForUser(s.id,s.role),re=await Vn.getAllUsers();r(ee),c(re),U(!1)})()},[s]);const S=async()=>{if(!Y)return;const j={id:`cust_${Date.now()}`,name:Y,industry:W,website:Bh(ue),logoUrl:Bh(Ae),status:"active",assignedUserIds:ne,createdAt:new Date().toISOString()};await Vn.addCustomer(j),r(ee=>[...ee,j]),w(!1),te(""),pe(""),le(""),me("")},C=j=>{R(ee=>ee.includes(j)?ee.filter(re=>re!==j):[...ee,j])},V=(j,ee)=>{ee.stopPropagation(),_(re=>re.includes(j)?re.filter(we=>we!==j):[...re,j])},D=async()=>{for(const j of p)await Vn.updateCustomerStatus(j,"churned");r(j=>j.map(ee=>p.includes(ee.id)?{...ee,status:"churned"}:ee)),_([])},k=async()=>{if(s.role!=="ADMIN"){alert("Alleen beheerders mogen verwijderen.");return}if(window.confirm(`Weet je zeker dat je ${p.length} klanten definitief wilt verwijderen?`))try{for(const j of p)await Vn.deleteCustomer(j);r(j=>j.filter(ee=>!p.includes(ee.id))),_([]),alert("Klanten verwijderd.")}catch(j){console.error("Verwijderen mislukt:",j),alert("Er ging iets mis bij het verwijderen.")}},I=j=>{r(ee=>ee.map(re=>re.id===j.id?j:re)),m(j)},Je=j=>{r(ee=>ee.filter(re=>re.id!==j)),m(null)};if(f)return y.jsx(oD,{customer:f,user:s,onBack:()=>m(null),onUpdate:I,onDelete:Je,onOpenDoc:e});const yt=[...n].sort((j,ee)=>{const re={prospect:0,active:1,churned:2,rejected:3},we=re[j.status]??99,xe=re[ee.status]??99;return we!==xe?we-xe:new Date(ee.createdAt).getTime()-new Date(j.createdAt).getTime()});return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Klanten & Dossiers"}),y.jsxs("div",{className:"flex gap-3",children:[p.length>0&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{onClick:D,className:"bg-gray-100 text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-gray-200 transition-colors flex items-center gap-2",children:[y.jsx(cA,{})," Archiveren (",p.length,")"]}),s.role==="ADMIN"&&y.jsxs("button",{onClick:k,className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg font-bold hover:bg-red-100 transition-colors flex items-center gap-2",children:[y.jsx(uA,{})," Verwijderen (",p.length,")"]})]}),y.jsxs("button",{onClick:()=>w(!0),className:"bg-richting-orange text-white px-4 py-2 rounded-lg font-bold hover:bg-orange-600 transition-colors flex items-center gap-2",children:[y.jsx("span",{className:"text-lg",children:"+"})," Nieuwe Klant"]})]})]}),x?y.jsx("div",{className:"text-center py-10 text-gray-500",children:"Laden..."}):n.length===0?y.jsxs("div",{className:"text-center py-16 bg-white rounded-lg border border-gray-200",children:[y.jsx("p",{className:"text-gray-500 mb-4",children:"Je bent nog niet gekoppeld aan klanten."}),y.jsx("button",{onClick:()=>w(!0),className:"text-richting-orange font-bold hover:underline",children:"Maak je eerste klant aan"})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:yt.map(j=>{const ee=j.logoUrl||tg(j.website),re=p.includes(j.id),we=j.assignedUserIds||[];return y.jsxs("div",{onClick:()=>m(j),className:`bg-white rounded-xl shadow-sm border transition-all cursor-pointer group relative p-6 hover:shadow-md ${re?"border-richting-orange ring-1 ring-richting-orange":"border-gray-200"} ${j.status==="churned"||j.status==="rejected"?"opacity-60 grayscale":""}`,children:[y.jsx("div",{className:"absolute top-3 right-3 z-10 p-2",onClick:xe=>V(j.id,xe),children:y.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${re?"bg-richting-orange border-richting-orange":"bg-white border-gray-300 group-hover:border-gray-400"}`,children:re&&y.jsx("span",{className:"text-white text-xs font-bold",children:""})})}),y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-lg bg-white border border-gray-100 flex items-center justify-center overflow-hidden",children:ee?y.jsx("img",{src:ee,alt:j.name,className:"w-10 h-10 object-contain"}):y.jsx("div",{className:"w-full h-full bg-gray-50"})}),y.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold uppercase ${j.status==="active"?"bg-green-100 text-green-700":j.status==="prospect"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:mA(j.status)})]}),y.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1 group-hover:text-richting-orange",children:j.name}),y.jsx("p",{className:"text-sm text-gray-500 mb-6",children:j.industry||"Geen branche opgegeven"}),y.jsxs("div",{className:"border-t border-gray-100 pt-4 flex items-center justify-between",children:[y.jsxs("div",{className:"flex -space-x-2",children:[o.filter(xe=>we.includes(xe.id)).slice(0,3).map(xe=>y.jsx("img",{src:xe.avatarUrl,alt:xe.name,className:"w-8 h-8 rounded-full border-2 border-white bg-gray-200",title:xe.name},xe.id)),we.length>3&&y.jsxs("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gray-100 flex items-center justify-center text-xs font-bold text-gray-500",children:["+",we.length-3]})]}),y.jsx("span",{className:"text-xs text-gray-400",children:"Bekijk Dossier "})]})]},j.id)})}),T&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden",children:[y.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[y.jsx("h3",{className:"font-bold text-slate-800",children:"Nieuwe Klant Aanmaken"}),y.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),y.jsxs("div",{className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrijfsnaam"}),y.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange",placeholder:"Bijv. Jansen Bouw B.V.",value:Y,onChange:j=>te(j.target.value)})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branche"}),y.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange",placeholder:"Bijv. Bouw",value:W,onChange:j=>pe(j.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),y.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange",placeholder:"richting.nl (zonder https://)",value:ue,onChange:j=>le(j.target.value)})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo URL (Optioneel)"}),y.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange",placeholder:"Link naar afbeelding",value:Ae,onChange:j=>me(j.target.value)}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vul hier een link in als het automatische logo niet werkt."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Toegang"}),y.jsx("div",{className:"border border-gray-200 rounded-md max-h-40 overflow-y-auto divide-y divide-gray-100",children:o.map(j=>y.jsxs("div",{onClick:()=>C(j.id),className:`flex items-center gap-3 p-2 cursor-pointer hover:bg-gray-50 ${ne.includes(j.id)?"bg-orange-50":""}`,children:[y.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${ne.includes(j.id)?"bg-richting-orange border-richting-orange":"border-gray-300"}`,children:ne.includes(j.id)&&y.jsx("span",{className:"text-white text-xs",children:""})}),y.jsx("img",{src:j.avatarUrl,className:"w-6 h-6 rounded-full"}),y.jsxs("span",{className:"text-sm text-gray-700",children:[j.name," ",j.id===s.id&&"(Jij)"]})]},j.id))}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Geselecteerde collega's krijgen toegang tot dit dossier."})]}),y.jsx("button",{onClick:S,className:"w-full mt-4 bg-richting-orange text-white py-3 rounded-lg font-bold hover:bg-orange-600 transition-colors",children:"Klant Aanmaken"})]})]})})]})},cD=({documents:s,user:e,setView:n,openDocument:r,handleDocumentAction:o})=>{const c=fe.useMemo(()=>s.filter(p=>!p.isArchived),[s]),f=fe.useMemo(()=>[...c].sort((p,_)=>(_.likedBy||[]).length*2+(_.viewedBy||[]).length-((p.likedBy||[]).length*2+(p.viewedBy||[]).length)).slice(0,5),[c]),m=fe.useMemo(()=>c.slice(0,6),[c]);return y.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[y.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-end border-b-4 border-slate-900 pb-4 gap-4",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-4xl font-extrabold text-slate-900 tracking-tight",children:"HET LAATSTE NIEUWS"}),y.jsx("p",{className:"text-gray-500 mt-1",children:new Date().toLocaleDateString("nl-NL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),y.jsxs("div",{className:"text-right hidden md:block",children:[y.jsx("p",{className:"text-xs font-bold text-richting-orange uppercase",children:"Kennisbank Editie"}),y.jsxs("p",{className:"text-xs text-gray-400",children:[s.length," artikelen beschikbaar"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[y.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[m.length>0?y.jsxs("article",{className:"group cursor-pointer",onClick:()=>r(m[0]),children:[y.jsxs("div",{className:"relative h-64 w-full bg-slate-800 rounded-lg overflow-hidden mb-4 shadow-md transition-shadow group-hover:shadow-lg",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-richting-dark to-gray-600 opacity-90"}),y.jsxs("div",{className:"absolute bottom-0 left-0 p-6 w-full",children:[y.jsx("span",{className:"bg-richting-orange text-white text-[10px] font-bold px-2 py-1 uppercase mb-2 inline-block rounded-sm",children:vs(m[0].mainCategoryId)}),y.jsx("h3",{className:"text-3xl font-bold text-white leading-tight group-hover:underline decoration-richting-orange underline-offset-4",children:m[0].title})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsx("div",{className:"md:col-span-2",children:y.jsxs("p",{className:"text-lg text-slate-700 leading-relaxed font-serif",children:[y.jsx("span",{className:"text-3xl float-left mr-2 font-bold text-richting-orange leading-none h-8",children:'"'}),m[0].summary]})}),y.jsxs("div",{className:"flex flex-col justify-end text-sm text-gray-500 border-l border-gray-200 pl-4",children:[y.jsxs("div",{className:"mb-2",children:[y.jsx("span",{className:"font-semibold text-slate-900",children:"Rubriek:"})," ",vs(m[0].mainCategoryId,m[0].subCategoryId)]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold text-slate-900",children:"Datum:"})," ",new Date(m[0].uploadedAt).toLocaleDateString()]})]})]})]}):y.jsxs("div",{className:"text-gray-500 text-center py-20 bg-gray-50 rounded-lg border-2 border-dashed flex flex-col items-center",children:[y.jsx("p",{className:"mb-4",children:"Geen nieuws artikelen gevonden."}),y.jsx("button",{onClick:()=>n("upload"),className:"text-richting-orange font-bold hover:underline",children:"Voeg het eerste artikel toe"})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-12 border-t border-gray-200 pt-8",children:m.slice(1).map(p=>y.jsxs("article",{className:"flex flex-col h-full group",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("span",{className:"text-[10px] font-bold text-richting-orange uppercase tracking-wider",children:vs(p.mainCategoryId)}),y.jsx("span",{className:"text-gray-300 text-[10px]",children:"|"}),y.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:vs(p.mainCategoryId,p.subCategoryId)})]}),y.jsx("h4",{onClick:()=>r(p),className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-richting-orange cursor-pointer line-clamp-2 leading-tight",children:p.title}),y.jsx("p",{className:"text-gray-600 text-sm mb-4 flex-1 line-clamp-3 leading-relaxed",children:p.summary}),y.jsxs("div",{className:"mt-auto flex items-center justify-between pt-4 border-t border-gray-100",children:[y.jsxs("div",{className:"flex items-center text-xs text-gray-400 gap-4",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(tD,{})," ",(p.viewedBy||[]).length]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(lA,{filled:(p.likedBy||[]).includes(e.id)})," ",(p.likedBy||[]).length]})]}),y.jsx("button",{onClick:()=>r(p),className:"text-xs font-bold text-richting-orange hover:text-slate-900 transition-colors uppercase tracking-wide",children:"Lees meer"})]})]},p.id))})]}),y.jsxs("aside",{className:"lg:col-span-4 space-y-8",children:[y.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg",children:[y.jsx("h3",{className:"font-bold text-slate-900 mb-4 border-b border-gray-300 pb-2 uppercase tracking-wide text-sm",children:"Meest Gewaardeerd"}),y.jsx("ul",{className:"space-y-4",children:f.length>0?f.map((p,_)=>y.jsxs("li",{className:"flex gap-4 group cursor-pointer",onClick:()=>r(p),children:[y.jsx("span",{className:"text-3xl font-black text-gray-300 group-hover:text-richting-orange transition-colors",children:_+1}),y.jsxs("div",{children:[y.jsx("h5",{className:"font-bold text-slate-900 text-sm leading-snug group-hover:text-richting-orange transition-colors",children:p.title}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(p.likedBy||[]).length," likes"]})]})]},p.id)):y.jsx("p",{className:"text-xs text-gray-400",children:"Nog geen beoordelingen."})})]}),y.jsxs("div",{className:"bg-richting-orange text-white p-6 rounded-lg",children:[y.jsx("h3",{className:"font-bold mb-2",children:"Heb je kennis om te delen?"}),y.jsx("p",{className:"text-sm opacity-90 mb-4",children:"Help je collega's en voeg waardevolle documenten toe aan de kennisbank."}),y.jsx("button",{onClick:()=>n("upload"),className:"w-full bg-white text-richting-orange font-bold py-2 rounded shadow-sm hover:bg-gray-50 transition-colors text-sm uppercase",children:"Nieuwe Bron Toevoegen"})]})]})]})]})},uD=({documents:s,openDocument:e})=>{const[n,r]=fe.useState(""),[o,c]=fe.useState("all"),f=fe.useMemo(()=>s.filter(m=>{if(m.isArchived)return!1;const p=m.title.toLowerCase().includes(n.toLowerCase())||m.summary.toLowerCase().includes(n.toLowerCase()),_=o==="all"||m.mainCategoryId===o;return p&&_}),[s,n,o]);return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[y.jsx("input",{type:"text",placeholder:"Zoek in kennisbank...",className:"w-full md:w-96 px-4 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange",value:n,onChange:m=>r(m.target.value)}),y.jsxs("select",{className:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-md bg-white focus:ring-richting-orange focus:border-richting-orange",value:o,onChange:m=>c(m.target.value),children:[y.jsx("option",{value:"all",children:"Alle Categorien"}),tc.map(m=>y.jsx("option",{value:m.id,children:m.label},m.id))]})]}),y.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Titel & Samenvatting"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categorie"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Datum"}),y.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actie"})]})}),y.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[f.map(m=>y.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[y.jsx("td",{className:"px-6 py-4",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-orange-100 rounded-full flex items-center justify-center text-richting-orange font-bold text-xs",children:m.type}),y.jsxs("div",{className:"ml-4",children:[y.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-richting-orange",onClick:()=>e(m),children:m.title}),y.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:m.summary})]})]})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:vs(m.mainCategoryId)})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.uploadedAt).toLocaleDateString()}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:y.jsx("button",{onClick:()=>e(m),className:"text-richting-orange hover:text-orange-900",children:"Bekijk"})})]},m.id)),f.length===0&&y.jsx("tr",{children:y.jsx("td",{colSpan:4,className:"px-6 py-10 text-center text-gray-500",children:"Geen documenten gevonden."})})]})]})})]})},hD=({user:s,documents:e})=>{const[n,r]=fe.useState([{id:"1",role:"model",text:`Hoi ${s.name.split(" ")[0]}, ik ben de AI assistent van Richting. Waarmee kan ik je helpen?`}]),[o,c]=fe.useState(""),[f,m]=fe.useState(!1),p=fe.useRef(null);fe.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[n]);const _=async()=>{if(!o.trim()||f)return;const T={id:Date.now().toString(),role:"user",text:o};r(x=>[...x,T]),c(""),m(!0);const w=await eD(o,e);r(x=>[...x,{id:(Date.now()+1).toString(),role:"model",text:w.answer,citations:w.citedIds}]),m(!1)};return y.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",ref:p,children:[n.map(T=>y.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"}`,children:y.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 shadow-sm ${T.role==="user"?"bg-richting-orange text-white rounded-tr-none":"bg-white text-gray-800 border border-gray-100 rounded-tl-none"}`,children:y.jsx("p",{className:"whitespace-pre-wrap text-sm",children:T.text})})},T.id)),f&&y.jsx("div",{className:"flex justify-start",children:y.jsxs("div",{className:"bg-white rounded-2xl rounded-tl-none px-4 py-3 border border-gray-100 flex items-center gap-2",children:[y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-75"}),y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-150"})]})})]}),y.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-full px-4 py-2 focus:ring-2 focus:ring-richting-orange focus:border-transparent outline-none",placeholder:"Stel je vraag over interne documenten...",value:o,onChange:T=>c(T.target.value),onKeyDown:T=>T.key==="Enter"&&_()}),y.jsx("button",{onClick:_,disabled:f||!o.trim(),className:"bg-richting-orange text-white rounded-full p-2 hover:bg-orange-600 disabled:opacity-50 transition-colors",children:y.jsx(nD,{})})]})})]})},fD=({user:s,onUploadComplete:e})=>{const[n,r]=fe.useState(1),[o,c]=fe.useState(ut.TEXT),[f,m]=fe.useState(""),[p,_]=fe.useState(""),[T,w]=fe.useState(""),[x,U]=fe.useState(""),[Y,te]=fe.useState([]),[W,pe]=fe.useState(!1),[ue,le]=fe.useState(null);fe.useEffect(()=>{(async()=>{const R=await Vn.getCustomersForUser(s.id,s.role);te(R)})()},[s]);const Ae=async()=>{if(!f){alert("Geef aub een titel op");return}if(!p&&!T)return;pe(!0);let ne=p;o===ut.URL||o===ut.GOOGLE_DOC||o===ut.PDF?ne=`URL: ${T}
(Inhoud niet direct beschikbaar, genereer op basis van URL of Titel: ${f})`:o===ut.EMAIL&&(ne=`EMAIL ONDERWERP: ${f}
INHOUD:
${p}`);const R=await WN(ne);le(R),pe(!1),r(2)},me=async()=>{if(!ue)return;const ne={id:`doc_${Date.now()}`,title:f||"Nieuwe Bron",content:p||T,originalUrl:T||"",type:o,uploadedBy:s.id,uploadedAt:new Date().toISOString(),summary:ue.summary,mainCategoryId:ue.mainCategoryId,subCategoryId:ue.subCategoryId,tags:ue.tags,viewedBy:[],likedBy:[],isArchived:!1,customerId:x||void 0};await bo.addDocument(ne),e()};return y.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[y.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[y.jsx("h3",{className:"font-bold text-slate-800",children:"Nieuwe Kennis Toevoegen"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("span",{className:`w-3 h-3 rounded-full ${n>=1?"bg-richting-orange":"bg-gray-300"}`}),y.jsx("span",{className:`w-3 h-3 rounded-full ${n>=2?"bg-richting-orange":"bg-gray-300"}`})]})]}),y.jsxs("div",{className:"p-8",children:[n===1&&y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type Bron"}),y.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[y.jsxs("button",{onClick:()=>c(ut.TEXT),className:`py-3 px-2 rounded-lg border-2 text-xs font-bold transition-all flex flex-col items-center gap-1 ${o===ut.TEXT?"border-richting-orange text-richting-orange bg-orange-50":"border-gray-200 text-gray-500 hover:border-gray-300"}`,children:[y.jsx("span",{children:""})," Tekst"]}),y.jsxs("button",{onClick:()=>c(ut.URL),className:`py-3 px-2 rounded-lg border-2 text-xs font-bold transition-all flex flex-col items-center gap-1 ${o===ut.URL?"border-richting-orange text-richting-orange bg-orange-50":"border-gray-200 text-gray-500 hover:border-gray-300"}`,children:[y.jsx("span",{children:""})," Website"]}),y.jsxs("button",{onClick:()=>c(ut.EMAIL),className:`py-3 px-2 rounded-lg border-2 text-xs font-bold transition-all flex flex-col items-center gap-1 ${o===ut.EMAIL?"border-richting-orange text-richting-orange bg-orange-50":"border-gray-200 text-gray-500 hover:border-gray-300"}`,children:[y.jsx(hA,{})," Email"]}),y.jsxs("button",{onClick:()=>c(ut.GOOGLE_DOC),className:`py-3 px-2 rounded-lg border-2 text-xs font-bold transition-all flex flex-col items-center gap-1 ${o===ut.GOOGLE_DOC?"border-richting-orange text-richting-orange bg-orange-50":"border-gray-200 text-gray-500 hover:border-gray-300"}`,children:[y.jsx(fA,{})," G-Doc"]}),y.jsxs("button",{onClick:()=>c(ut.PDF),className:`py-3 px-2 rounded-lg border-2 text-xs font-bold transition-all flex flex-col items-center gap-1 ${o===ut.PDF?"border-richting-orange text-richting-orange bg-orange-50":"border-gray-200 text-gray-500 hover:border-gray-300"}`,children:[y.jsx(dA,{})," PDF (Link)"]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o===ut.EMAIL?"Onderwerp":"Titel"}),y.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange",placeholder:o===ut.EMAIL?"Onderwerp van de email":"Titel van het document",value:f,onChange:ne=>m(ne.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Koppel aan Klant (Optioneel)"}),y.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange bg-white",value:x,onChange:ne=>U(ne.target.value),children:[y.jsx("option",{value:"",children:"-- Geen koppeling --"}),Y.map(ne=>y.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),o===ut.TEXT||o===ut.EMAIL?y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o===ut.EMAIL?"Inhoud Email":"Inhoud"}),y.jsx("textarea",{className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange",placeholder:"Plak hier de tekst...",value:p,onChange:ne=>_(ne.target.value)})]}):y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link"}),y.jsx("input",{type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-richting-orange focus:border-richting-orange",placeholder:o===ut.GOOGLE_DOC?"https://docs.google.com/...":"https://...",value:T,onChange:ne=>w(ne.target.value)})]}),y.jsx("button",{onClick:Ae,disabled:W||!f,className:"w-full bg-slate-900 text-white py-3 rounded-lg font-bold hover:bg-slate-800 transition-colors disabled:opacity-50 flex justify-center items-center gap-2",children:W?y.jsx(y.Fragment,{children:"Analyzing..."}):y.jsx(y.Fragment,{children:" Analyseer & Categoriseer"})})]}),n===2&&ue&&y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"bg-orange-50 border border-orange-100 p-4 rounded-lg",children:[y.jsx("h4",{className:"font-bold text-richting-orange mb-2 flex items-center gap-2",children:" AI Analyse Resultaat"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Samenvatting"}),y.jsx("p",{className:"text-sm text-gray-800",children:ue.summary})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Categorie"}),y.jsx("p",{className:"text-sm font-medium",children:vs(ue.mainCategoryId)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Subcategorie"}),y.jsx("p",{className:"text-sm font-medium",children:vs(ue.mainCategoryId,ue.subCategoryId)})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Tags"}),y.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:ue.tags.map(ne=>y.jsxs("span",{className:"px-2 py-1 bg-white border border-gray-200 rounded text-xs text-gray-600",children:["#",ne]},ne))})]})]})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("button",{onClick:()=>r(1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-600 font-medium hover:bg-gray-50",children:"Terug"}),y.jsx("button",{onClick:me,className:"flex-1 px-4 py-2 bg-richting-orange text-white rounded-lg font-bold hover:bg-orange-600",children:"Opslaan in Kennisbank"})]})]})]})]})},dD=()=>{const[s,e]=fe.useState(null),[n,r]=fe.useState(!0),[o,c]=fe.useState("dashboard"),[f,m]=fe.useState([]),[p,_]=fe.useState(null),[T,w]=fe.useState(""),[x,U]=fe.useState(""),[Y,te]=fe.useState(!1);fe.useEffect(()=>{const me=ca.onAuthStateChange(ne=>{e(ne),r(!1),ne&&(w(""),te(!1))});return()=>me()},[]),fe.useEffect(()=>{(async()=>{if(s)try{const ne=await bo.getDocuments();if(m(ne),ne.length===0){await bo.seed();const R=await bo.getDocuments();m(R)}}catch(ne){console.error("Failed to load docs:",ne),ne.message==="FIREBASE_DB_NOT_FOUND"&&te(!0)}})()},[s,o]);const W=async(me,ne)=>{r(!0),w("");try{await ca.login(me,ne)}catch(R){w(ch(R.code)),r(!1)}},pe=async()=>{r(!0),w("");try{await ca.loginWithGoogle()}catch(me){w(ch(me.code)),r(!1)}},ue=async(me,ne,R)=>{r(!0),w("");try{await ca.register(me,ne,R)}catch(S){w(ch(S.code)),r(!1)}},le=async me=>{r(!0);try{await ca.resetPassword(me),U("Herstel email verzonden!")}catch(ne){w(ch(ne.code))}finally{r(!1)}},Ae=async(me,ne,R)=>{R&&R.stopPropagation(),s&&(m(S=>S.map(C=>{if(C.id!==me)return C;const V=C.viewedBy||[],D=C.likedBy||[];if(ne==="view"&&!V.includes(s.id))return{...C,viewedBy:[...V,s.id]};if(ne==="like"){const k=D.includes(s.id);return{...C,likedBy:k?D.filter(I=>I!==s.id):[...D,s.id]}}return ne==="archive"?{...C,isArchived:!C.isArchived}:C})),p&&p.id===me&&_(S=>{if(!S)return null;if(ne==="like"){const C=S.likedBy||[],V=C.includes(s.id);return{...S,likedBy:V?C.filter(D=>D!==s.id):[...C,s.id]}}return S}),await bo.updateDocumentStats(me,s.id,ne))};return Y?y.jsx(rD,{}):n&&!s?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:y.jsx("div",{className:"w-8 h-8 border-4 border-richting-orange border-t-transparent rounded-full animate-spin"})}):s?y.jsxs(TN,{user:s,onLogout:()=>ca.logout(),currentView:o,onNavigate:c,children:[o==="dashboard"&&y.jsx(cD,{documents:f,user:s,setView:c,openDocument:me=>{Ae(me.id,"view"),_(me)},handleDocumentAction:Ae}),o==="customers"&&y.jsx(lD,{user:s,onOpenDoc:me=>{Ae(me.id,"view"),_(me)}}),o==="knowledge"&&y.jsx(uD,{documents:f,openDocument:me=>{Ae(me.id,"view"),_(me)}}),o==="chat"&&y.jsx(hD,{user:s,documents:f}),o==="upload"&&y.jsx(fD,{user:s,onUploadComplete:()=>{c("dashboard")}}),p&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>_(null),children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:me=>me.stopPropagation(),children:[y.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-8 py-4 flex justify-between items-center z-10",children:[y.jsx("span",{className:"text-xs font-bold uppercase text-richting-orange tracking-widest",children:vs(p.mainCategoryId)}),y.jsx("button",{onClick:()=>_(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:y.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),y.jsxs("div",{className:"p-8",children:[y.jsx("h1",{className:"text-3xl font-extrabold text-slate-900 mb-6",children:p.title}),y.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[y.jsxs("button",{onClick:()=>Ae(p.id,"like"),className:`flex items-center gap-2 px-4 py-2 rounded-full border transition-all ${(p.likedBy||[]).includes(s.id)?"border-richting-orange text-richting-orange bg-orange-50":"border-gray-200 text-gray-500 hover:border-gray-300"}`,children:[y.jsx(lA,{filled:(p.likedBy||[]).includes(s.id)}),y.jsx("span",{className:"text-sm font-bold",children:(p.likedBy||[]).length})]}),p.originalUrl&&y.jsxs("a",{href:p.originalUrl,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-full bg-slate-900 text-white hover:bg-slate-700 transition-colors text-sm font-bold",children:[y.jsx(eg,{})," Open Origineel"]}),s.role==="ADMIN"&&y.jsxs("button",{onClick:()=>Ae(p.id,"archive"),className:"flex items-center gap-2 px-4 py-2 rounded-full border border-gray-200 text-gray-500 hover:bg-red-50 hover:text-red-600 hover:border-red-200 transition-colors text-sm",children:[y.jsx(cA,{})," ",p.isArchived?"Dearchiveren":"Archiveren"]})]}),y.jsxs("div",{className:"prose prose-slate max-w-none",children:[y.jsxs("p",{className:"text-lg text-slate-600 leading-relaxed font-medium border-l-4 border-richting-orange pl-4 mb-8 italic",children:['"',p.summary,'"']}),y.jsx("div",{className:"bg-gray-50 p-6 rounded-lg text-sm text-gray-800 whitespace-pre-wrap leading-relaxed font-mono",children:p.content})]}),y.jsx("div",{className:"mt-8 pt-8 border-t border-gray-100",children:y.jsx("div",{className:"flex flex-wrap gap-2",children:(p.tags||[]).map(me=>y.jsxs("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-xs font-bold text-gray-600",children:["#",me]},me))})})]})]})})]}):y.jsx(aD,{onLogin:W,onGoogleLogin:pe,onRegister:ue,onForgot:le,loading:n,error:T,success:x,setAuthError:w})},gA=document.getElementById("root");if(!gA)throw new Error("Could not find root element to mount to");const mD=iS.createRoot(gA);mD.render(y.jsx(Xw.StrictMode,{children:y.jsx(dD,{})}));
